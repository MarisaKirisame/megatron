auto var_modified_x_1001(const auto &x_1003) {
  return [&](const auto &x_1004) {
    OptionMatch(
        x_1003.next, [&](const auto &x_1006) { return Nil(); },
        [&](const auto &x_1005) { return Cons(x_1005, Nil()); });
    OptionMatch(
        x_1003.next, [&](const auto &x_1009) { return Nil(); },
        [&](const auto &x_1008) { return Cons(x_1008, Nil()); });
    MakeUnit();
    MakeUnit();
    return MakeUnit();
  };
}
auto eval_expr_x_998(const auto &x_1011) {
  return [&](const auto &x_1012) {
    if (BoolOfValue((BoolOfValue(VBool(IsSome(x_1011.prev)))) ? (not([&]() {
          ReadMetric(x_1012);
          return OptionMatch(
              HashtblFind(OptionMatch(
                              x_1011.prev, [&](const auto &x_1014) { return Panic(); },
                              [&](const auto &x_1013) { return x_1013; })
                              .var,
                          "line_break"),
              [&](const auto &x_1016) { return Panic(); }, [&](const auto &x_1015) { return x_1015; });
        }()))
                                                              : (VBool(false)))) {
      return max(
          [&]() {
            ReadMetric(x_1012);
            return OptionMatch(
                HashtblFind(OptionMatch(
                                Some(x_1011), [&](const auto &x_1022) { return Panic(); },
                                [&](const auto &x_1021) { return x_1021; })
                                .var,
                            "height_external"),
                [&](const auto &x_1024) { return Panic(); }, [&](const auto &x_1023) { return x_1023; });
          }(),
          [&]() {
            ReadMetric(x_1012);
            return OptionMatch(
                HashtblFind(OptionMatch(
                                x_1011.prev, [&](const auto &x_1026) { return Panic(); },
                                [&](const auto &x_1025) { return x_1025; })
                                .var,
                            "line_height"),
                [&](const auto &x_1028) { return Panic(); }, [&](const auto &x_1027) { return x_1027; });
          }());
    } else {
      ReadMetric(x_1012);
      return OptionMatch(
          HashtblFind(
              OptionMatch(
                  Some(x_1011), [&](const auto &x_1018) { return Panic(); }, [&](const auto &x_1017) { return x_1017; })
                  .var,
              "height_external"),
          [&](const auto &x_1020) { return Panic(); }, [&](const auto &x_1019) { return x_1019; });
    };
  } auto var_modified_x_996(const auto &x_1029) {
    return [&](const auto &x_1030) { return MakeUnit(); };
  }
  auto eval_expr_x_993(const auto &x_1033) {
    return [&](const auto &x_1034) {
      if (BoolOfValue(eq(
              [&]() {
                ReadMetric(x_1034);
                return OptionMatch(
                    HashtblFind(OptionMatch(
                                    Some(x_1033), [&](const auto &x_1036) { return Panic(); },
                                    [&](const auto &x_1035) { return x_1035; })
                                    .var,
                                "position"),
                    [&](const auto &x_1038) { return Panic(); }, [&](const auto &x_1037) { return x_1037; });
              }(),
              VString("absolute")))) {
        return VFloat(0.);
      } else {
        ReadMetric(x_1034);
        return OptionMatch(
            HashtblFind(OptionMatch(
                            Some(x_1033), [&](const auto &x_1040) { return Panic(); },
                            [&](const auto &x_1039) { return x_1039; })
                            .var,
                        "height_internal"),
            [&](const auto &x_1042) { return Panic(); }, [&](const auto &x_1041) { return x_1041; });
      };
    } auto var_modified_x_991(const auto &x_1043) {
      return [&](const auto &x_1044) { return MakeUnit(); };
    }
    auto eval_expr_x_988(const auto &x_1047) {
      return [&](const auto &x_1048) {if (BoolOfValue([&](){ReadMetric(x_1048);return OptionMatch(HashtblFind(OptionMatch(Some(x_1047),[&](const auto&x_1050){return Panic();},[&](const auto&x_1049){return x_1049;}).var,"intrinsic_height_is_height"),[&](const auto&x_1052){return Panic();},[&](const auto&x_1051){return x_1051;});}())){ReadMetric(x_1048);return OptionMatch(HashtblFind(OptionMatch(Some(x_1047),[&](const auto&x_1098){return Panic();},[&](const auto&x_1097){return x_1097;}).var,"intrinsic_height_internal"),[&](const auto&x_1100){return Panic();},[&](const auto&x_1099){return x_1099;});}else{if (BoolOfValue((BoolOfValue(VBool(IsSome(x_1047.parent))))?([&](){ReadMetric(x_1048);return OptionMatch(HashtblFind(OptionMatch(x_1047.parent,[&](const auto&x_1054){return Panic();},[&](const auto&x_1053){return x_1053;}).var,"is_flex_column"),[&](const auto&x_1056){return Panic();},[&](const auto&x_1055){return x_1055;});}()):(VBool(false)))){return plus([&](){ReadMetric(x_1048);return OptionMatch(HashtblFind(OptionMatch(Some(x_1047),[&](const auto&x_1086){return Panic();},[&](const auto&x_1085){return x_1085;}).var,"intrinsic_height_internal"),[&](const auto&x_1088){return Panic();},[&](const auto&x_1087){return x_1087;});}(),mult([&](){ReadMetric(x_1048);return OptionMatch(HashtblFind(OptionMatch(Some(x_1047),[&](const auto&x_1090){return Panic();},[&](const auto&x_1089){return x_1089;}).var,"flex_amount"),[&](const auto&x_1092){return Panic();},[&](const auto&x_1091){return x_1091;});}(),[&](){ReadMetric(x_1048);return OptionMatch(HashtblFind(OptionMatch(x_1047.parent,[&](const auto&x_1094){return Panic();},[&](const auto&x_1093){return x_1093;}).var,"flex_unit"),[&](const auto&x_1096){return Panic();},[&](const auto&x_1095){return x_1095;});}()));}else{if (BoolOfValue(has_suffix([&](){ReadMetric(x_1048);return OptionMatch(HashtblFind(OptionMatch(Some(x_1047),[&](const auto&x_1058){return Panic();},[&](const auto&x_1057){return x_1057;}).var,"height_expr"),[&](const auto&x_1060){return Panic();},[&](const auto&x_1059){return x_1059;});}(),VString("%")))){return mult([&](){ReadMetric(x_1048);return OptionMatch(HashtblFind(OptionMatch(Some(x_1047),[&](const auto&x_1078){return Panic();},[&](const auto&x_1077){return x_1077;}).var,"box_height"),[&](const auto&x_1080){return Panic();},[&](const auto&x_1079){return x_1079;});}(),divide(string_to_float(strip_suffix([&](){ReadMetric(x_1048);return OptionMatch(HashtblFind(OptionMatch(Some(x_1047),[&](const auto&x_1082){return Panic();},[&](const auto&x_1081){return x_1081;}).var,"height_expr"),[&](const auto&x_1084){return Panic();},[&](const auto&x_1083){return x_1083;});}(),VString("%"))),VFloat(100.)));}else{if (BoolOfValue(eq([&](){ReadMetric(x_1048);return OptionMatch(HashtblFind(OptionMatch(Some(x_1047),[&](const auto&x_1062){return Panic();},[&](const auto&x_1061){return x_1061;}).var,"height_expr"),[&](const auto&x_1064){return Panic();},[&](const auto&x_1063){return x_1063;});}(),VString("fit-content")))){return max([&](){ReadMetric(x_1048);return OptionMatch(HashtblFind(OptionMatch(Some(x_1047),[&](const auto&x_1070){return Panic();},[&](const auto&x_1069){return x_1069;}).var,"box_height"),[&](const auto&x_1072){return Panic();},[&](const auto&x_1071){return x_1071;});}(),[&](){ReadMetric(x_1048);return OptionMatch(HashtblFind(OptionMatch(Some(x_1047),[&](const auto&x_1074){return Panic();},[&](const auto&x_1073){return x_1073;}).var,"intrinsic_height_internal"),[&](const auto&x_1076){return Panic();},[&](const auto&x_1075){return x_1075;});}());}else{return Panic();};}auto var_modified_x_986(const auto&x_1101){return [&](const auto&x_1102){OptionMatch(x_1101.next,[&](const auto&x_1104){return Nil();},[&](const auto&x_1103){return Cons(x_1103,Nil());});OptionMatch(x_1101.next,[&](const auto&x_1107){return Nil();},[&](const auto&x_1106){return Cons(x_1106,Nil());});MakeUnit();MakeUnit();return MakeUnit();};}auto eval_expr_x_983(const auto&x_1110){return [&](const auto&x_1111){if (BoolOfValue(VBool(IsSome(x_1110.prev)))){if (BoolOfValue((BoolOfValue([&](){ReadMetric(x_1111);return OptionMatch(HashtblFind(OptionMatch(Some(x_1110),[&](const auto&x_1117){return Panic();},[&](const auto&x_1116){return x_1116;}).var,"line_break"),[&](const auto&x_1119){return Panic();},[&](const auto&x_1118){return x_1118;});}()))?(VBool(true)):([&](){ReadMetric(x_1111);return OptionMatch(HashtblFind(OptionMatch(x_1110.prev,[&](const auto&x_1121){return Panic();},[&](const auto&x_1120){return x_1120;}).var,"line_break"),[&](const auto&x_1123){return Panic();},[&](const auto&x_1122){return x_1122;});}()))){return plus([&](){ReadMetric(x_1111);return OptionMatch(HashtblFind(OptionMatch(x_1110.prev,[&](const auto&x_1129){return Panic();},[&](const auto&x_1128){return x_1128;}).var,"y"),[&](const auto&x_1131){return Panic();},[&](const auto&x_1130){return x_1130;});}(),[&](){ReadMetric(x_1111);return OptionMatch(HashtblFind(OptionMatch(x_1110.prev,[&](const auto&x_1133){return Panic();},[&](const auto&x_1132){return x_1132;}).var,"line_height"),[&](const auto&x_1135){return Panic();},[&](const auto&x_1134){return x_1134;});}());}else{ReadMetric(x_1111);return OptionMatch(HashtblFind(OptionMatch(x_1110.prev,[&](const auto&x_1125){return Panic();},[&](const auto&x_1124){return x_1124;}).var,"y"),[&](const auto&x_1127){return Panic();},[&](const auto&x_1126){return x_1126;});}else{if (BoolOfValue(VBool(IsSome(x_1110.parent)))){ReadMetric(x_1111);return OptionMatch(HashtblFind(OptionMatch(x_1110.parent,[&](const auto&x_1113){return Panic();},[&](const auto&x_1112){return x_1112;}).var,"y"),[&](const auto&x_1115){return Panic();},[&](const auto&x_1114){return x_1114;});}else{return VFloat(0.);};}auto var_modified_x_981(const auto&x_1136){return [&](const auto&x_1137){OptionMatch(x_1136.next,[&](const auto&x_1139){return Nil();},[&](const auto&x_1138){return Cons(x_1138,Nil());});MakeUnit();MakeUnit();return MakeUnit();};}auto eval_expr_x_978(const auto&x_1141){return [&](const auto&x_1142){if (BoolOfValue(eq([&](){ReadMetric(x_1142);return OptionMatch(HashtblFind(OptionMatch(Some(x_1141),[&](const auto&x_1144){return Panic();},[&](const auto&x_1143){return x_1143;}).var,"position"),[&](const auto&x_1146){return Panic();},[&](const auto&x_1145){return x_1145;});}(),VString("absolute")))){return VFloat(0.);}else{ReadMetric(x_1142);return OptionMatch(HashtblFind(OptionMatch(Some(x_1141),[&](const auto&x_1148){return Panic();},[&](const auto&x_1147){return x_1147;}).var,"width_internal"),[&](const auto&x_1150){return Panic();},[&](const auto&x_1149){return x_1149;});};}auto var_modified_x_976(const auto&x_1151){return [&](const auto&x_1152){return MakeUnit();};}auto eval_expr_x_973(const auto&x_1155){return [&](const auto&x_1156){if (BoolOfValue([&](){ReadMetric(x_1156);return OptionMatch(HashtblFind(OptionMatch(Some(x_1155),[&](const auto&x_1158){return Panic();},[&](const auto&x_1157){return x_1157;}).var,"intrinsic_width_is_width"),[&](const auto&x_1160){return Panic();},[&](const auto&x_1159){return x_1159;});}())){ReadMetric(x_1156);return OptionMatch(HashtblFind(OptionMatch(Some(x_1155),[&](const auto&x_1206){return Panic();},[&](const auto&x_1205){return x_1205;}).var,"intrinsic_width_internal"),[&](const auto&x_1208){return Panic();},[&](const auto&x_1207){return x_1207;});}else{if (BoolOfValue((BoolOfValue(VBool(IsSome(x_1155.parent))))?([&](){ReadMetric(x_1156);return OptionMatch(HashtblFind(OptionMatch(x_1155.parent,[&](const auto&x_1162){return Panic();},[&](const auto&x_1161){return x_1161;}).var,"is_flex_row"),[&](const auto&x_1164){return Panic();},[&](const auto&x_1163){return x_1163;});}()):(VBool(false)))){return plus([&](){ReadMetric(x_1156);return OptionMatch(HashtblFind(OptionMatch(Some(x_1155),[&](const auto&x_1194){return Panic();},[&](const auto&x_1193){return x_1193;}).var,"intrinsic_width_internal"),[&](const auto&x_1196){return Panic();},[&](const auto&x_1195){return x_1195;});}(),mult([&](){ReadMetric(x_1156);return OptionMatch(HashtblFind(OptionMatch(Some(x_1155),[&](const auto&x_1198){return Panic();},[&](const auto&x_1197){return x_1197;}).var,"flex_amount"),[&](const auto&x_1200){return Panic();},[&](const auto&x_1199){return x_1199;});}(),[&](){ReadMetric(x_1156);return OptionMatch(HashtblFind(OptionMatch(x_1155.parent,[&](const auto&x_1202){return Panic();},[&](const auto&x_1201){return x_1201;}).var,"flex_unit"),[&](const auto&x_1204){return Panic();},[&](const auto&x_1203){return x_1203;});}()));}else{if (BoolOfValue(has_suffix([&](){ReadMetric(x_1156);return OptionMatch(HashtblFind(OptionMatch(Some(x_1155),[&](const auto&x_1166){return Panic();},[&](const auto&x_1165){return x_1165;}).var,"width_expr"),[&](const auto&x_1168){return Panic();},[&](const auto&x_1167){return x_1167;});}(),VString("%")))){return mult([&](){ReadMetric(x_1156);return OptionMatch(HashtblFind(OptionMatch(Some(x_1155),[&](const auto&x_1186){return Panic();},[&](const auto&x_1185){return x_1185;}).var,"box_width"),[&](const auto&x_1188){return Panic();},[&](const auto&x_1187){return x_1187;});}(),divide(string_to_float(strip_suffix([&](){ReadMetric(x_1156);return OptionMatch(HashtblFind(OptionMatch(Some(x_1155),[&](const auto&x_1190){return Panic();},[&](const auto&x_1189){return x_1189;}).var,"width_expr"),[&](const auto&x_1192){return Panic();},[&](const auto&x_1191){return x_1191;});}(),VString("%"))),VFloat(100.)));}else{if (BoolOfValue(eq([&](){ReadMetric(x_1156);return OptionMatch(HashtblFind(OptionMatch(Some(x_1155),[&](const auto&x_1170){return Panic();},[&](const auto&x_1169){return x_1169;}).var,"width_expr"),[&](const auto&x_1172){return Panic();},[&](const auto&x_1171){return x_1171;});}(),VString("fit-content")))){return max([&](){ReadMetric(x_1156);return OptionMatch(HashtblFind(OptionMatch(Some(x_1155),[&](const auto&x_1178){return Panic();},[&](const auto&x_1177){return x_1177;}).var,"box_width"),[&](const auto&x_1180){return Panic();},[&](const auto&x_1179){return x_1179;});}(),[&](){ReadMetric(x_1156);return OptionMatch(HashtblFind(OptionMatch(Some(x_1155),[&](const auto&x_1182){return Panic();},[&](const auto&x_1181){return x_1181;}).var,"intrinsic_width_internal"),[&](const auto&x_1184){return Panic();},[&](const auto&x_1183){return x_1183;});}());}else{return Panic();};}auto var_modified_x_971(const auto&x_1209){return [&](const auto&x_1210){OptionMatch(x_1209.next,[&](const auto&x_1212){return Nil();},[&](const auto&x_1211){return Cons(x_1211,Nil());});MakeUnit();MakeUnit();return MakeUnit();};}auto eval_expr_x_968(const auto&x_1215){return [&](const auto&x_1216){if (BoolOfValue(VBool(IsSome(x_1215.prev)))){if (BoolOfValue((BoolOfValue([&](){ReadMetric(x_1216);return OptionMatch(HashtblFind(OptionMatch(Some(x_1215),[&](const auto&x_1222){return Panic();},[&](const auto&x_1221){return x_1221;}).var,"line_break"),[&](const auto&x_1224){return Panic();},[&](const auto&x_1223){return x_1223;});}()))?(VBool(true)):([&](){ReadMetric(x_1216);return OptionMatch(HashtblFind(OptionMatch(x_1215.prev,[&](const auto&x_1226){return Panic();},[&](const auto&x_1225){return x_1225;}).var,"line_break"),[&](const auto&x_1228){return Panic();},[&](const auto&x_1227){return x_1227;});}()))){return VFloat(0.);}else{return plus([&](){ReadMetric(x_1216);return OptionMatch(HashtblFind(OptionMatch(x_1215.prev,[&](const auto&x_1230){return Panic();},[&](const auto&x_1229){return x_1229;}).var,"x"),[&](const auto&x_1232){return Panic();},[&](const auto&x_1231){return x_1231;});}(),[&](){ReadMetric(x_1216);return OptionMatch(HashtblFind(OptionMatch(x_1215.prev,[&](const auto&x_1234){return Panic();},[&](const auto&x_1233){return x_1233;}).var,"width_external"),[&](const auto&x_1236){return Panic();},[&](const auto&x_1235){return x_1235;});}());}else{if (BoolOfValue(VBool(IsSome(x_1215.parent)))){ReadMetric(x_1216);return OptionMatch(HashtblFind(OptionMatch(x_1215.parent,[&](const auto&x_1218){return Panic();},[&](const auto&x_1217){return x_1217;}).var,"x"),[&](const auto&x_1220){return Panic();},[&](const auto&x_1219){return x_1219;});}else{return VFloat(0.);};}auto var_modified_x_966(const auto&x_1237){return [&](const auto&x_1238){return MakeUnit();};}auto eval_expr_x_963(const auto&x_1241){return [&](const auto&x_1242){if (BoolOfValue(gt([&](){ReadMetric(x_1242);return OptionMatch(HashtblFind(OptionMatch(Some(x_1241),[&](const auto&x_1244){return Panic();},[&](const auto&x_1243){return x_1243;}).var,"left_over"),[&](const auto&x_1246){return Panic();},[&](const auto&x_1245){return x_1245;});}(),VFloat(0.)))){return divide([&](){ReadMetric(x_1242);return OptionMatch(HashtblFind(OptionMatch(Some(x_1241),[&](const auto&x_1256){return Panic();},[&](const auto&x_1255){return x_1255;}).var,"left_over"),[&](const auto&x_1258){return Panic();},[&](const auto&x_1257){return x_1257;});}(),[&](){ReadMetric(x_1242);return OptionMatch(HashtblFind(OptionMatch(Some(x_1241),[&](const auto&x_1260){return Panic();},[&](const auto&x_1259){return x_1259;}).var,"flex_grow_sum"),[&](const auto&x_1262){return Panic();},[&](const auto&x_1261){return x_1261;});}());}else{return divide([&](){ReadMetric(x_1242);return OptionMatch(HashtblFind(OptionMatch(Some(x_1241),[&](const auto&x_1248){return Panic();},[&](const auto&x_1247){return x_1247;}).var,"left_over"),[&](const auto&x_1250){return Panic();},[&](const auto&x_1249){return x_1249;});}(),[&](){ReadMetric(x_1242);return OptionMatch(HashtblFind(OptionMatch(Some(x_1241),[&](const auto&x_1252){return Panic();},[&](const auto&x_1251){return x_1251;}).var,"flex_shrink_sum"),[&](const auto&x_1254){return Panic();},[&](const auto&x_1253){return x_1253;});}());};}auto var_modified_x_961(const auto&x_1263){return [&](const auto&x_1264){return MakeUnit();};}auto eval_expr_x_958(const auto&x_1267){return [&](const auto&x_1268){if (BoolOfValue((BoolOfValue(VBool(IsSome(x_1267.parent))))?(gt([&](){ReadMetric(x_1268);return OptionMatch(HashtblFind(OptionMatch(x_1267.parent,[&](const auto&x_1270){return Panic();},[&](const auto&x_1269){return x_1269;}).var,"left_over"),[&](const auto&x_1272){return Panic();},[&](const auto&x_1271){return x_1271;});}(),VFloat(0.))):(VBool(false)))){ReadMetric(x_1268);return OptionMatch(HashtblFind(OptionMatch(Some(x_1267),[&](const auto&x_1278){return Panic();},[&](const auto&x_1277){return x_1277;}).var,"flex_grow"),[&](const auto&x_1280){return Panic();},[&](const auto&x_1279){return x_1279;});}else{ReadMetric(x_1268);return OptionMatch(HashtblFind(OptionMatch(Some(x_1267),[&](const auto&x_1274){return Panic();},[&](const auto&x_1273){return x_1273;}).var,"flex_shrink"),[&](const auto&x_1276){return Panic();},[&](const auto&x_1275){return x_1275;});};}auto var_modified_x_956(const auto&x_1281){return [&](const auto&x_1282){return MakeUnit();};}auto eval_expr_x_953(const auto&x_1287){return [&](const auto&x_1288){if (BoolOfValue([&](){ReadMetric(x_1288);return OptionMatch(HashtblFind(OptionMatch(Some(x_1287),[&](const auto&x_1290){return Panic();},[&](const auto&x_1289){return x_1289;}).var,"is_flex_row"),[&](const auto&x_1292){return Panic();},[&](const auto&x_1291){return x_1291;});}())){return minus([&](){ReadMetric(x_1288);return OptionMatch(HashtblFind(OptionMatch(Some(x_1287),[&](const auto&x_1302){return Panic();},[&](const auto&x_1301){return x_1301;}).var,"box_width"),[&](const auto&x_1304){return Panic();},[&](const auto&x_1303){return x_1303;});}(),(BoolOfValue(VBool(IsSome(ListLast(x_1287.children)))))?([&](){ReadMetric(x_1288);return OptionMatch(HashtblFind(OptionMatch(ListLast(x_1287.children),[&](const auto&x_1306){return Panic();},[&](const auto&x_1305){return x_1305;}).var,"intrinsic_width_sum"),[&](const auto&x_1308){return Panic();},[&](const auto&x_1307){return x_1307;});}()):(VFloat(0.)));}else{return minus([&](){ReadMetric(x_1288);return OptionMatch(HashtblFind(OptionMatch(Some(x_1287),[&](const auto&x_1294){return Panic();},[&](const auto&x_1293){return x_1293;}).var,"box_height"),[&](const auto&x_1296){return Panic();},[&](const auto&x_1295){return x_1295;});}(),(BoolOfValue(VBool(IsSome(ListLast(x_1287.children)))))?([&](){ReadMetric(x_1288);return OptionMatch(HashtblFind(OptionMatch(ListLast(x_1287.children),[&](const auto&x_1298){return Panic();},[&](const auto&x_1297){return x_1297;}).var,"intrinsic_height_sum"),[&](const auto&x_1300){return Panic();},[&](const auto&x_1299){return x_1299;});}()):(VFloat(0.)));};}auto var_modified_x_951(const auto&x_1309){return [&](const auto&x_1310){return MakeUnit();};}auto eval_expr_x_948(const auto&x_1314){return [&](const auto&x_1315){if (BoolOfValue(VBool(IsSome(x_1314.parent)))){ReadMetric(x_1315);return OptionMatch(HashtblFind(OptionMatch(x_1314.parent,[&](const auto&x_1317){return Panic();},[&](const auto&x_1316){return x_1316;}).var,"height_internal"),[&](const auto&x_1319){return Panic();},[&](const auto&x_1318){return x_1318;});}else{return VFloat(1080.);};}auto var_modified_x_946(const auto&x_1320){return [&](const auto&x_1321){return MakeUnit();};}auto eval_expr_x_943(const auto&x_1325){return [&](const auto&x_1326){if (BoolOfValue(VBool(IsSome(x_1325.parent)))){ReadMetric(x_1326);return OptionMatch(HashtblFind(OptionMatch(x_1325.parent,[&](const auto&x_1328){return Panic();},[&](const auto&x_1327){return x_1327;}).var,"width_internal"),[&](const auto&x_1330){return Panic();},[&](const auto&x_1329){return x_1329;});}else{return VFloat(1920.);};}auto var_modified_x_939(const auto&x_1331){return [&](const auto&x_1332){OptionMatch(x_1331.next,[&](const auto&x_1334){return Nil();},[&](const auto&x_1333){return Cons(x_1333,Nil());});MakeUnit();MakeUnit();OptionMatch(x_1331.next,[&](const auto&x_1341){return Nil();},[&](const auto&x_1340){return Cons(x_1340,Nil());});OptionMatch(x_1331.next,[&](const auto&x_1345){return Nil();},[&](const auto&x_1344){return Cons(x_1344,Nil());});OptionMatch(x_1331.next,[&](const auto&x_1348){return Nil();},[&](const auto&x_1347){return Cons(x_1347,Nil());});MakeUnit();MakeUnit();return MakeUnit();};}auto eval_expr_x_936(const auto&x_1350){return [&](const auto&x_1351){if (BoolOfValue(eq([&](){ReadMetric(x_1351);return OptionMatch(HashtblFind(OptionMatch(Some(x_1350),[&](const auto&x_1353){return Panic();},[&](const auto&x_1352){return x_1352;}).var,"display"),[&](const auto&x_1355){return Panic();},[&](const auto&x_1354){return x_1354;});}(),VString("none")))){return VBool(false);}else{if (BoolOfValue(eq([&](){ReadMetric(x_1351);return OptionMatch(HashtblFind(OptionMatch(Some(x_1350),[&](const auto&x_1357){return Panic();},[&](const auto&x_1356){return x_1356;}).var,"position"),[&](const auto&x_1359){return Panic();},[&](const auto&x_1358){return x_1358;});}(),VString("absolute")))){return VBool(false);}else{if (BoolOfValue((BoolOfValue(VBool(IsSome(x_1350.parent))))?((BoolOfValue(eq([&](){ReadMetric(x_1351);return OptionMatch(HashtblFind(OptionMatch(x_1350.parent,[&](const auto&x_1361){return Panic();},[&](const auto&x_1360){return x_1360;}).var,"display"),[&](const auto&x_1363){return Panic();},[&](const auto&x_1362){return x_1362;});}(),VString("flex"))))?(VBool(true)):(eq([&](){ReadMetric(x_1351);return OptionMatch(HashtblFind(OptionMatch(x_1350.parent,[&](const auto&x_1365){return Panic();},[&](const auto&x_1364){return x_1364;}).var,"display"),[&](const auto&x_1367){return Panic();},[&](const auto&x_1366){return x_1366;});}(),VString("inline-flex")))):(VBool(false)))){return VBool(true);}else{if (BoolOfValue(eq([&](){ReadMetric(x_1351);return OptionMatch(HashtblFind(OptionMatch(Some(x_1350),[&](const auto&x_1369){return Panic();},[&](const auto&x_1368){return x_1368;}).var,"display"),[&](const auto&x_1371){return Panic();},[&](const auto&x_1370){return x_1370;});}(),VString("block")))){return VBool(true);}else{if (BoolOfValue(eq([&](){ReadMetric(x_1351);return OptionMatch(HashtblFind(OptionMatch(Some(x_1350),[&](const auto&x_1373){return Panic();},[&](const auto&x_1372){return x_1372;}).var,"display"),[&](const auto&x_1375){return Panic();},[&](const auto&x_1374){return x_1374;});}(),VString("inline")))){return VBool(false);}else{if (BoolOfValue(eq([&](){ReadMetric(x_1351);return OptionMatch(HashtblFind(OptionMatch(Some(x_1350),[&](const auto&x_1377){return Panic();},[&](const auto&x_1376){return x_1376;}).var,"display"),[&](const auto&x_1379){return Panic();},[&](const auto&x_1378){return x_1378;});}(),VString("inline-block")))){return VBool(false);}else{if (BoolOfValue(eq([&](){ReadMetric(x_1351);return OptionMatch(HashtblFind(OptionMatch(Some(x_1350),[&](const auto&x_1381){return Panic();},[&](const auto&x_1380){return x_1380;}).var,"display"),[&](const auto&x_1383){return Panic();},[&](const auto&x_1382){return x_1382;});}(),VString("flex")))){if (BoolOfValue(eq([&](){ReadMetric(x_1351);return OptionMatch(HashtblFind(x_1350.prop,"flex-direction"),[&](const auto&x_1421){return Panic();},[&](const auto&x_1420){return x_1420;});}(),VString("row")))){return VBool(false);}else{if (BoolOfValue(eq([&](){ReadMetric(x_1351);return OptionMatch(HashtblFind(x_1350.prop,"flex-direction"),[&](const auto&x_1423){return Panic();},[&](const auto&x_1422){return x_1422;});}(),VString("column")))){return VBool(true);}else{if (BoolOfValue(eq([&](){ReadMetric(x_1351);return OptionMatch(HashtblFind(x_1350.prop,"flex-direction"),[&](const auto&x_1425){return Panic();},[&](const auto&x_1424){return x_1424;});}(),VString("column-reverse")))){return VBool(true);}else{return Panic();}else{if (BoolOfValue(eq([&](){ReadMetric(x_1351);return OptionMatch(HashtblFind(OptionMatch(Some(x_1350),[&](const auto&x_1385){return Panic();},[&](const auto&x_1384){return x_1384;}).var,"display"),[&](const auto&x_1387){return Panic();},[&](const auto&x_1386){return x_1386;});}(),VString("inline-flex")))){return VBool(false);}else{if (BoolOfValue(eq([&](){ReadMetric(x_1351);return OptionMatch(HashtblFind(OptionMatch(Some(x_1350),[&](const auto&x_1389){return Panic();},[&](const auto&x_1388){return x_1388;}).var,"display"),[&](const auto&x_1391){return Panic();},[&](const auto&x_1390){return x_1390;});}(),VString("contents")))){return VBool(false);}else{if (BoolOfValue(eq([&](){ReadMetric(x_1351);return OptionMatch(HashtblFind(OptionMatch(Some(x_1350),[&](const auto&x_1393){return Panic();},[&](const auto&x_1392){return x_1392;}).var,"display"),[&](const auto&x_1395){return Panic();},[&](const auto&x_1394){return x_1394;});}(),VString("table")))){return VBool(true);}else{if (BoolOfValue(eq([&](){ReadMetric(x_1351);return OptionMatch(HashtblFind(OptionMatch(Some(x_1350),[&](const auto&x_1397){return Panic();},[&](const auto&x_1396){return x_1396;}).var,"display"),[&](const auto&x_1399){return Panic();},[&](const auto&x_1398){return x_1398;});}(),VString("table-row-group")))){return VBool(true);}else{if (BoolOfValue(eq([&](){ReadMetric(x_1351);return OptionMatch(HashtblFind(OptionMatch(Some(x_1350),[&](const auto&x_1401){return Panic();},[&](const auto&x_1400){return x_1400;}).var,"display"),[&](const auto&x_1403){return Panic();},[&](const auto&x_1402){return x_1402;});}(),VString("table-row")))){return VBool(true);}else{if (BoolOfValue(eq([&](){ReadMetric(x_1351);return OptionMatch(HashtblFind(OptionMatch(Some(x_1350),[&](const auto&x_1405){return Panic();},[&](const auto&x_1404){return x_1404;}).var,"display"),[&](const auto&x_1407){return Panic();},[&](const auto&x_1406){return x_1406;});}(),VString("table-cell")))){return VBool(false);}else{if (BoolOfValue(eq([&](){ReadMetric(x_1351);return OptionMatch(HashtblFind(OptionMatch(Some(x_1350),[&](const auto&x_1409){return Panic();},[&](const auto&x_1408){return x_1408;}).var,"display"),[&](const auto&x_1411){return Panic();},[&](const auto&x_1410){return x_1410;});}(),VString("list-item")))){return VBool(true);}else{if (BoolOfValue(eq([&](){ReadMetric(x_1351);return OptionMatch(HashtblFind(OptionMatch(Some(x_1350),[&](const auto&x_1413){return Panic();},[&](const auto&x_1412){return x_1412;}).var,"display"),[&](const auto&x_1415){return Panic();},[&](const auto&x_1414){return x_1414;});}(),VString("grid")))){return VBool(true);}else{return Panic();};}auto var_modified_x_934(const auto&x_1428){return [&](const auto&x_1429){return MakeUnit();};}auto eval_expr_x_931(const auto&x_1431){return [&](const auto&x_1432){if (BoolOfValue((BoolOfValue(not(VBool(IsSome(x_1431.parent)))))?(VBool(true)):([&](){ReadMetric(x_1432);return OptionMatch(HashtblFind(OptionMatch(x_1431.parent,[&](const auto&x_1434){return Panic();},[&](const auto&x_1433){return x_1433;}).var,"visible"),[&](const auto&x_1436){return Panic();},[&](const auto&x_1435){return x_1435;});}()))){if (BoolOfValue(neq([&](){ReadMetric(x_1432);return OptionMatch(HashtblFind(OptionMatch(Some(x_1431),[&](const auto&x_1438){return Panic();},[&](const auto&x_1437){return x_1437;}).var,"display"),[&](const auto&x_1440){return Panic();},[&](const auto&x_1439){return x_1439;});}(),VString("none")))){if (BoolOfValue(not([&](){ReadMetric(x_1432);return OptionMatch(HashtblFind(OptionMatch(Some(x_1431),[&](const auto&x_1442){return Panic();},[&](const auto&x_1441){return x_1441;}).var,"inside_svg"),[&](const auto&x_1444){return Panic();},[&](const auto&x_1443){return x_1443;});}()))){return not([&](){ReadMetric(x_1432);return OptionMatch(HashtblFind(OptionMatch(Some(x_1431),[&](const auto&x_1446){return Panic();},[&](const auto&x_1445){return x_1445;}).var,"disabled"),[&](const auto&x_1448){return Panic();},[&](const auto&x_1447){return x_1447;});}());}else{return VBool(false);}else{return VBool(false);}else{return VBool(false);};}auto var_modified_x_929(const auto&x_1449){return [&](const auto&x_1450){return MakeUnit();};}auto eval_expr_x_926(const auto&x_1458){return [&](const auto&x_1459){if (BoolOfValue(eq(VString(x_1458.name),VString("NOSCRIPT")))){return VBool(true);}else{if (BoolOfValue(VBool(IsSome(x_1458.parent)))){ReadMetric(x_1459);return OptionMatch(HashtblFind(OptionMatch(x_1458.parent,[&](const auto&x_1461){return Panic();},[&](const auto&x_1460){return x_1460;}).var,"disabled"),[&](const auto&x_1463){return Panic();},[&](const auto&x_1462){return x_1462;});}else{return VBool(false);};}auto var_modified_x_924(const auto&x_1464){return [&](const auto&x_1465){return MakeUnit();};}auto eval_expr_x_921(const auto&x_1473){return [&](const auto&x_1474){if (BoolOfValue(VBool(IsSome(x_1473.parent)))){if (BoolOfValue([&](){ReadMetric(x_1474);return OptionMatch(HashtblFind(OptionMatch(x_1473.parent,[&](const auto&x_1476){return Panic();},[&](const auto&x_1475){return x_1475;}).var,"is_svg_block"),[&](const auto&x_1478){return Panic();},[&](const auto&x_1477){return x_1477;});}())){return VBool(true);}else{ReadMetric(x_1474);return OptionMatch(HashtblFind(OptionMatch(x_1473.parent,[&](const auto&x_1480){return Panic();},[&](const auto&x_1479){return x_1479;}).var,"inside_svg"),[&](const auto&x_1482){return Panic();},[&](const auto&x_1481){return x_1481;});}else{return VBool(false);};}auto var_modified_x_919(const auto&x_1483){return [&](const auto&x_1484){return MakeUnit();};}auto eval_expr_x_916(const auto&x_1486){return [&](const auto&x_1487){return eq(VString(x_1486.name),VString("svg"));};}auto var_modified_x_914(const auto&x_1488){return [&](const auto&x_1489){return MakeUnit();};}auto eval_expr_x_911(const auto&x_1498){return [&](const auto&x_1499){return neq([&](){ReadMetric(x_1499);return OptionMatch(HashtblFind(OptionMatch(Some(x_1498),[&](const auto&x_1501){return Panic();},[&](const auto&x_1500){return x_1500;}).var,"height_attr_expr"),[&](const auto&x_1503){return Panic();},[&](const auto&x_1502){return x_1502;});}(),VString("auto"));};}auto var_modified_x_909(const auto&x_1504){return [&](const auto&x_1505){return MakeUnit();};}auto eval_expr_x_906(const auto&x_1513){return [&](const auto&x_1514){if (BoolOfValue(not(VBool(IsSome(HashtblFind(x_1513.attr,"height")))))){return VString("auto");}else{if (BoolOfValue((BoolOfValue(string_is_float([&](){ReadMetric(x_1514);return OptionMatch(HashtblFind(x_1513.attr,"height"),[&](const auto&x_1516){return Panic();},[&](const auto&x_1515){return x_1515;});}())))?(VBool(true)):(has_suffix([&](){ReadMetric(x_1514);return OptionMatch(HashtblFind(x_1513.attr,"height"),[&](const auto&x_1518){return Panic();},[&](const auto&x_1517){return x_1517;});}(),VString("%"))))){ReadMetric(x_1514);return OptionMatch(HashtblFind(x_1513.attr,"height"),[&](const auto&x_1524){return Panic();},[&](const auto&x_1523){return x_1523;});}else{if (BoolOfValue(eq([&](){ReadMetric(x_1514);return OptionMatch(HashtblFind(x_1513.attr,"height"),[&](const auto&x_1520){return Panic();},[&](const auto&x_1519){return x_1519;});}(),VString("Auto")))){return VString("auto");}else{return Panic();};}auto var_modified_x_904(const auto&x_1525){return [&](const auto&x_1526){return MakeUnit();};}auto eval_expr_x_901(const auto&x_1536){return [&](const auto&x_1537){return neq([&](){ReadMetric(x_1537);return OptionMatch(HashtblFind(OptionMatch(Some(x_1536),[&](const auto&x_1539){return Panic();},[&](const auto&x_1538){return x_1538;}).var,"width_attr_expr"),[&](const auto&x_1541){return Panic();},[&](const auto&x_1540){return x_1540;});}(),VString("auto"));};}auto var_modified_x_899(const auto&x_1542){return [&](const auto&x_1543){return MakeUnit();};}auto eval_expr_x_896(const auto&x_1551){return [&](const auto&x_1552){if (BoolOfValue(not(VBool(IsSome(HashtblFind(x_1551.attr,"width")))))){return VString("auto");}else{if (BoolOfValue((BoolOfValue(string_is_float([&](){ReadMetric(x_1552);return OptionMatch(HashtblFind(x_1551.attr,"width"),[&](const auto&x_1554){return Panic();},[&](const auto&x_1553){return x_1553;});}())))?(VBool(true)):(has_suffix([&](){ReadMetric(x_1552);return OptionMatch(HashtblFind(x_1551.attr,"width"),[&](const auto&x_1556){return Panic();},[&](const auto&x_1555){return x_1555;});}(),VString("%"))))){ReadMetric(x_1552);return OptionMatch(HashtblFind(x_1551.attr,"width"),[&](const auto&x_1562){return Panic();},[&](const auto&x_1561){return x_1561;});}else{if (BoolOfValue(eq([&](){ReadMetric(x_1552);return OptionMatch(HashtblFind(x_1551.attr,"width"),[&](const auto&x_1558){return Panic();},[&](const auto&x_1557){return x_1557;});}(),VString("Auto")))){return VString("auto");}else{return Panic();};}auto var_modified_x_894(const auto&x_1563){return [&](const auto&x_1564){return MakeUnit();};}auto eval_expr_x_891(const auto&x_1567){return [&](const auto&x_1568){if (BoolOfValue((BoolOfValue(VBool(IsSome(x_1567.parent))))?((BoolOfValue(eq([&](){ReadMetric(x_1568);return OptionMatch(HashtblFind(OptionMatch(x_1567.parent,[&](const auto&x_1570){return Panic();},[&](const auto&x_1569){return x_1569;}).var,"display"),[&](const auto&x_1572){return Panic();},[&](const auto&x_1571){return x_1571;});}(),VString("flex"))))?(VBool(true)):(eq([&](){ReadMetric(x_1568);return OptionMatch(HashtblFind(OptionMatch(x_1567.parent,[&](const auto&x_1574){return Panic();},[&](const auto&x_1573){return x_1573;}).var,"display"),[&](const auto&x_1576){return Panic();},[&](const auto&x_1575){return x_1575;});}(),VString("inline-flex")))):(VBool(false)))){if (BoolOfValue((BoolOfValue(eq([&](){ReadMetric(x_1568);return OptionMatch(HashtblFind(OptionMatch(x_1567.parent,[&](const auto&x_1578){return Panic();},[&](const auto&x_1577){return x_1577;}).var,"flex_direction"),[&](const auto&x_1580){return Panic();},[&](const auto&x_1579){return x_1579;});}(),VString("column"))))?(VBool(true)):(eq([&](){ReadMetric(x_1568);return OptionMatch(HashtblFind(OptionMatch(x_1567.parent,[&](const auto&x_1582){return Panic();},[&](const auto&x_1581){return x_1581;}).var,"flex_direction"),[&](const auto&x_1584){return Panic();},[&](const auto&x_1583){return x_1583;});}(),VString("column-reverse"))))){return VBool(true);}else{if (BoolOfValue(eq([&](){ReadMetric(x_1568);return OptionMatch(HashtblFind(OptionMatch(x_1567.parent,[&](const auto&x_1586){return Panic();},[&](const auto&x_1585){return x_1585;}).var,"flex_direction"),[&](const auto&x_1588){return Panic();},[&](const auto&x_1587){return x_1587;});}(),VString("row")))){return VBool(false);}else{return Panic();}else{return VBool(false);};}auto var_modified_x_889(const auto&x_1593){return [&](const auto&x_1594){return MakeUnit();};}auto eval_expr_x_886(const auto&x_1598){return [&](const auto&x_1599){if (BoolOfValue((BoolOfValue(VBool(IsSome(x_1598.parent))))?((BoolOfValue(eq([&](){ReadMetric(x_1599);return OptionMatch(HashtblFind(OptionMatch(x_1598.parent,[&](const auto&x_1601){return Panic();},[&](const auto&x_1600){return x_1600;}).var,"display"),[&](const auto&x_1603){return Panic();},[&](const auto&x_1602){return x_1602;});}(),VString("flex"))))?(VBool(true)):(eq([&](){ReadMetric(x_1599);return OptionMatch(HashtblFind(OptionMatch(x_1598.parent,[&](const auto&x_1605){return Panic();},[&](const auto&x_1604){return x_1604;}).var,"display"),[&](const auto&x_1607){return Panic();},[&](const auto&x_1606){return x_1606;});}(),VString("inline-flex")))):(VBool(false)))){if (BoolOfValue(eq([&](){ReadMetric(x_1599);return OptionMatch(HashtblFind(OptionMatch(x_1598.parent,[&](const auto&x_1609){return Panic();},[&](const auto&x_1608){return x_1608;}).var,"flex_direction"),[&](const auto&x_1611){return Panic();},[&](const auto&x_1610){return x_1610;});}(),VString("row")))){return VBool(true);}else{if (BoolOfValue((BoolOfValue(eq([&](){ReadMetric(x_1599);return OptionMatch(HashtblFind(OptionMatch(x_1598.parent,[&](const auto&x_1613){return Panic();},[&](const auto&x_1612){return x_1612;}).var,"flex_direction"),[&](const auto&x_1615){return Panic();},[&](const auto&x_1614){return x_1614;});}(),VString("column"))))?(VBool(true)):(eq([&](){ReadMetric(x_1599);return OptionMatch(HashtblFind(OptionMatch(x_1598.parent,[&](const auto&x_1617){return Panic();},[&](const auto&x_1616){return x_1616;}).var,"flex_direction"),[&](const auto&x_1619){return Panic();},[&](const auto&x_1618){return x_1618;});}(),VString("column-reverse"))))){return VBool(false);}else{return Panic();}else{return VBool(false);};}auto var_modified_x_884(const auto&x_1624){return [&](const auto&x_1625){return MakeUnit();};}auto eval_expr_x_881(const auto&x_1632){return [&](const auto&x_1633){if (BoolOfValue(VBool(IsSome(HashtblFind(x_1632.prop,"flex-direction"))))){ReadMetric(x_1633);return OptionMatch(HashtblFind(x_1632.prop,"flex-direction"),[&](const auto&x_1635){return Panic();},[&](const auto&x_1634){return x_1634;});}else{return VString("");};}auto var_modified_x_879(const auto&x_1636){return [&](const auto&x_1637){OptionMatch(x_1636.next,[&](const auto&x_1639){return Nil();},[&](const auto&x_1638){return Cons(x_1638,Nil());});MakeUnit();MakeUnit();return MakeUnit();};}auto eval_expr_x_876(const auto&x_1642){return [&](const auto&x_1643){return plus((BoolOfValue(VBool(IsSome(x_1642.prev))))?([&](){ReadMetric(x_1643);return OptionMatch(HashtblFind(OptionMatch(x_1642.prev,[&](const auto&x_1645){return Panic();},[&](const auto&x_1644){return x_1644;}).var,"flex_shrink_sum"),[&](const auto&x_1647){return Panic();},[&](const auto&x_1646){return x_1646;});}()):(VFloat(0.)),[&](){ReadMetric(x_1643);return OptionMatch(HashtblFind(OptionMatch(Some(x_1642),[&](const auto&x_1649){return Panic();},[&](const auto&x_1648){return x_1648;}).var,"flex_shrink"),[&](const auto&x_1651){return Panic();},[&](const auto&x_1650){return x_1650;});}());};}auto var_modified_x_874(const auto&x_1652){return [&](const auto&x_1653){OptionMatch(x_1652.next,[&](const auto&x_1655){return Nil();},[&](const auto&x_1654){return Cons(x_1654,Nil());});MakeUnit();MakeUnit();return MakeUnit();};}auto eval_expr_x_871(const auto&x_1658){return [&](const auto&x_1659){return plus((BoolOfValue(VBool(IsSome(x_1658.prev))))?([&](){ReadMetric(x_1659);return OptionMatch(HashtblFind(OptionMatch(x_1658.prev,[&](const auto&x_1661){return Panic();},[&](const auto&x_1660){return x_1660;}).var,"flex_grow_sum"),[&](const auto&x_1663){return Panic();},[&](const auto&x_1662){return x_1662;});}()):(VFloat(0.)),[&](){ReadMetric(x_1659);return OptionMatch(HashtblFind(OptionMatch(Some(x_1658),[&](const auto&x_1665){return Panic();},[&](const auto&x_1664){return x_1664;}).var,"flex_grow"),[&](const auto&x_1667){return Panic();},[&](const auto&x_1666){return x_1666;});}());};}auto var_modified_x_869(const auto&x_1668){return [&](const auto&x_1669){return MakeUnit();};}auto eval_expr_x_866(const auto&x_1672){return [&](const auto&x_1673){if (BoolOfValue(VBool(IsSome(HashtblFind(x_1672.prop,"flex-shrink"))))){return string_to_float([&](){ReadMetric(x_1673);return OptionMatch(HashtblFind(x_1672.prop,"flex-shrink"),[&](const auto&x_1675){return Panic();},[&](const auto&x_1674){return x_1674;});}());}else{return VFloat(0.);};}auto var_modified_x_864(const auto&x_1676){return [&](const auto&x_1677){return MakeUnit();};}auto eval_expr_x_861(const auto&x_1680){return [&](const auto&x_1681){if (BoolOfValue(VBool(IsSome(HashtblFind(x_1680.prop,"flex-grow"))))){return string_to_float([&](){ReadMetric(x_1681);return OptionMatch(HashtblFind(x_1680.prop,"flex-grow"),[&](const auto&x_1683){return Panic();},[&](const auto&x_1682){return x_1682;});}());}else{return VFloat(0.);};}auto var_modified_x_859(const auto&x_1684){return [&](const auto&x_1685){return MakeUnit();};}auto eval_expr_x_856(const auto&x_1691){return [&](const auto&x_1692){if (BoolOfValue(VBool(IsSome(HashtblFind(x_1691.prop,"position"))))){ReadMetric(x_1692);return OptionMatch(HashtblFind(x_1691.prop,"position"),[&](const auto&x_1694){return Panic();},[&](const auto&x_1693){return x_1693;});}else{return VString("static");};}auto var_modified_x_854(const auto&x_1695){return [&](const auto&x_1696){return MakeUnit();};}auto eval_expr_x_851(const auto&x_1722){return [&](const auto&x_1723){if (BoolOfValue(VBool(IsSome(HashtblFind(x_1722.prop,"display"))))){ReadMetric(x_1723);return OptionMatch(HashtblFind(x_1722.prop,"display"),[&](const auto&x_1725){return Panic();},[&](const auto&x_1724){return x_1724;});}else{return VString("block");};}auto var_modified_x_847(const auto&x_1726){return [&](const auto&x_1727){if (IsNone(x_1726.next)){OptionMatch(x_1726.parent,[&](const auto&x_1729){return Nil();},[&](const auto&x_1728){return Cons(x_1728,Nil());});}else{Nil();OptionMatch(x_1726.next,[&](const auto&x_1732){return Nil();},[&](const auto&x_1731){return Cons(x_1731,Nil());});OptionMatch(x_1726.next,[&](const auto&x_1735){return Nil();},[&](const auto&x_1734){return Cons(x_1734,Nil());});MakeUnit();MakeUnit();return MakeUnit();};}auto eval_expr_x_844(const auto&x_1737){return [&](const auto&x_1738){if (BoolOfValue(VBool(IsSome(x_1737.prev)))){if (BoolOfValue([&](){ReadMetric(x_1738);return OptionMatch(HashtblFind(OptionMatch(Some(x_1737),[&](const auto&x_1748){return Panic();},[&](const auto&x_1747){return x_1747;}).var,"line_break"),[&](const auto&x_1750){return Panic();},[&](const auto&x_1749){return x_1749;});}())){return plus([&](){ReadMetric(x_1738);return OptionMatch(HashtblFind(OptionMatch(x_1737.prev,[&](const auto&x_1756){return Panic();},[&](const auto&x_1755){return x_1755;}).var,"finished_intrinsic_height_sum"),[&](const auto&x_1758){return Panic();},[&](const auto&x_1757){return x_1757;});}(),plus([&](){ReadMetric(x_1738);return OptionMatch(HashtblFind(OptionMatch(x_1737.prev,[&](const auto&x_1760){return Panic();},[&](const auto&x_1759){return x_1759;}).var,"intrinsic_current_line_height"),[&](const auto&x_1762){return Panic();},[&](const auto&x_1761){return x_1761;});}(),[&](){ReadMetric(x_1738);return OptionMatch(HashtblFind(OptionMatch(Some(x_1737),[&](const auto&x_1764){return Panic();},[&](const auto&x_1763){return x_1763;}).var,"intrinsic_height_external"),[&](const auto&x_1766){return Panic();},[&](const auto&x_1765){return x_1765;});}()));}else{ReadMetric(x_1738);return OptionMatch(HashtblFind(OptionMatch(x_1737.prev,[&](const auto&x_1752){return Panic();},[&](const auto&x_1751){return x_1751;}).var,"finished_intrinsic_height_sum"),[&](const auto&x_1754){return Panic();},[&](const auto&x_1753){return x_1753;});}else{if (BoolOfValue([&](){ReadMetric(x_1738);return OptionMatch(HashtblFind(OptionMatch(Some(x_1737),[&](const auto&x_1740){return Panic();},[&](const auto&x_1739){return x_1739;}).var,"line_break"),[&](const auto&x_1742){return Panic();},[&](const auto&x_1741){return x_1741;});}())){ReadMetric(x_1738);return OptionMatch(HashtblFind(OptionMatch(Some(x_1737),[&](const auto&x_1744){return Panic();},[&](const auto&x_1743){return x_1743;}).var,"intrinsic_height_external"),[&](const auto&x_1746){return Panic();},[&](const auto&x_1745){return x_1745;});}else{return VFloat(0.);};}auto var_modified_x_842(const auto&x_1767){return [&](const auto&x_1768){if (IsNone(x_1767.next)){OptionMatch(x_1767.parent,[&](const auto&x_1770){return Nil();},[&](const auto&x_1769){return Cons(x_1769,Nil());});}else{Nil();OptionMatch(x_1767.next,[&](const auto&x_1773){return Nil();},[&](const auto&x_1772){return Cons(x_1772,Nil());});OptionMatch(x_1767.next,[&](const auto&x_1776){return Nil();},[&](const auto&x_1775){return Cons(x_1775,Nil());});MakeUnit();MakeUnit();return MakeUnit();};}auto eval_expr_x_839(const auto&x_1778){return [&](const auto&x_1779){if (BoolOfValue([&](){ReadMetric(x_1779);return OptionMatch(HashtblFind(OptionMatch(Some(x_1778),[&](const auto&x_1781){return Panic();},[&](const auto&x_1780){return x_1780;}).var,"line_break"),[&](const auto&x_1783){return Panic();},[&](const auto&x_1782){return x_1782;});}())){return VFloat(0.);}else{return max([&](){ReadMetric(x_1779);return OptionMatch(HashtblFind(OptionMatch(Some(x_1778),[&](const auto&x_1785){return Panic();},[&](const auto&x_1784){return x_1784;}).var,"intrinsic_height_external"),[&](const auto&x_1787){return Panic();},[&](const auto&x_1786){return x_1786;});}(),(BoolOfValue(VBool(IsSome(x_1778.prev))))?([&](){ReadMetric(x_1779);return OptionMatch(HashtblFind(OptionMatch(x_1778.prev,[&](const auto&x_1789){return Panic();},[&](const auto&x_1788){return x_1788;}).var,"intrinsic_current_line_height"),[&](const auto&x_1791){return Panic();},[&](const auto&x_1790){return x_1790;});}()):(VFloat(0.)));};}auto var_modified_x_837(const auto&x_1792){return [&](const auto&x_1793){OptionMatch(x_1792.next,[&](const auto&x_1795){return Nil();},[&](const auto&x_1794){return Cons(x_1794,Nil());});MakeUnit();MakeUnit();if (IsNone(x_1792.next)){OptionMatch(x_1792.parent,[&](const auto&x_1798){return Nil();},[&](const auto&x_1797){return Cons(x_1797,Nil());});}else{Nil();MakeUnit();MakeUnit();return MakeUnit();};}auto eval_expr_x_834(const auto&x_1800){return [&](const auto&x_1801){return plus((BoolOfValue(VBool(IsSome(x_1800.prev))))?([&](){ReadMetric(x_1801);return OptionMatch(HashtblFind(OptionMatch(x_1800.prev,[&](const auto&x_1803){return Panic();},[&](const auto&x_1802){return x_1802;}).var,"intrinsic_height_sum"),[&](const auto&x_1805){return Panic();},[&](const auto&x_1804){return x_1804;});}()):(VFloat(0.)),[&](){ReadMetric(x_1801);return OptionMatch(HashtblFind(OptionMatch(Some(x_1800),[&](const auto&x_1807){return Panic();},[&](const auto&x_1806){return x_1806;}).var,"intrinsic_height_external"),[&](const auto&x_1809){return Panic();},[&](const auto&x_1808){return x_1808;});}());};}auto var_modified_x_832(const auto&x_1810){return [&](const auto&x_1811){return MakeUnit();};}auto eval_expr_x_829(const auto&x_1816){return [&](const auto&x_1817){if (BoolOfValue(eq([&](){ReadMetric(x_1817);return OptionMatch(HashtblFind(OptionMatch(Some(x_1816),[&](const auto&x_1819){return Panic();},[&](const auto&x_1818){return x_1818;}).var,"position"),[&](const auto&x_1821){return Panic();},[&](const auto&x_1820){return x_1820;});}(),VString("absolute")))){return VFloat(0.);}else{ReadMetric(x_1817);return OptionMatch(HashtblFind(OptionMatch(Some(x_1816),[&](const auto&x_1823){return Panic();},[&](const auto&x_1822){return x_1822;}).var,"intrinsic_height_internal"),[&](const auto&x_1825){return Panic();},[&](const auto&x_1824){return x_1824;});};}auto var_modified_x_827(const auto&x_1826){return [&](const auto&x_1827){return MakeUnit();};}auto eval_expr_x_824(const auto&x_1832){return [&](const auto&x_1833){if (BoolOfValue(eq([&](){ReadMetric(x_1833);return OptionMatch(HashtblFind(OptionMatch(Some(x_1832),[&](const auto&x_1835){return Panic();},[&](const auto&x_1834){return x_1834;}).var,"display"),[&](const auto&x_1837){return Panic();},[&](const auto&x_1836){return x_1836;});}(),VString("none")))){return VFloat(0.);}else{if (BoolOfValue([&](){ReadMetric(x_1833);return OptionMatch(HashtblFind(OptionMatch(Some(x_1832),[&](const auto&x_1839){return Panic();},[&](const auto&x_1838){return x_1838;}).var,"inside_svg"),[&](const auto&x_1841){return Panic();},[&](const auto&x_1840){return x_1840;});}())){return VFloat(0.);}else{if (BoolOfValue([&](){ReadMetric(x_1833);return OptionMatch(HashtblFind(OptionMatch(Some(x_1832),[&](const auto&x_1843){return Panic();},[&](const auto&x_1842){return x_1842;}).var,"disabled"),[&](const auto&x_1845){return Panic();},[&](const auto&x_1844){return x_1844;});}())){return VFloat(0.);}else{if (BoolOfValue((BoolOfValue(neq([&](){ReadMetric(x_1833);return OptionMatch(HashtblFind(OptionMatch(Some(x_1832),[&](const auto&x_1847){return Panic();},[&](const auto&x_1846){return x_1846;}).var,"height_expr"),[&](const auto&x_1849){return Panic();},[&](const auto&x_1848){return x_1848;});}(),VString("auto"))))?((BoolOfValue(not(has_suffix([&](){ReadMetric(x_1833);return OptionMatch(HashtblFind(OptionMatch(Some(x_1832),[&](const auto&x_1851){return Panic();},[&](const auto&x_1850){return x_1850;}).var,"height_expr"),[&](const auto&x_1853){return Panic();},[&](const auto&x_1852){return x_1852;});}(),VString("%")))))?(neq([&](){ReadMetric(x_1833);return OptionMatch(HashtblFind(OptionMatch(Some(x_1832),[&](const auto&x_1855){return Panic();},[&](const auto&x_1854){return x_1854;}).var,"height_expr"),[&](const auto&x_1857){return Panic();},[&](const auto&x_1856){return x_1856;});}(),VString("fit-content"))):(VBool(false))):(VBool(false)))){if (BoolOfValue(has_suffix([&](){ReadMetric(x_1833);return OptionMatch(HashtblFind(OptionMatch(Some(x_1832),[&](const auto&x_1951){return Panic();},[&](const auto&x_1950){return x_1950;}).var,"height_expr"),[&](const auto&x_1953){return Panic();},[&](const auto&x_1952){return x_1952;});}(),VString("px")))){return string_to_float(strip_suffix([&](){ReadMetric(x_1833);return OptionMatch(HashtblFind(OptionMatch(Some(x_1832),[&](const auto&x_1975){return Panic();},[&](const auto&x_1974){return x_1974;}).var,"height_expr"),[&](const auto&x_1977){return Panic();},[&](const auto&x_1976){return x_1976;});}(),VString("px")));}else{if (BoolOfValue(has_suffix([&](){ReadMetric(x_1833);return OptionMatch(HashtblFind(OptionMatch(Some(x_1832),[&](const auto&x_1955){return Panic();},[&](const auto&x_1954){return x_1954;}).var,"height_expr"),[&](const auto&x_1957){return Panic();},[&](const auto&x_1956){return x_1956;});}(),VString("ch")))){return string_to_float(strip_suffix([&](){ReadMetric(x_1833);return OptionMatch(HashtblFind(OptionMatch(Some(x_1832),[&](const auto&x_1971){return Panic();},[&](const auto&x_1970){return x_1970;}).var,"height_expr"),[&](const auto&x_1973){return Panic();},[&](const auto&x_1972){return x_1972;});}(),VString("ch")));}else{if (BoolOfValue(has_suffix([&](){ReadMetric(x_1833);return OptionMatch(HashtblFind(OptionMatch(Some(x_1832),[&](const auto&x_1959){return Panic();},[&](const auto&x_1958){return x_1958;}).var,"height_expr"),[&](const auto&x_1961){return Panic();},[&](const auto&x_1960){return x_1960;});}(),VString("lh")))){return string_to_float(strip_suffix([&](){ReadMetric(x_1833);return OptionMatch(HashtblFind(OptionMatch(Some(x_1832),[&](const auto&x_1967){return Panic();},[&](const auto&x_1966){return x_1966;}).var,"height_expr"),[&](const auto&x_1969){return Panic();},[&](const auto&x_1968){return x_1968;});}(),VString("lh")));}else{return Panic();}else{return plus([&](){ReadMetric(x_1833);return OptionMatch(HashtblFind(OptionMatch(Some(x_1832),[&](const auto&x_1859){return Panic();},[&](const auto&x_1858){return x_1858;}).var,"children_intrinsic_height"),[&](const auto&x_1861){return Panic();},[&](const auto&x_1860){return x_1860;});}(),(BoolOfValue(eq(VString(x_1832.name),VString("#text"))))?((BoolOfValue(VBool(IsSome(ListHead(x_1832.children)))))?(Panic()):(VFloat(10.))):((BoolOfValue([&](){ReadMetric(x_1833);return OptionMatch(HashtblFind(OptionMatch(Some(x_1832),[&](const auto&x_1863){return Panic();},[&](const auto&x_1862){return x_1862;}).var,"is_default_case"),[&](const auto&x_1865){return Panic();},[&](const auto&x_1864){return x_1864;});}()))?(VFloat(0.)):((BoolOfValue(eq(VString(x_1832.name),VString("BR"))))?((BoolOfValue(VBool(IsSome(ListHead(x_1832.children)))))?(Panic()):(VFloat(0.))):((BoolOfValue(eq(VString(x_1832.name),VString("INPUT"))))?(VFloat(10.)):((BoolOfValue(eq(VString(x_1832.name),VString("svg"))))?((BoolOfValue((BoolOfValue([&](){ReadMetric(x_1833);return OptionMatch(HashtblFind(OptionMatch(Some(x_1832),[&](const auto&x_1923){return Panic();},[&](const auto&x_1922){return x_1922;}).var,"has_height_attr"),[&](const auto&x_1925){return Panic();},[&](const auto&x_1924){return x_1924;});}()))?(string_is_float([&](){ReadMetric(x_1833);return OptionMatch(HashtblFind(OptionMatch(Some(x_1832),[&](const auto&x_1927){return Panic();},[&](const auto&x_1926){return x_1926;}).var,"height_attr_expr"),[&](const auto&x_1929){return Panic();},[&](const auto&x_1928){return x_1928;});}())):(VBool(false))))?(string_to_float([&](){ReadMetric(x_1833);return OptionMatch(HashtblFind(OptionMatch(Some(x_1832),[&](const auto&x_1947){return Panic();},[&](const auto&x_1946){return x_1946;}).var,"height_attr_expr"),[&](const auto&x_1949){return Panic();},[&](const auto&x_1948){return x_1948;});}())):((BoolOfValue(VBool(IsSome(HashtblFind(x_1832.attr,"viewBox")))))?(string_to_float(nth_by_sep([&](){ReadMetric(x_1833);return OptionMatch(HashtblFind(x_1832.attr,"viewBox"),[&](const auto&x_1945){return Panic();},[&](const auto&x_1944){return x_1944;});}(),VString(" "),VInt(3)))):((BoolOfValue((BoolOfValue([&](){ReadMetric(x_1833);return OptionMatch(HashtblFind(OptionMatch(Some(x_1832),[&](const auto&x_1931){return Panic();},[&](const auto&x_1930){return x_1930;}).var,"has_height_attr"),[&](const auto&x_1933){return Panic();},[&](const auto&x_1932){return x_1932;});}()))?((BoolOfValue(has_suffix([&](){ReadMetric(x_1833);return OptionMatch(HashtblFind(OptionMatch(Some(x_1832),[&](const auto&x_1935){return Panic();},[&](const auto&x_1934){return x_1934;}).var,"height_attr_expr"),[&](const auto&x_1937){return Panic();},[&](const auto&x_1936){return x_1936;});}(),VString("%"))))?(VBool(IsSome(HashtblFind(x_1832.attr,"viewBox")))):(VBool(false))):(VBool(false))))?(mult(string_to_float(nth_by_sep([&](){ReadMetric(x_1833);return OptionMatch(HashtblFind(x_1832.attr,"viewBox"),[&](const auto&x_1939){return Panic();},[&](const auto&x_1938){return x_1938;});}(),VString(" "),VInt(3))),divide(string_to_float(strip_suffix([&](){ReadMetric(x_1833);return OptionMatch(HashtblFind(OptionMatch(Some(x_1832),[&](const auto&x_1941){return Panic();},[&](const auto&x_1940){return x_1940;}).var,"height_attr_expr"),[&](const auto&x_1943){return Panic();},[&](const auto&x_1942){return x_1942;});}(),VString("%"))),VFloat(100.)))):(Panic())))):((BoolOfValue(eq(VString(x_1832.name),VString("IMG"))))?((BoolOfValue([&](){ReadMetric(x_1833);return OptionMatch(HashtblFind(OptionMatch(Some(x_1832),[&](const auto&x_1883){return Panic();},[&](const auto&x_1882){return x_1882;}).var,"has_height_attr"),[&](const auto&x_1885){return Panic();},[&](const auto&x_1884){return x_1884;});}()))?(string_to_float([&](){ReadMetric(x_1833);return OptionMatch(HashtblFind(OptionMatch(Some(x_1832),[&](const auto&x_1919){return Panic();},[&](const auto&x_1918){return x_1918;}).var,"height_attr_expr"),[&](const auto&x_1921){return Panic();},[&](const auto&x_1920){return x_1920;});}())):((BoolOfValue((BoolOfValue(VBool(IsSome(HashtblFind(x_1832.attr,"image_height")))))?(not([&](){ReadMetric(x_1833);return OptionMatch(HashtblFind(OptionMatch(Some(x_1832),[&](const auto&x_1887){return Panic();},[&](const auto&x_1886){return x_1886;}).var,"has_width_attr"),[&](const auto&x_1889){return Panic();},[&](const auto&x_1888){return x_1888;});}())):(VBool(false))))?(int_to_float([&](){ReadMetric(x_1833);return OptionMatch(HashtblFind(x_1832.attr,"image_height"),[&](const auto&x_1917){return Panic();},[&](const auto&x_1916){return x_1916;});}())):((BoolOfValue((BoolOfValue([&](){ReadMetric(x_1833);return OptionMatch(HashtblFind(OptionMatch(Some(x_1832),[&](const auto&x_1891){return Panic();},[&](const auto&x_1890){return x_1890;}).var,"has_width_attr"),[&](const auto&x_1893){return Panic();},[&](const auto&x_1892){return x_1892;});}()))?((BoolOfValue(not([&](){ReadMetric(x_1833);return OptionMatch(HashtblFind(OptionMatch(Some(x_1832),[&](const auto&x_1895){return Panic();},[&](const auto&x_1894){return x_1894;}).var,"has_height_attr"),[&](const auto&x_1897){return Panic();},[&](const auto&x_1896){return x_1896;});}())))?((BoolOfValue(VBool(IsSome(HashtblFind(x_1832.attr,"image_width")))))?(VBool(IsSome(HashtblFind(x_1832.attr,"image_height")))):(VBool(false))):(VBool(false))):(VBool(false))))?((BoolOfValue(neq([&](){ReadMetric(x_1833);return OptionMatch(HashtblFind(x_1832.attr,"image_width"),[&](const auto&x_1907){return Panic();},[&](const auto&x_1906){return x_1906;});}(),VInt(0))))?(mult(string_to_float([&](){ReadMetric(x_1833);return OptionMatch(HashtblFind(OptionMatch(Some(x_1832),[&](const auto&x_1909){return Panic();},[&](const auto&x_1908){return x_1908;}).var,"width_attr_expr"),[&](const auto&x_1911){return Panic();},[&](const auto&x_1910){return x_1910;});}()),divide(int_to_float([&](){ReadMetric(x_1833);return OptionMatch(HashtblFind(x_1832.attr,"image_height"),[&](const auto&x_1913){return Panic();},[&](const auto&x_1912){return x_1912;});}()),int_to_float([&](){ReadMetric(x_1833);return OptionMatch(HashtblFind(x_1832.attr,"image_width"),[&](const auto&x_1915){return Panic();},[&](const auto&x_1914){return x_1914;});}())))):(VFloat(0.))):(Panic())))):((BoolOfValue(eq(VString(x_1832.name),VString("IFRAME"))))?((BoolOfValue([&](){ReadMetric(x_1833);return OptionMatch(HashtblFind(OptionMatch(Some(x_1832),[&](const auto&x_1875){return Panic();},[&](const auto&x_1874){return x_1874;}).var,"has_height_attr"),[&](const auto&x_1877){return Panic();},[&](const auto&x_1876){return x_1876;});}()))?(Panic()):(VFloat(150.))):((BoolOfValue(eq(VString(x_1832.name),VString("TEXTAREA"))))?(VFloat(100.)):((BoolOfValue(eq(VString(x_1832.name),VString("VIDEO"))))?((BoolOfValue([&](){ReadMetric(x_1833);return OptionMatch(HashtblFind(OptionMatch(Some(x_1832),[&](const auto&x_1867){return Panic();},[&](const auto&x_1866){return x_1866;}).var,"has_height_attr"),[&](const auto&x_1869){return Panic();},[&](const auto&x_1868){return x_1868;});}()))?(Panic()):(VFloat(150.))):(Panic()))))))))));};}auto var_modified_x_822(const auto&x_1978){return [&](const auto&x_1979){return MakeUnit();};}auto eval_expr_x_819(const auto&x_1981){return [&](const auto&x_1982){if (BoolOfValue((BoolOfValue(eq([&](){ReadMetric(x_1982);return OptionMatch(HashtblFind(OptionMatch(Some(x_1981),[&](const auto&x_1984){return Panic();},[&](const auto&x_1983){return x_1983;}).var,"display"),[&](const auto&x_1986){return Panic();},[&](const auto&x_1985){return x_1985;});}(),VString("none"))))?(VBool(true)):((BoolOfValue([&](){ReadMetric(x_1982);return OptionMatch(HashtblFind(OptionMatch(Some(x_1981),[&](const auto&x_1988){return Panic();},[&](const auto&x_1987){return x_1987;}).var,"inside_svg"),[&](const auto&x_1990){return Panic();},[&](const auto&x_1989){return x_1989;});}()))?(VBool(true)):([&](){ReadMetric(x_1982);return OptionMatch(HashtblFind(OptionMatch(Some(x_1981),[&](const auto&x_1992){return Panic();},[&](const auto&x_1991){return x_1991;}).var,"disabled"),[&](const auto&x_1994){return Panic();},[&](const auto&x_1993){return x_1993;});}())))){return VBool(true);}else{if (BoolOfValue((BoolOfValue(VBool(IsSome(x_1981.parent))))?([&](){ReadMetric(x_1982);return OptionMatch(HashtblFind(OptionMatch(x_1981.parent,[&](const auto&x_1996){return Panic();},[&](const auto&x_1995){return x_1995;}).var,"is_flex_column"),[&](const auto&x_1998){return Panic();},[&](const auto&x_1997){return x_1997;});}()):(VBool(false)))){return VBool(false);}else{if (BoolOfValue((BoolOfValue(eq([&](){ReadMetric(x_1982);return OptionMatch(HashtblFind(OptionMatch(Some(x_1981),[&](const auto&x_2000){return Panic();},[&](const auto&x_1999){return x_1999;}).var,"height_expr"),[&](const auto&x_2002){return Panic();},[&](const auto&x_2001){return x_2001;});}(),VString("auto"))))?(VBool(true)):((BoolOfValue(has_suffix([&](){ReadMetric(x_1982);return OptionMatch(HashtblFind(OptionMatch(Some(x_1981),[&](const auto&x_2004){return Panic();},[&](const auto&x_2003){return x_2003;}).var,"height_expr"),[&](const auto&x_2006){return Panic();},[&](const auto&x_2005){return x_2005;});}(),VString("px"))))?(VBool(true)):((BoolOfValue(has_suffix([&](){ReadMetric(x_1982);return OptionMatch(HashtblFind(OptionMatch(Some(x_1981),[&](const auto&x_2008){return Panic();},[&](const auto&x_2007){return x_2007;}).var,"height_expr"),[&](const auto&x_2010){return Panic();},[&](const auto&x_2009){return x_2009;});}(),VString("ch"))))?(VBool(true)):((BoolOfValue(has_suffix([&](){ReadMetric(x_1982);return OptionMatch(HashtblFind(OptionMatch(Some(x_1981),[&](const auto&x_2012){return Panic();},[&](const auto&x_2011){return x_2011;}).var,"height_expr"),[&](const auto&x_2014){return Panic();},[&](const auto&x_2013){return x_2013;});}(),VString("lh"))))?(VBool(true)):(eq([&](){ReadMetric(x_1982);return OptionMatch(HashtblFind(OptionMatch(Some(x_1981),[&](const auto&x_2016){return Panic();},[&](const auto&x_2015){return x_2015;}).var,"height_expr"),[&](const auto&x_2018){return Panic();},[&](const auto&x_2017){return x_2017;});}(),VString("max-content")))))))){return VBool(true);}else{if (BoolOfValue((BoolOfValue(has_suffix([&](){ReadMetric(x_1982);return OptionMatch(HashtblFind(OptionMatch(Some(x_1981),[&](const auto&x_2020){return Panic();},[&](const auto&x_2019){return x_2019;}).var,"height_expr"),[&](const auto&x_2022){return Panic();},[&](const auto&x_2021){return x_2021;});}(),VString("%"))))?(VBool(true)):(eq([&](){ReadMetric(x_1982);return OptionMatch(HashtblFind(OptionMatch(Some(x_1981),[&](const auto&x_2024){return Panic();},[&](const auto&x_2023){return x_2023;}).var,"height_expr"),[&](const auto&x_2026){return Panic();},[&](const auto&x_2025){return x_2025;});}(),VString("fit-content"))))){return VBool(false);}else{return Panic();};}auto var_modified_x_817(const auto&x_2031){return [&](const auto&x_2032){return MakeUnit();};}auto eval_expr_x_814(const auto&x_2052){return [&](const auto&x_2053){if (BoolOfValue(VBool(IsSome(HashtblFind(x_2052.prop,"height"))))){ReadMetric(x_2053);return OptionMatch(HashtblFind(x_2052.prop,"height"),[&](const auto&x_2055){return Panic();},[&](const auto&x_2054){return x_2054;});}else{return VString("auto");};}auto var_modified_x_812(const auto&x_2056){return [&](const auto&x_2057){return MakeUnit();};}auto eval_expr_x_809(const auto&x_2059){return [&](const auto&x_2060){if (BoolOfValue(VBool(IsSome(ListLast(x_2059.children))))){return plus([&](){ReadMetric(x_2060);return OptionMatch(HashtblFind(OptionMatch(ListLast(x_2059.children),[&](const auto&x_2062){return Panic();},[&](const auto&x_2061){return x_2061;}).var,"finished_intrinsic_height_sum"),[&](const auto&x_2064){return Panic();},[&](const auto&x_2063){return x_2063;});}(),[&](){ReadMetric(x_2060);return OptionMatch(HashtblFind(OptionMatch(ListLast(x_2059.children),[&](const auto&x_2066){return Panic();},[&](const auto&x_2065){return x_2065;}).var,"intrinsic_current_line_height"),[&](const auto&x_2068){return Panic();},[&](const auto&x_2067){return x_2067;});}());}else{return VFloat(0.);};}auto var_modified_x_807(const auto&x_2069){return [&](const auto&x_2070){OptionMatch(x_2069.next,[&](const auto&x_2072){return Nil();},[&](const auto&x_2071){return Cons(x_2071,Nil());});MakeUnit();MakeUnit();if (IsNone(x_2069.next)){OptionMatch(x_2069.parent,[&](const auto&x_2075){return Nil();},[&](const auto&x_2074){return Cons(x_2074,Nil());});}else{Nil();MakeUnit();MakeUnit();return MakeUnit();};}auto eval_expr_x_804(const auto&x_2077){return [&](const auto&x_2078){return plus((BoolOfValue(VBool(IsSome(x_2077.prev))))?([&](){ReadMetric(x_2078);return OptionMatch(HashtblFind(OptionMatch(x_2077.prev,[&](const auto&x_2080){return Panic();},[&](const auto&x_2079){return x_2079;}).var,"intrinsic_width_sum"),[&](const auto&x_2082){return Panic();},[&](const auto&x_2081){return x_2081;});}()):(VFloat(0.)),[&](){ReadMetric(x_2078);return OptionMatch(HashtblFind(OptionMatch(Some(x_2077),[&](const auto&x_2084){return Panic();},[&](const auto&x_2083){return x_2083;}).var,"intrinsic_width_external"),[&](const auto&x_2086){return Panic();},[&](const auto&x_2085){return x_2085;});}());};}auto var_modified_x_802(const auto&x_2087){return [&](const auto&x_2088){if (IsNone(x_2087.next)){OptionMatch(x_2087.parent,[&](const auto&x_2090){return Nil();},[&](const auto&x_2089){return Cons(x_2089,Nil());});}else{Nil();OptionMatch(x_2087.next,[&](const auto&x_2093){return Nil();},[&](const auto&x_2092){return Cons(x_2092,Nil());});MakeUnit();MakeUnit();return MakeUnit();};}auto eval_expr_x_799(const auto&x_2095){return [&](const auto&x_2096){return max([&](){ReadMetric(x_2096);return OptionMatch(HashtblFind(OptionMatch(Some(x_2095),[&](const auto&x_2098){return Panic();},[&](const auto&x_2097){return x_2097;}).var,"intrinsic_current_line_width"),[&](const auto&x_2100){return Panic();},[&](const auto&x_2099){return x_2099;});}(),(BoolOfValue(VBool(IsSome(x_2095.prev))))?([&](){ReadMetric(x_2096);return OptionMatch(HashtblFind(OptionMatch(x_2095.prev,[&](const auto&x_2102){return Panic();},[&](const auto&x_2101){return x_2101;}).var,"intrinsic_width_max"),[&](const auto&x_2104){return Panic();},[&](const auto&x_2103){return x_2103;});}()):(VFloat(0.)));};}auto var_modified_x_797(const auto&x_2105){return [&](const auto&x_2106){OptionMatch(x_2105.next,[&](const auto&x_2108){return Nil();},[&](const auto&x_2107){return Cons(x_2107,Nil());});MakeUnit();MakeUnit();return MakeUnit();};}auto eval_expr_x_794(const auto&x_2111){return [&](const auto&x_2112){return plus([&](){ReadMetric(x_2112);return OptionMatch(HashtblFind(OptionMatch(Some(x_2111),[&](const auto&x_2114){return Panic();},[&](const auto&x_2113){return x_2113;}).var,"intrinsic_width_external"),[&](const auto&x_2116){return Panic();},[&](const auto&x_2115){return x_2115;});}(),(BoolOfValue((BoolOfValue(VBool(IsSome(x_2111.prev))))?(not([&](){ReadMetric(x_2112);return OptionMatch(HashtblFind(OptionMatch(x_2111.prev,[&](const auto&x_2118){return Panic();},[&](const auto&x_2117){return x_2117;}).var,"line_break"),[&](const auto&x_2120){return Panic();},[&](const auto&x_2119){return x_2119;});}())):(VBool(false))))?([&](){ReadMetric(x_2112);return OptionMatch(HashtblFind(OptionMatch(x_2111.prev,[&](const auto&x_2122){return Panic();},[&](const auto&x_2121){return x_2121;}).var,"intrinsic_current_line_width"),[&](const auto&x_2124){return Panic();},[&](const auto&x_2123){return x_2123;});}()):(VFloat(0.)));};}auto var_modified_x_792(const auto&x_2125){return [&](const auto&x_2126){return MakeUnit();};}auto eval_expr_x_789(const auto&x_2129){return [&](const auto&x_2130){if (BoolOfValue(eq([&](){ReadMetric(x_2130);return OptionMatch(HashtblFind(OptionMatch(Some(x_2129),[&](const auto&x_2132){return Panic();},[&](const auto&x_2131){return x_2131;}).var,"position"),[&](const auto&x_2134){return Panic();},[&](const auto&x_2133){return x_2133;});}(),VString("absolute")))){return VFloat(0.);}else{ReadMetric(x_2130);return OptionMatch(HashtblFind(OptionMatch(Some(x_2129),[&](const auto&x_2136){return Panic();},[&](const auto&x_2135){return x_2135;}).var,"intrinsic_width_internal"),[&](const auto&x_2138){return Panic();},[&](const auto&x_2137){return x_2137;});};}auto var_modified_x_787(const auto&x_2139){return [&](const auto&x_2140){return MakeUnit();};}auto eval_expr_x_784(const auto&x_2145){return [&](const auto&x_2146){if (BoolOfValue(eq([&](){ReadMetric(x_2146);return OptionMatch(HashtblFind(OptionMatch(Some(x_2145),[&](const auto&x_2148){return Panic();},[&](const auto&x_2147){return x_2147;}).var,"display"),[&](const auto&x_2150){return Panic();},[&](const auto&x_2149){return x_2149;});}(),VString("none")))){return VFloat(0.);}else{if (BoolOfValue([&](){ReadMetric(x_2146);return OptionMatch(HashtblFind(OptionMatch(Some(x_2145),[&](const auto&x_2152){return Panic();},[&](const auto&x_2151){return x_2151;}).var,"inside_svg"),[&](const auto&x_2154){return Panic();},[&](const auto&x_2153){return x_2153;});}())){return VFloat(0.);}else{if (BoolOfValue([&](){ReadMetric(x_2146);return OptionMatch(HashtblFind(OptionMatch(Some(x_2145),[&](const auto&x_2156){return Panic();},[&](const auto&x_2155){return x_2155;}).var,"disabled"),[&](const auto&x_2158){return Panic();},[&](const auto&x_2157){return x_2157;});}())){return VFloat(0.);}else{if (BoolOfValue((BoolOfValue(neq([&](){ReadMetric(x_2146);return OptionMatch(HashtblFind(OptionMatch(Some(x_2145),[&](const auto&x_2160){return Panic();},[&](const auto&x_2159){return x_2159;}).var,"width_expr"),[&](const auto&x_2162){return Panic();},[&](const auto&x_2161){return x_2161;});}(),VString("auto"))))?((BoolOfValue(not(has_suffix([&](){ReadMetric(x_2146);return OptionMatch(HashtblFind(OptionMatch(Some(x_2145),[&](const auto&x_2164){return Panic();},[&](const auto&x_2163){return x_2163;}).var,"width_expr"),[&](const auto&x_2166){return Panic();},[&](const auto&x_2165){return x_2165;});}(),VString("%")))))?((BoolOfValue(neq([&](){ReadMetric(x_2146);return OptionMatch(HashtblFind(OptionMatch(Some(x_2145),[&](const auto&x_2168){return Panic();},[&](const auto&x_2167){return x_2167;}).var,"width_expr"),[&](const auto&x_2170){return Panic();},[&](const auto&x_2169){return x_2169;});}(),VString("fit-content"))))?((BoolOfValue(neq([&](){ReadMetric(x_2146);return OptionMatch(HashtblFind(OptionMatch(Some(x_2145),[&](const auto&x_2172){return Panic();},[&](const auto&x_2171){return x_2171;}).var,"width_expr"),[&](const auto&x_2174){return Panic();},[&](const auto&x_2173){return x_2173;});}(),VString("max-content"))))?(not(has_prefix([&](){ReadMetric(x_2146);return OptionMatch(HashtblFind(OptionMatch(Some(x_2145),[&](const auto&x_2176){return Panic();},[&](const auto&x_2175){return x_2175;}).var,"width_expr"),[&](const auto&x_2178){return Panic();},[&](const auto&x_2177){return x_2177;});}(),VString("calc")))):(VBool(false))):(VBool(false))):(VBool(false))):(VBool(false)))){if (BoolOfValue(has_suffix([&](){ReadMetric(x_2146);return OptionMatch(HashtblFind(OptionMatch(Some(x_2145),[&](const auto&x_2280){return Panic();},[&](const auto&x_2279){return x_2279;}).var,"width_expr"),[&](const auto&x_2282){return Panic();},[&](const auto&x_2281){return x_2281;});}(),VString("px")))){return string_to_float(strip_suffix([&](){ReadMetric(x_2146);return OptionMatch(HashtblFind(OptionMatch(Some(x_2145),[&](const auto&x_2296){return Panic();},[&](const auto&x_2295){return x_2295;}).var,"width_expr"),[&](const auto&x_2298){return Panic();},[&](const auto&x_2297){return x_2297;});}(),VString("px")));}else{if (BoolOfValue(has_suffix([&](){ReadMetric(x_2146);return OptionMatch(HashtblFind(OptionMatch(Some(x_2145),[&](const auto&x_2284){return Panic();},[&](const auto&x_2283){return x_2283;}).var,"width_expr"),[&](const auto&x_2286){return Panic();},[&](const auto&x_2285){return x_2285;});}(),VString("ch")))){return string_to_float(strip_suffix([&](){ReadMetric(x_2146);return OptionMatch(HashtblFind(OptionMatch(Some(x_2145),[&](const auto&x_2292){return Panic();},[&](const auto&x_2291){return x_2291;}).var,"width_expr"),[&](const auto&x_2294){return Panic();},[&](const auto&x_2293){return x_2293;});}(),VString("ch")));}else{return Panic();}else{return plus([&](){ReadMetric(x_2146);return OptionMatch(HashtblFind(OptionMatch(Some(x_2145),[&](const auto&x_2180){return Panic();},[&](const auto&x_2179){return x_2179;}).var,"children_intrinsic_width"),[&](const auto&x_2182){return Panic();},[&](const auto&x_2181){return x_2181;});}(),(BoolOfValue(eq(VString(x_2145.name),VString("#text"))))?((BoolOfValue(VBool(IsSome(ListHead(x_2145.children)))))?(Panic()):(VFloat(100.))):((BoolOfValue([&](){ReadMetric(x_2146);return OptionMatch(HashtblFind(OptionMatch(Some(x_2145),[&](const auto&x_2184){return Panic();},[&](const auto&x_2183){return x_2183;}).var,"is_default_case"),[&](const auto&x_2186){return Panic();},[&](const auto&x_2185){return x_2185;});}()))?(VFloat(0.)):((BoolOfValue(eq(VString(x_2145.name),VString("BR"))))?((BoolOfValue(VBool(IsSome(ListHead(x_2145.children)))))?(Panic()):(VFloat(0.))):((BoolOfValue(eq(VString(x_2145.name),VString("INPUT"))))?(VFloat(100.)):((BoolOfValue(eq(VString(x_2145.name),VString("svg"))))?((BoolOfValue((BoolOfValue([&](){ReadMetric(x_2146);return OptionMatch(HashtblFind(OptionMatch(Some(x_2145),[&](const auto&x_2244){return Panic();},[&](const auto&x_2243){return x_2243;}).var,"has_width_attr"),[&](const auto&x_2246){return Panic();},[&](const auto&x_2245){return x_2245;});}()))?(string_is_float([&](){ReadMetric(x_2146);return OptionMatch(HashtblFind(OptionMatch(Some(x_2145),[&](const auto&x_2248){return Panic();},[&](const auto&x_2247){return x_2247;}).var,"width_attr_expr"),[&](const auto&x_2250){return Panic();},[&](const auto&x_2249){return x_2249;});}())):(VBool(false))))?(string_to_float([&](){ReadMetric(x_2146);return OptionMatch(HashtblFind(OptionMatch(Some(x_2145),[&](const auto&x_2276){return Panic();},[&](const auto&x_2275){return x_2275;}).var,"width_attr_expr"),[&](const auto&x_2278){return Panic();},[&](const auto&x_2277){return x_2277;});}())):((BoolOfValue((BoolOfValue(not([&](){ReadMetric(x_2146);return OptionMatch(HashtblFind(OptionMatch(Some(x_2145),[&](const auto&x_2252){return Panic();},[&](const auto&x_2251){return x_2251;}).var,"has_width_attr"),[&](const auto&x_2254){return Panic();},[&](const auto&x_2253){return x_2253;});}())))?(VBool(IsSome(HashtblFind(x_2145.attr,"viewBox")))):(VBool(false))))?(string_to_float(nth_by_sep([&](){ReadMetric(x_2146);return OptionMatch(HashtblFind(x_2145.attr,"viewBox"),[&](const auto&x_2274){return Panic();},[&](const auto&x_2273){return x_2273;});}(),VString(" "),VInt(2)))):((BoolOfValue((BoolOfValue([&](){ReadMetric(x_2146);return OptionMatch(HashtblFind(OptionMatch(Some(x_2145),[&](const auto&x_2256){return Panic();},[&](const auto&x_2255){return x_2255;}).var,"has_width_attr"),[&](const auto&x_2258){return Panic();},[&](const auto&x_2257){return x_2257;});}()))?((BoolOfValue(has_suffix([&](){ReadMetric(x_2146);return OptionMatch(HashtblFind(OptionMatch(Some(x_2145),[&](const auto&x_2260){return Panic();},[&](const auto&x_2259){return x_2259;}).var,"width_attr_expr"),[&](const auto&x_2262){return Panic();},[&](const auto&x_2261){return x_2261;});}(),VString("%"))))?(VBool(IsSome(HashtblFind(x_2145.attr,"viewBox")))):(VBool(false))):(VBool(false))))?(mult(string_to_float(nth_by_sep([&](){ReadMetric(x_2146);return OptionMatch(HashtblFind(x_2145.attr,"viewBox"),[&](const auto&x_2268){return Panic();},[&](const auto&x_2267){return x_2267;});}(),VString(" "),VInt(2))),divide(string_to_float(strip_suffix([&](){ReadMetric(x_2146);return OptionMatch(HashtblFind(OptionMatch(Some(x_2145),[&](const auto&x_2270){return Panic();},[&](const auto&x_2269){return x_2269;}).var,"width_attr_expr"),[&](const auto&x_2272){return Panic();},[&](const auto&x_2271){return x_2271;});}(),VString("%"))),VFloat(100.)))):(Panic())))):((BoolOfValue(eq(VString(x_2145.name),VString("IMG"))))?((BoolOfValue([&](){ReadMetric(x_2146);return OptionMatch(HashtblFind(OptionMatch(Some(x_2145),[&](const auto&x_2204){return Panic();},[&](const auto&x_2203){return x_2203;}).var,"has_width_attr"),[&](const auto&x_2206){return Panic();},[&](const auto&x_2205){return x_2205;});}()))?(string_to_float([&](){ReadMetric(x_2146);return OptionMatch(HashtblFind(OptionMatch(Some(x_2145),[&](const auto&x_2240){return Panic();},[&](const auto&x_2239){return x_2239;}).var,"width_attr_expr"),[&](const auto&x_2242){return Panic();},[&](const auto&x_2241){return x_2241;});}())):((BoolOfValue((BoolOfValue(VBool(IsSome(HashtblFind(x_2145.attr,"image_width")))))?(not([&](){ReadMetric(x_2146);return OptionMatch(HashtblFind(OptionMatch(Some(x_2145),[&](const auto&x_2208){return Panic();},[&](const auto&x_2207){return x_2207;}).var,"has_height_attr"),[&](const auto&x_2210){return Panic();},[&](const auto&x_2209){return x_2209;});}())):(VBool(false))))?(int_to_float([&](){ReadMetric(x_2146);return OptionMatch(HashtblFind(x_2145.attr,"image_width"),[&](const auto&x_2238){return Panic();},[&](const auto&x_2237){return x_2237;});}())):((BoolOfValue((BoolOfValue(not([&](){ReadMetric(x_2146);return OptionMatch(HashtblFind(OptionMatch(Some(x_2145),[&](const auto&x_2212){return Panic();},[&](const auto&x_2211){return x_2211;}).var,"has_width_attr"),[&](const auto&x_2214){return Panic();},[&](const auto&x_2213){return x_2213;});}())))?((BoolOfValue([&](){ReadMetric(x_2146);return OptionMatch(HashtblFind(OptionMatch(Some(x_2145),[&](const auto&x_2216){return Panic();},[&](const auto&x_2215){return x_2215;}).var,"has_height_attr"),[&](const auto&x_2218){return Panic();},[&](const auto&x_2217){return x_2217;});}()))?((BoolOfValue(VBool(IsSome(HashtblFind(x_2145.attr,"image_width")))))?(VBool(IsSome(HashtblFind(x_2145.attr,"image_height")))):(VBool(false))):(VBool(false))):(VBool(false))))?((BoolOfValue(neq([&](){ReadMetric(x_2146);return OptionMatch(HashtblFind(x_2145.attr,"image_height"),[&](const auto&x_2228){return Panic();},[&](const auto&x_2227){return x_2227;});}(),VInt(0))))?(mult(string_to_float([&](){ReadMetric(x_2146);return OptionMatch(HashtblFind(OptionMatch(Some(x_2145),[&](const auto&x_2230){return Panic();},[&](const auto&x_2229){return x_2229;}).var,"height_attr_expr"),[&](const auto&x_2232){return Panic();},[&](const auto&x_2231){return x_2231;});}()),divide(int_to_float([&](){ReadMetric(x_2146);return OptionMatch(HashtblFind(x_2145.attr,"image_width"),[&](const auto&x_2234){return Panic();},[&](const auto&x_2233){return x_2233;});}()),int_to_float([&](){ReadMetric(x_2146);return OptionMatch(HashtblFind(x_2145.attr,"image_height"),[&](const auto&x_2236){return Panic();},[&](const auto&x_2235){return x_2235;});}())))):(VFloat(0.))):(Panic())))):((BoolOfValue(eq(VString(x_2145.name),VString("IFRAME"))))?((BoolOfValue([&](){ReadMetric(x_2146);return OptionMatch(HashtblFind(OptionMatch(Some(x_2145),[&](const auto&x_2196){return Panic();},[&](const auto&x_2195){return x_2195;}).var,"has_width_attr"),[&](const auto&x_2198){return Panic();},[&](const auto&x_2197){return x_2197;});}()))?(Panic()):(VFloat(300.))):((BoolOfValue(eq(VString(x_2145.name),VString("TEXTAREA"))))?(VFloat(100.)):((BoolOfValue(eq(VString(x_2145.name),VString("VIDEO"))))?((BoolOfValue([&](){ReadMetric(x_2146);return OptionMatch(HashtblFind(OptionMatch(Some(x_2145),[&](const auto&x_2188){return Panic();},[&](const auto&x_2187){return x_2187;}).var,"has_width_attr"),[&](const auto&x_2190){return Panic();},[&](const auto&x_2189){return x_2189;});}()))?(Panic()):(VFloat(300.))):(Panic()))))))))));};}auto var_modified_x_782(const auto&x_2299){return [&](const auto&x_2300){return MakeUnit();};}auto eval_expr_x_779(const auto&x_2302){return [&](const auto&x_2303){if (BoolOfValue(VBool(IsSome(ListLast(x_2302.children))))){ReadMetric(x_2303);return OptionMatch(HashtblFind(OptionMatch(ListLast(x_2302.children),[&](const auto&x_2305){return Panic();},[&](const auto&x_2304){return x_2304;}).var,"intrinsic_width_max"),[&](const auto&x_2307){return Panic();},[&](const auto&x_2306){return x_2306;});}else{return VFloat(0.);};}auto var_modified_x_777(const auto&x_2308){return [&](const auto&x_2309){return MakeUnit();};}auto eval_expr_x_774(const auto&x_2311){return [&](const auto&x_2312){if (BoolOfValue((BoolOfValue(eq([&](){ReadMetric(x_2312);return OptionMatch(HashtblFind(OptionMatch(Some(x_2311),[&](const auto&x_2314){return Panic();},[&](const auto&x_2313){return x_2313;}).var,"display"),[&](const auto&x_2316){return Panic();},[&](const auto&x_2315){return x_2315;});}(),VString("none"))))?(VBool(true)):((BoolOfValue([&](){ReadMetric(x_2312);return OptionMatch(HashtblFind(OptionMatch(Some(x_2311),[&](const auto&x_2318){return Panic();},[&](const auto&x_2317){return x_2317;}).var,"inside_svg"),[&](const auto&x_2320){return Panic();},[&](const auto&x_2319){return x_2319;});}()))?(VBool(true)):([&](){ReadMetric(x_2312);return OptionMatch(HashtblFind(OptionMatch(Some(x_2311),[&](const auto&x_2322){return Panic();},[&](const auto&x_2321){return x_2321;}).var,"disabled"),[&](const auto&x_2324){return Panic();},[&](const auto&x_2323){return x_2323;});}())))){return VBool(true);}else{if (BoolOfValue((BoolOfValue(VBool(IsSome(x_2311.parent))))?([&](){ReadMetric(x_2312);return OptionMatch(HashtblFind(OptionMatch(x_2311.parent,[&](const auto&x_2326){return Panic();},[&](const auto&x_2325){return x_2325;}).var,"is_flex_row"),[&](const auto&x_2328){return Panic();},[&](const auto&x_2327){return x_2327;});}()):(VBool(false)))){return VBool(false);}else{if (BoolOfValue((BoolOfValue(eq([&](){ReadMetric(x_2312);return OptionMatch(HashtblFind(OptionMatch(Some(x_2311),[&](const auto&x_2330){return Panic();},[&](const auto&x_2329){return x_2329;}).var,"width_expr"),[&](const auto&x_2332){return Panic();},[&](const auto&x_2331){return x_2331;});}(),VString("auto"))))?(VBool(true)):((BoolOfValue(has_suffix([&](){ReadMetric(x_2312);return OptionMatch(HashtblFind(OptionMatch(Some(x_2311),[&](const auto&x_2334){return Panic();},[&](const auto&x_2333){return x_2333;}).var,"width_expr"),[&](const auto&x_2336){return Panic();},[&](const auto&x_2335){return x_2335;});}(),VString("px"))))?(VBool(true)):((BoolOfValue(has_suffix([&](){ReadMetric(x_2312);return OptionMatch(HashtblFind(OptionMatch(Some(x_2311),[&](const auto&x_2338){return Panic();},[&](const auto&x_2337){return x_2337;}).var,"width_expr"),[&](const auto&x_2340){return Panic();},[&](const auto&x_2339){return x_2339;});}(),VString("ch"))))?(VBool(true)):((BoolOfValue(has_prefix([&](){ReadMetric(x_2312);return OptionMatch(HashtblFind(OptionMatch(Some(x_2311),[&](const auto&x_2342){return Panic();},[&](const auto&x_2341){return x_2341;}).var,"width_expr"),[&](const auto&x_2344){return Panic();},[&](const auto&x_2343){return x_2343;});}(),VString("calc("))))?(VBool(true)):(eq([&](){ReadMetric(x_2312);return OptionMatch(HashtblFind(OptionMatch(Some(x_2311),[&](const auto&x_2346){return Panic();},[&](const auto&x_2345){return x_2345;}).var,"width_expr"),[&](const auto&x_2348){return Panic();},[&](const auto&x_2347){return x_2347;});}(),VString("max-content")))))))){return VBool(true);}else{if (BoolOfValue((BoolOfValue(has_suffix([&](){ReadMetric(x_2312);return OptionMatch(HashtblFind(OptionMatch(Some(x_2311),[&](const auto&x_2350){return Panic();},[&](const auto&x_2349){return x_2349;}).var,"width_expr"),[&](const auto&x_2352){return Panic();},[&](const auto&x_2351){return x_2351;});}(),VString("%"))))?(VBool(true)):(eq([&](){ReadMetric(x_2312);return OptionMatch(HashtblFind(OptionMatch(Some(x_2311),[&](const auto&x_2354){return Panic();},[&](const auto&x_2353){return x_2353;}).var,"width_expr"),[&](const auto&x_2356){return Panic();},[&](const auto&x_2355){return x_2355;});}(),VString("fit-content"))))){return VBool(false);}else{return Panic();};}auto var_modified_x_772(const auto&x_2361){return [&](const auto&x_2362){return MakeUnit();};}auto eval_expr_x_769(const auto&x_2365){return [&](const auto&x_2366){if (BoolOfValue(eq([&](){ReadMetric(x_2366);return OptionMatch(HashtblFind(OptionMatch(Some(x_2365),[&](const auto&x_2368){return Panic();},[&](const auto&x_2367){return x_2367;}).var,"display"),[&](const auto&x_2370){return Panic();},[&](const auto&x_2369){return x_2369;});}(),VString("none")))){return VBool(true);}else{if (BoolOfValue([&](){ReadMetric(x_2366);return OptionMatch(HashtblFind(OptionMatch(Some(x_2365),[&](const auto&x_2372){return Panic();},[&](const auto&x_2371){return x_2371;}).var,"inside_svg"),[&](const auto&x_2374){return Panic();},[&](const auto&x_2373){return x_2373;});}())){return VBool(true);}else{if (BoolOfValue([&](){ReadMetric(x_2366);return OptionMatch(HashtblFind(OptionMatch(Some(x_2365),[&](const auto&x_2376){return Panic();},[&](const auto&x_2375){return x_2375;}).var,"disabled"),[&](const auto&x_2378){return Panic();},[&](const auto&x_2377){return x_2377;});}())){return VBool(true);}else{if (BoolOfValue((BoolOfValue(eq(VString(x_2365.name),VString("#document"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("#shadow-root"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("DIV"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("HTML"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("BODY"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("BUTTON"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("FOOTER"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("SELECT"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("SECTION"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("FORM"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("CENTER"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("TD"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("TR"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("TBODY"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("TABLE"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("SPAN"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("FONT"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("A"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("ARTICLE"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("P"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("U"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("UL"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("B"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("H1"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("H2"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("H3"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("H4"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("DT"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("DD"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("DL"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("LI"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("LABEL"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("OL"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("NAV"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("HEADER"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("HEAD"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("SOURCE"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("PICTURE"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("FIGURE"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("FIGCAPTION"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("MAIN"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("REACT-PARTIAL"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("QUERY-BUILDER"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("MODAL-DIALOG"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("SCROLLABLE-REGION"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("DIALOG-HELPER"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("AUTO-CHECK"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("TOOL-TIP"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("CUSTOM-SCOPES"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("QBSEARCH-INPUT"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("INCLUDE-FRAGMENT"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("COOKIE-CONSENT-LINK"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("FULLSTORY-CAPTURE"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("GHCC-CONSENT"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("GLOBAL-BANNER"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("ACTIVE-GLOBAL-BANNERS"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("CARD-SKEW"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("EM"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("ASIDE"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("AUDIO"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("SUP"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("TIME"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("ABBR"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("SMALL"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("SLOT"))))?(VBool(true)):(eq(VString(x_2365.name),VString("I"))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))){return VBool(true);}else{if (BoolOfValue((BoolOfValue(eq(VString(x_2365.name),VString("#text"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("svg"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("IFRAME"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("INPUT"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("VIDEO"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("BR"))))?(VBool(true)):((BoolOfValue(eq(VString(x_2365.name),VString("IMG"))))?(VBool(true)):(eq(VString(x_2365.name),VString("TEXTAREA"))))))))))){return VBool(false);}else{return Panic();};}auto var_modified_x_767(const auto&x_2379){return [&](const auto&x_2380){return MakeUnit();};}auto eval_expr_x_764(const auto&x_2400){return [&](const auto&x_2401){if (BoolOfValue(VBool(IsSome(HashtblFind(x_2400.prop,"width"))))){ReadMetric(x_2401);return OptionMatch(HashtblFind(x_2400.prop,"width"),[&](const auto&x_2403){return Panic();},[&](const auto&x_2402){return x_2402;});}else{return VString("auto");};}auto var_modified_x_760(const auto&x_2404){return [&](const auto&x_2405){OptionMatch(x_2404.next,[&](const auto&x_2407){return Nil();},[&](const auto&x_2406){return Cons(x_2406,Nil());});OptionMatch(x_2404.next,[&](const auto&x_2410){return Nil();},[&](const auto&x_2409){return Cons(x_2409,Nil());});MakeUnit();MakeUnit();return MakeUnit();};}auto eval_expr_x_757(const auto&x_2412){return [&](const auto&x_2413){if (BoolOfValue((BoolOfValue(VBool(IsSome(x_2412.prev))))?(not([&](){ReadMetric(x_2413);return OptionMatch(HashtblFind(OptionMatch(x_2412.prev,[&](const auto&x_2415){return Panic();},[&](const auto&x_2414){return x_2414;}).var,"line_break"),[&](const auto&x_2417){return Panic();},[&](const auto&x_2416){return x_2416;});}())):(VBool(false)))){return max([&](){ReadMetric(x_2413);return OptionMatch(HashtblFind(OptionMatch(Some(x_2412),[&](const auto&x_2423){return Panic();},[&](const auto&x_2422){return x_2422;}).var,"height_external"),[&](const auto&x_2425){return Panic();},[&](const auto&x_2424){return x_2424;});}(),[&](){ReadMetric(x_2413);return OptionMatch(HashtblFind(OptionMatch(x_2412.prev,[&](const auto&x_2427){return Panic();},[&](const auto&x_2426){return x_2426;}).var,"line_height"),[&](const auto&x_2429){return Panic();},[&](const auto&x_2428){return x_2428;});}());}else{ReadMetric(x_2413);return OptionMatch(HashtblFind(OptionMatch(Some(x_2412),[&](const auto&x_2419){return Panic();},[&](const auto&x_2418){return x_2418;}).var,"height_external"),[&](const auto&x_2421){return Panic();},[&](const auto&x_2420){return x_2420;});};}auto var_modified_x_755(const auto&x_2430){return [&](const auto&x_2431){return MakeUnit();};}auto eval_expr_x_752(const auto&x_2434){return [&](const auto&x_2435){if (BoolOfValue(eq([&](){ReadMetric(x_2435);return OptionMatch(HashtblFind(OptionMatch(Some(x_2434),[&](const auto&x_2437){return Panic();},[&](const auto&x_2436){return x_2436;}).var,"position"),[&](const auto&x_2439){return Panic();},[&](const auto&x_2438){return x_2438;});}(),VString("absolute")))){return VFloat(0.);}else{ReadMetric(x_2435);return OptionMatch(HashtblFind(OptionMatch(Some(x_2434),[&](const auto&x_2441){return Panic();},[&](const auto&x_2440){return x_2440;}).var,"height_internal"),[&](const auto&x_2443){return Panic();},[&](const auto&x_2442){return x_2442;});};}auto var_modified_x_750(const auto&x_2444){return [&](const auto&x_2445){return MakeUnit();};}auto eval_expr_x_747(const auto&x_2448){return [&](const auto&x_2449){if (BoolOfValue([&](){ReadMetric(x_2449);return OptionMatch(HashtblFind(OptionMatch(Some(x_2448),[&](const auto&x_2451){return Panic();},[&](const auto&x_2450){return x_2450;}).var,"intrinsic_height_is_height"),[&](const auto&x_2453){return Panic();},[&](const auto&x_2452){return x_2452;});}())){ReadMetric(x_2449);return OptionMatch(HashtblFind(OptionMatch(Some(x_2448),[&](const auto&x_2499){return Panic();},[&](const auto&x_2498){return x_2498;}).var,"intrinsic_height_internal"),[&](const auto&x_2501){return Panic();},[&](const auto&x_2500){return x_2500;});}else{if (BoolOfValue((BoolOfValue(VBool(IsSome(x_2448.parent))))?([&](){ReadMetric(x_2449);return OptionMatch(HashtblFind(OptionMatch(x_2448.parent,[&](const auto&x_2455){return Panic();},[&](const auto&x_2454){return x_2454;}).var,"is_flex_column"),[&](const auto&x_2457){return Panic();},[&](const auto&x_2456){return x_2456;});}()):(VBool(false)))){return plus([&](){ReadMetric(x_2449);return OptionMatch(HashtblFind(OptionMatch(Some(x_2448),[&](const auto&x_2487){return Panic();},[&](const auto&x_2486){return x_2486;}).var,"intrinsic_height_internal"),[&](const auto&x_2489){return Panic();},[&](const auto&x_2488){return x_2488;});}(),mult([&](){ReadMetric(x_2449);return OptionMatch(HashtblFind(OptionMatch(Some(x_2448),[&](const auto&x_2491){return Panic();},[&](const auto&x_2490){return x_2490;}).var,"flex_amount"),[&](const auto&x_2493){return Panic();},[&](const auto&x_2492){return x_2492;});}(),[&](){ReadMetric(x_2449);return OptionMatch(HashtblFind(OptionMatch(x_2448.parent,[&](const auto&x_2495){return Panic();},[&](const auto&x_2494){return x_2494;}).var,"flex_unit"),[&](const auto&x_2497){return Panic();},[&](const auto&x_2496){return x_2496;});}()));}else{if (BoolOfValue(has_suffix([&](){ReadMetric(x_2449);return OptionMatch(HashtblFind(OptionMatch(Some(x_2448),[&](const auto&x_2459){return Panic();},[&](const auto&x_2458){return x_2458;}).var,"height_expr"),[&](const auto&x_2461){return Panic();},[&](const auto&x_2460){return x_2460;});}(),VString("%")))){return mult([&](){ReadMetric(x_2449);return OptionMatch(HashtblFind(OptionMatch(Some(x_2448),[&](const auto&x_2479){return Panic();},[&](const auto&x_2478){return x_2478;}).var,"box_height"),[&](const auto&x_2481){return Panic();},[&](const auto&x_2480){return x_2480;});}(),divide(string_to_float(strip_suffix([&](){ReadMetric(x_2449);return OptionMatch(HashtblFind(OptionMatch(Some(x_2448),[&](const auto&x_2483){return Panic();},[&](const auto&x_2482){return x_2482;}).var,"height_expr"),[&](const auto&x_2485){return Panic();},[&](const auto&x_2484){return x_2484;});}(),VString("%"))),VFloat(100.)));}else{if (BoolOfValue(eq([&](){ReadMetric(x_2449);return OptionMatch(HashtblFind(OptionMatch(Some(x_2448),[&](const auto&x_2463){return Panic();},[&](const auto&x_2462){return x_2462;}).var,"height_expr"),[&](const auto&x_2465){return Panic();},[&](const auto&x_2464){return x_2464;});}(),VString("fit-content")))){return max([&](){ReadMetric(x_2449);return OptionMatch(HashtblFind(OptionMatch(Some(x_2448),[&](const auto&x_2471){return Panic();},[&](const auto&x_2470){return x_2470;}).var,"box_height"),[&](const auto&x_2473){return Panic();},[&](const auto&x_2472){return x_2472;});}(),[&](){ReadMetric(x_2449);return OptionMatch(HashtblFind(OptionMatch(Some(x_2448),[&](const auto&x_2475){return Panic();},[&](const auto&x_2474){return x_2474;}).var,"intrinsic_height_internal"),[&](const auto&x_2477){return Panic();},[&](const auto&x_2476){return x_2476;});}());}else{return Panic();};}auto var_modified_x_745(const auto&x_2502){return [&](const auto&x_2503){OptionMatch(x_2502.next,[&](const auto&x_2505){return Nil();},[&](const auto&x_2504){return Cons(x_2504,Nil());});OptionMatch(x_2502.next,[&](const auto&x_2508){return Nil();},[&](const auto&x_2507){return Cons(x_2507,Nil());});MakeUnit();MakeUnit();return MakeUnit();};}auto eval_expr_x_742(const auto&x_2511){return [&](const auto&x_2512){if (BoolOfValue(VBool(IsSome(x_2511.prev)))){if (BoolOfValue((BoolOfValue([&](){ReadMetric(x_2512);return OptionMatch(HashtblFind(OptionMatch(Some(x_2511),[&](const auto&x_2518){return Panic();},[&](const auto&x_2517){return x_2517;}).var,"line_break"),[&](const auto&x_2520){return Panic();},[&](const auto&x_2519){return x_2519;});}()))?(VBool(true)):([&](){ReadMetric(x_2512);return OptionMatch(HashtblFind(OptionMatch(x_2511.prev,[&](const auto&x_2522){return Panic();},[&](const auto&x_2521){return x_2521;}).var,"line_break"),[&](const auto&x_2524){return Panic();},[&](const auto&x_2523){return x_2523;});}()))){return plus([&](){ReadMetric(x_2512);return OptionMatch(HashtblFind(OptionMatch(x_2511.prev,[&](const auto&x_2530){return Panic();},[&](const auto&x_2529){return x_2529;}).var,"y"),[&](const auto&x_2532){return Panic();},[&](const auto&x_2531){return x_2531;});}(),[&](){ReadMetric(x_2512);return OptionMatch(HashtblFind(OptionMatch(x_2511.prev,[&](const auto&x_2534){return Panic();},[&](const auto&x_2533){return x_2533;}).var,"line_height"),[&](const auto&x_2536){return Panic();},[&](const auto&x_2535){return x_2535;});}());}else{ReadMetric(x_2512);return OptionMatch(HashtblFind(OptionMatch(x_2511.prev,[&](const auto&x_2526){return Panic();},[&](const auto&x_2525){return x_2525;}).var,"y"),[&](const auto&x_2528){return Panic();},[&](const auto&x_2527){return x_2527;});}else{if (BoolOfValue(VBool(IsSome(x_2511.parent)))){ReadMetric(x_2512);return OptionMatch(HashtblFind(OptionMatch(x_2511.parent,[&](const auto&x_2514){return Panic();},[&](const auto&x_2513){return x_2513;}).var,"y"),[&](const auto&x_2516){return Panic();},[&](const auto&x_2515){return x_2515;});}else{return VFloat(0.);};}auto var_modified_x_740(const auto&x_2537){return [&](const auto&x_2538){OptionMatch(x_2537.next,[&](const auto&x_2540){return Nil();},[&](const auto&x_2539){return Cons(x_2539,Nil());});MakeUnit();MakeUnit();return MakeUnit();};}auto eval_expr_x_737(const auto&x_2542){return [&](const auto&x_2543){if (BoolOfValue(eq([&](){ReadMetric(x_2543);return OptionMatch(HashtblFind(OptionMatch(Some(x_2542),[&](const auto&x_2545){return Panic();},[&](const auto&x_2544){return x_2544;}).var,"position"),[&](const auto&x_2547){return Panic();},[&](const auto&x_2546){return x_2546;});}(),VString("absolute")))){return VFloat(0.);}else{ReadMetric(x_2543);return OptionMatch(HashtblFind(OptionMatch(Some(x_2542),[&](const auto&x_2549){return Panic();},[&](const auto&x_2548){return x_2548;}).var,"width_internal"),[&](const auto&x_2551){return Panic();},[&](const auto&x_2550){return x_2550;});};}auto var_modified_x_735(const auto&x_2552){return [&](const auto&x_2553){return MakeUnit();};}auto eval_expr_x_732(const auto&x_2556){return [&](const auto&x_2557){if (BoolOfValue([&](){ReadMetric(x_2557);return OptionMatch(HashtblFind(OptionMatch(Some(x_2556),[&](const auto&x_2559){return Panic();},[&](const auto&x_2558){return x_2558;}).var,"intrinsic_width_is_width"),[&](const auto&x_2561){return Panic();},[&](const auto&x_2560){return x_2560;});}())){ReadMetric(x_2557);return OptionMatch(HashtblFind(OptionMatch(Some(x_2556),[&](const auto&x_2607){return Panic();},[&](const auto&x_2606){return x_2606;}).var,"intrinsic_width_internal"),[&](const auto&x_2609){return Panic();},[&](const auto&x_2608){return x_2608;});}else{if (BoolOfValue((BoolOfValue(VBool(IsSome(x_2556.parent))))?([&](){ReadMetric(x_2557);return OptionMatch(HashtblFind(OptionMatch(x_2556.parent,[&](const auto&x_2563){return Panic();},[&](const auto&x_2562){return x_2562;}).var,"is_flex_row"),[&](const auto&x_2565){return Panic();},[&](const auto&x_2564){return x_2564;});}()):(VBool(false)))){return plus([&](){ReadMetric(x_2557);return OptionMatch(HashtblFind(OptionMatch(Some(x_2556),[&](const auto&x_2595){return Panic();},[&](const auto&x_2594){return x_2594;}).var,"intrinsic_width_internal"),[&](const auto&x_2597){return Panic();},[&](const auto&x_2596){return x_2596;});}(),mult([&](){ReadMetric(x_2557);return OptionMatch(HashtblFind(OptionMatch(Some(x_2556),[&](const auto&x_2599){return Panic();},[&](const auto&x_2598){return x_2598;}).var,"flex_amount"),[&](const auto&x_2601){return Panic();},[&](const auto&x_2600){return x_2600;});}(),[&](){ReadMetric(x_2557);return OptionMatch(HashtblFind(OptionMatch(x_2556.parent,[&](const auto&x_2603){return Panic();},[&](const auto&x_2602){return x_2602;}).var,"flex_unit"),[&](const auto&x_2605){return Panic();},[&](const auto&x_2604){return x_2604;});}()));}else{if (BoolOfValue(has_suffix([&](){ReadMetric(x_2557);return OptionMatch(HashtblFind(OptionMatch(Some(x_2556),[&](const auto&x_2567){return Panic();},[&](const auto&x_2566){return x_2566;}).var,"width_expr"),[&](const auto&x_2569){return Panic();},[&](const auto&x_2568){return x_2568;});}(),VString("%")))){return mult([&](){ReadMetric(x_2557);return OptionMatch(HashtblFind(OptionMatch(Some(x_2556),[&](const auto&x_2587){return Panic();},[&](const auto&x_2586){return x_2586;}).var,"box_width"),[&](const auto&x_2589){return Panic();},[&](const auto&x_2588){return x_2588;});}(),divide(string_to_float(strip_suffix([&](){ReadMetric(x_2557);return OptionMatch(HashtblFind(OptionMatch(Some(x_2556),[&](const auto&x_2591){return Panic();},[&](const auto&x_2590){return x_2590;}).var,"width_expr"),[&](const auto&x_2593){return Panic();},[&](const auto&x_2592){return x_2592;});}(),VString("%"))),VFloat(100.)));}else{if (BoolOfValue(eq([&](){ReadMetric(x_2557);return OptionMatch(HashtblFind(OptionMatch(Some(x_2556),[&](const auto&x_2571){return Panic();},[&](const auto&x_2570){return x_2570;}).var,"width_expr"),[&](const auto&x_2573){return Panic();},[&](const auto&x_2572){return x_2572;});}(),VString("fit-content")))){return max([&](){ReadMetric(x_2557);return OptionMatch(HashtblFind(OptionMatch(Some(x_2556),[&](const auto&x_2579){return Panic();},[&](const auto&x_2578){return x_2578;}).var,"box_width"),[&](const auto&x_2581){return Panic();},[&](const auto&x_2580){return x_2580;});}(),[&](){ReadMetric(x_2557);return OptionMatch(HashtblFind(OptionMatch(Some(x_2556),[&](const auto&x_2583){return Panic();},[&](const auto&x_2582){return x_2582;}).var,"intrinsic_width_internal"),[&](const auto&x_2585){return Panic();},[&](const auto&x_2584){return x_2584;});}());}else{return Panic();};}auto var_modified_x_730(const auto&x_2610){return [&](const auto&x_2611){OptionMatch(x_2610.next,[&](const auto&x_2613){return Nil();},[&](const auto&x_2612){return Cons(x_2612,Nil());});MakeUnit();MakeUnit();return MakeUnit();};}auto eval_expr_x_727(const auto&x_2616){return [&](const auto&x_2617){if (BoolOfValue(VBool(IsSome(x_2616.prev)))){if (BoolOfValue((BoolOfValue([&](){ReadMetric(x_2617);return OptionMatch(HashtblFind(OptionMatch(Some(x_2616),[&](const auto&x_2623){return Panic();},[&](const auto&x_2622){return x_2622;}).var,"line_break"),[&](const auto&x_2625){return Panic();},[&](const auto&x_2624){return x_2624;});}()))?(VBool(true)):([&](){ReadMetric(x_2617);return OptionMatch(HashtblFind(OptionMatch(x_2616.prev,[&](const auto&x_2627){return Panic();},[&](const auto&x_2626){return x_2626;}).var,"line_break"),[&](const auto&x_2629){return Panic();},[&](const auto&x_2628){return x_2628;});}()))){return VFloat(0.);}else{return plus([&](){ReadMetric(x_2617);return OptionMatch(HashtblFind(OptionMatch(x_2616.prev,[&](const auto&x_2631){return Panic();},[&](const auto&x_2630){return x_2630;}).var,"x"),[&](const auto&x_2633){return Panic();},[&](const auto&x_2632){return x_2632;});}(),[&](){ReadMetric(x_2617);return OptionMatch(HashtblFind(OptionMatch(x_2616.prev,[&](const auto&x_2635){return Panic();},[&](const auto&x_2634){return x_2634;}).var,"width_external"),[&](const auto&x_2637){return Panic();},[&](const auto&x_2636){return x_2636;});}());}else{if (BoolOfValue(VBool(IsSome(x_2616.parent)))){ReadMetric(x_2617);return OptionMatch(HashtblFind(OptionMatch(x_2616.parent,[&](const auto&x_2619){return Panic();},[&](const auto&x_2618){return x_2618;}).var,"x"),[&](const auto&x_2621){return Panic();},[&](const auto&x_2620){return x_2620;});}else{return VFloat(0.);};}auto var_modified_x_725(const auto&x_2638){return [&](const auto&x_2639){return MakeUnit();};}auto eval_expr_x_722(const auto&x_2642){return [&](const auto&x_2643){if (BoolOfValue(gt([&](){ReadMetric(x_2643);return OptionMatch(HashtblFind(OptionMatch(Some(x_2642),[&](const auto&x_2645){return Panic();},[&](const auto&x_2644){return x_2644;}).var,"left_over"),[&](const auto&x_2647){return Panic();},[&](const auto&x_2646){return x_2646;});}(),VFloat(0.)))){return divide([&](){ReadMetric(x_2643);return OptionMatch(HashtblFind(OptionMatch(Some(x_2642),[&](const auto&x_2657){return Panic();},[&](const auto&x_2656){return x_2656;}).var,"left_over"),[&](const auto&x_2659){return Panic();},[&](const auto&x_2658){return x_2658;});}(),[&](){ReadMetric(x_2643);return OptionMatch(HashtblFind(OptionMatch(Some(x_2642),[&](const auto&x_2661){return Panic();},[&](const auto&x_2660){return x_2660;}).var,"flex_grow_sum"),[&](const auto&x_2663){return Panic();},[&](const auto&x_2662){return x_2662;});}());}else{return divide([&](){ReadMetric(x_2643);return OptionMatch(HashtblFind(OptionMatch(Some(x_2642),[&](const auto&x_2649){return Panic();},[&](const auto&x_2648){return x_2648;}).var,"left_over"),[&](const auto&x_2651){return Panic();},[&](const auto&x_2650){return x_2650;});}(),[&](){ReadMetric(x_2643);return OptionMatch(HashtblFind(OptionMatch(Some(x_2642),[&](const auto&x_2653){return Panic();},[&](const auto&x_2652){return x_2652;}).var,"flex_shrink_sum"),[&](const auto&x_2655){return Panic();},[&](const auto&x_2654){return x_2654;});}());};}auto var_modified_x_720(const auto&x_2664){return [&](const auto&x_2665){return MakeUnit();};}auto eval_expr_x_717(const auto&x_2668){return [&](const auto&x_2669){if (BoolOfValue((BoolOfValue(VBool(IsSome(x_2668.parent))))?(gt([&](){ReadMetric(x_2669);return OptionMatch(HashtblFind(OptionMatch(x_2668.parent,[&](const auto&x_2671){return Panic();},[&](const auto&x_2670){return x_2670;}).var,"left_over"),[&](const auto&x_2673){return Panic();},[&](const auto&x_2672){return x_2672;});}(),VFloat(0.))):(VBool(false)))){ReadMetric(x_2669);return OptionMatch(HashtblFind(OptionMatch(Some(x_2668),[&](const auto&x_2679){return Panic();},[&](const auto&x_2678){return x_2678;}).var,"flex_grow"),[&](const auto&x_2681){return Panic();},[&](const auto&x_2680){return x_2680;});}else{ReadMetric(x_2669);return OptionMatch(HashtblFind(OptionMatch(Some(x_2668),[&](const auto&x_2675){return Panic();},[&](const auto&x_2674){return x_2674;}).var,"flex_shrink"),[&](const auto&x_2677){return Panic();},[&](const auto&x_2676){return x_2676;});};}auto var_modified_x_715(const auto&x_2682){return [&](const auto&x_2683){return MakeUnit();};}auto eval_expr_x_712(const auto&x_2688){return [&](const auto&x_2689){if (BoolOfValue([&](){ReadMetric(x_2689);return OptionMatch(HashtblFind(OptionMatch(Some(x_2688),[&](const auto&x_2691){return Panic();},[&](const auto&x_2690){return x_2690;}).var,"is_flex_row"),[&](const auto&x_2693){return Panic();},[&](const auto&x_2692){return x_2692;});}())){return minus([&](){ReadMetric(x_2689);return OptionMatch(HashtblFind(OptionMatch(Some(x_2688),[&](const auto&x_2703){return Panic();},[&](const auto&x_2702){return x_2702;}).var,"box_width"),[&](const auto&x_2705){return Panic();},[&](const auto&x_2704){return x_2704;});}(),(BoolOfValue(VBool(IsSome(ListLast(x_2688.children)))))?([&](){ReadMetric(x_2689);return OptionMatch(HashtblFind(OptionMatch(ListLast(x_2688.children),[&](const auto&x_2707){return Panic();},[&](const auto&x_2706){return x_2706;}).var,"intrinsic_width_sum"),[&](const auto&x_2709){return Panic();},[&](const auto&x_2708){return x_2708;});}()):(VFloat(0.)));}else{return minus([&](){ReadMetric(x_2689);return OptionMatch(HashtblFind(OptionMatch(Some(x_2688),[&](const auto&x_2695){return Panic();},[&](const auto&x_2694){return x_2694;}).var,"box_height"),[&](const auto&x_2697){return Panic();},[&](const auto&x_2696){return x_2696;});}(),(BoolOfValue(VBool(IsSome(ListLast(x_2688.children)))))?([&](){ReadMetric(x_2689);return OptionMatch(HashtblFind(OptionMatch(ListLast(x_2688.children),[&](const auto&x_2699){return Panic();},[&](const auto&x_2698){return x_2698;}).var,"intrinsic_height_sum"),[&](const auto&x_2701){return Panic();},[&](const auto&x_2700){return x_2700;});}()):(VFloat(0.)));};}auto var_modified_x_710(const auto&x_2710){return [&](const auto&x_2711){return MakeUnit();};}auto eval_expr_x_707(const auto&x_2715){return [&](const auto&x_2716){if (BoolOfValue(VBool(IsSome(x_2715.parent)))){ReadMetric(x_2716);return OptionMatch(HashtblFind(OptionMatch(x_2715.parent,[&](const auto&x_2718){return Panic();},[&](const auto&x_2717){return x_2717;}).var,"height_internal"),[&](const auto&x_2720){return Panic();},[&](const auto&x_2719){return x_2719;});}else{return VFloat(1080.);};}auto var_modified_x_705(const auto&x_2721){return [&](const auto&x_2722){return MakeUnit();};}auto eval_expr_x_702(const auto&x_2726){return [&](const auto&x_2727){if (BoolOfValue(VBool(IsSome(x_2726.parent)))){ReadMetric(x_2727);return OptionMatch(HashtblFind(OptionMatch(x_2726.parent,[&](const auto&x_2729){return Panic();},[&](const auto&x_2728){return x_2728;}).var,"width_internal"),[&](const auto&x_2731){return Panic();},[&](const auto&x_2730){return x_2730;});}else{return VFloat(1920.);};}auto var_modified_x_698(const auto&x_2732){return [&](const auto&x_2733){OptionMatch(x_2732.next,[&](const auto&x_2735){return Nil();},[&](const auto&x_2734){return Cons(x_2734,Nil());});MakeUnit();MakeUnit();OptionMatch(x_2732.next,[&](const auto&x_2742){return Nil();},[&](const auto&x_2741){return Cons(x_2741,Nil());});OptionMatch(x_2732.next,[&](const auto&x_2746){return Nil();},[&](const auto&x_2745){return Cons(x_2745,Nil());});OptionMatch(x_2732.next,[&](const auto&x_2749){return Nil();},[&](const auto&x_2748){return Cons(x_2748,Nil());});MakeUnit();MakeUnit();return MakeUnit();};}auto eval_expr_x_695(const auto&x_2751){return [&](const auto&x_2752){if (BoolOfValue(eq([&](){ReadMetric(x_2752);return OptionMatch(HashtblFind(OptionMatch(Some(x_2751),[&](const auto&x_2754){return Panic();},[&](const auto&x_2753){return x_2753;}).var,"display"),[&](const auto&x_2756){return Panic();},[&](const auto&x_2755){return x_2755;});}(),VString("none")))){return VBool(false);}else{if (BoolOfValue(eq([&](){ReadMetric(x_2752);return OptionMatch(HashtblFind(OptionMatch(Some(x_2751),[&](const auto&x_2758){return Panic();},[&](const auto&x_2757){return x_2757;}).var,"position"),[&](const auto&x_2760){return Panic();},[&](const auto&x_2759){return x_2759;});}(),VString("absolute")))){return VBool(false);}else{if (BoolOfValue((BoolOfValue(VBool(IsSome(x_2751.parent))))?((BoolOfValue(eq([&](){ReadMetric(x_2752);return OptionMatch(HashtblFind(OptionMatch(x_2751.parent,[&](const auto&x_2762){return Panic();},[&](const auto&x_2761){return x_2761;}).var,"display"),[&](const auto&x_2764){return Panic();},[&](const auto&x_2763){return x_2763;});}(),VString("flex"))))?(VBool(true)):(eq([&](){ReadMetric(x_2752);return OptionMatch(HashtblFind(OptionMatch(x_2751.parent,[&](const auto&x_2766){return Panic();},[&](const auto&x_2765){return x_2765;}).var,"display"),[&](const auto&x_2768){return Panic();},[&](const auto&x_2767){return x_2767;});}(),VString("inline-flex")))):(VBool(false)))){return VBool(true);}else{if (BoolOfValue(eq([&](){ReadMetric(x_2752);return OptionMatch(HashtblFind(OptionMatch(Some(x_2751),[&](const auto&x_2770){return Panic();},[&](const auto&x_2769){return x_2769;}).var,"display"),[&](const auto&x_2772){return Panic();},[&](const auto&x_2771){return x_2771;});}(),VString("block")))){return VBool(true);}else{if (BoolOfValue(eq([&](){ReadMetric(x_2752);return OptionMatch(HashtblFind(OptionMatch(Some(x_2751),[&](const auto&x_2774){return Panic();},[&](const auto&x_2773){return x_2773;}).var,"display"),[&](const auto&x_2776){return Panic();},[&](const auto&x_2775){return x_2775;});}(),VString("inline")))){return VBool(false);}else{if (BoolOfValue(eq([&](){ReadMetric(x_2752);return OptionMatch(HashtblFind(OptionMatch(Some(x_2751),[&](const auto&x_2778){return Panic();},[&](const auto&x_2777){return x_2777;}).var,"display"),[&](const auto&x_2780){return Panic();},[&](const auto&x_2779){return x_2779;});}(),VString("inline-block")))){return VBool(false);}else{if (BoolOfValue(eq([&](){ReadMetric(x_2752);return OptionMatch(HashtblFind(OptionMatch(Some(x_2751),[&](const auto&x_2782){return Panic();},[&](const auto&x_2781){return x_2781;}).var,"display"),[&](const auto&x_2784){return Panic();},[&](const auto&x_2783){return x_2783;});}(),VString("flex")))){if (BoolOfValue(eq([&](){ReadMetric(x_2752);return OptionMatch(HashtblFind(x_2751.prop,"flex-direction"),[&](const auto&x_2822){return Panic();},[&](const auto&x_2821){return x_2821;});}(),VString("row")))){return VBool(false);}else{if (BoolOfValue(eq([&](){ReadMetric(x_2752);return OptionMatch(HashtblFind(x_2751.prop,"flex-direction"),[&](const auto&x_2824){return Panic();},[&](const auto&x_2823){return x_2823;});}(),VString("column")))){return VBool(true);}else{if (BoolOfValue(eq([&](){ReadMetric(x_2752);return OptionMatch(HashtblFind(x_2751.prop,"flex-direction"),[&](const auto&x_2826){return Panic();},[&](const auto&x_2825){return x_2825;});}(),VString("column-reverse")))){return VBool(true);}else{return Panic();}else{if (BoolOfValue(eq([&](){ReadMetric(x_2752);return OptionMatch(HashtblFind(OptionMatch(Some(x_2751),[&](const auto&x_2786){return Panic();},[&](const auto&x_2785){return x_2785;}).var,"display"),[&](const auto&x_2788){return Panic();},[&](const auto&x_2787){return x_2787;});}(),VString("inline-flex")))){return VBool(false);}else{if (BoolOfValue(eq([&](){ReadMetric(x_2752);return OptionMatch(HashtblFind(OptionMatch(Some(x_2751),[&](const auto&x_2790){return Panic();},[&](const auto&x_2789){return x_2789;}).var,"display"),[&](const auto&x_2792){return Panic();},[&](const auto&x_2791){return x_2791;});}(),VString("contents")))){return VBool(false);}else{if (BoolOfValue(eq([&](){ReadMetric(x_2752);return OptionMatch(HashtblFind(OptionMatch(Some(x_2751),[&](const auto&x_2794){return Panic();},[&](const auto&x_2793){return x_2793;}).var,"display"),[&](const auto&x_2796){return Panic();},[&](const auto&x_2795){return x_2795;});}(),VString("table")))){return VBool(true);}else{if (BoolOfValue(eq([&](){ReadMetric(x_2752);return OptionMatch(HashtblFind(OptionMatch(Some(x_2751),[&](const auto&x_2798){return Panic();},[&](const auto&x_2797){return x_2797;}).var,"display"),[&](const auto&x_2800){return Panic();},[&](const auto&x_2799){return x_2799;});}(),VString("table-row-group")))){return VBool(true);}else{if (BoolOfValue(eq([&](){ReadMetric(x_2752);return OptionMatch(HashtblFind(OptionMatch(Some(x_2751),[&](const auto&x_2802){return Panic();},[&](const auto&x_2801){return x_2801;}).var,"display"),[&](const auto&x_2804){return Panic();},[&](const auto&x_2803){return x_2803;});}(),VString("table-row")))){return VBool(true);}else{if (BoolOfValue(eq([&](){ReadMetric(x_2752);return OptionMatch(HashtblFind(OptionMatch(Some(x_2751),[&](const auto&x_2806){return Panic();},[&](const auto&x_2805){return x_2805;}).var,"display"),[&](const auto&x_2808){return Panic();},[&](const auto&x_2807){return x_2807;});}(),VString("table-cell")))){return VBool(false);}else{if (BoolOfValue(eq([&](){ReadMetric(x_2752);return OptionMatch(HashtblFind(OptionMatch(Some(x_2751),[&](const auto&x_2810){return Panic();},[&](const auto&x_2809){return x_2809;}).var,"display"),[&](const auto&x_2812){return Panic();},[&](const auto&x_2811){return x_2811;});}(),VString("list-item")))){return VBool(true);}else{if (BoolOfValue(eq([&](){ReadMetric(x_2752);return OptionMatch(HashtblFind(OptionMatch(Some(x_2751),[&](const auto&x_2814){return Panic();},[&](const auto&x_2813){return x_2813;}).var,"display"),[&](const auto&x_2816){return Panic();},[&](const auto&x_2815){return x_2815;});}(),VString("grid")))){return VBool(true);}else{return Panic();};}auto var_modified_x_693(const auto&x_2829){return [&](const auto&x_2830){return MakeUnit();};}auto eval_expr_x_690(const auto&x_2832){return [&](const auto&x_2833){if (BoolOfValue((BoolOfValue(not(VBool(IsSome(x_2832.parent)))))?(VBool(true)):([&](){ReadMetric(x_2833);return OptionMatch(HashtblFind(OptionMatch(x_2832.parent,[&](const auto&x_2835){return Panic();},[&](const auto&x_2834){return x_2834;}).var,"visible"),[&](const auto&x_2837){return Panic();},[&](const auto&x_2836){return x_2836;});}()))){if (BoolOfValue(neq([&](){ReadMetric(x_2833);return OptionMatch(HashtblFind(OptionMatch(Some(x_2832),[&](const auto&x_2839){return Panic();},[&](const auto&x_2838){return x_2838;}).var,"display"),[&](const auto&x_2841){return Panic();},[&](const auto&x_2840){return x_2840;});}(),VString("none")))){if (BoolOfValue(not([&](){ReadMetric(x_2833);return OptionMatch(HashtblFind(OptionMatch(Some(x_2832),[&](const auto&x_2843){return Panic();},[&](const auto&x_2842){return x_2842;}).var,"inside_svg"),[&](const auto&x_2845){return Panic();},[&](const auto&x_2844){return x_2844;});}()))){return not([&](){ReadMetric(x_2833);return OptionMatch(HashtblFind(OptionMatch(Some(x_2832),[&](const auto&x_2847){return Panic();},[&](const auto&x_2846){return x_2846;}).var,"disabled"),[&](const auto&x_2849){return Panic();},[&](const auto&x_2848){return x_2848;});}());}else{return VBool(false);}else{return VBool(false);}else{return VBool(false);};}auto var_modified_x_688(const auto&x_2850){return [&](const auto&x_2851){return MakeUnit();};}auto eval_expr_x_685(const auto&x_2859){return [&](const auto&x_2860){if (BoolOfValue(eq(VString(x_2859.name),VString("NOSCRIPT")))){return VBool(true);}else{if (BoolOfValue(VBool(IsSome(x_2859.parent)))){ReadMetric(x_2860);return OptionMatch(HashtblFind(OptionMatch(x_2859.parent,[&](const auto&x_2862){return Panic();},[&](const auto&x_2861){return x_2861;}).var,"disabled"),[&](const auto&x_2864){return Panic();},[&](const auto&x_2863){return x_2863;});}else{return VBool(false);};}auto var_modified_x_683(const auto&x_2865){return [&](const auto&x_2866){return MakeUnit();};}auto eval_expr_x_680(const auto&x_2874){return [&](const auto&x_2875){if (BoolOfValue(VBool(IsSome(x_2874.parent)))){if (BoolOfValue([&](){ReadMetric(x_2875);return OptionMatch(HashtblFind(OptionMatch(x_2874.parent,[&](const auto&x_2877){return Panic();},[&](const auto&x_2876){return x_2876;}).var,"is_svg_block"),[&](const auto&x_2879){return Panic();},[&](const auto&x_2878){return x_2878;});}())){return VBool(true);}else{ReadMetric(x_2875);return OptionMatch(HashtblFind(OptionMatch(x_2874.parent,[&](const auto&x_2881){return Panic();},[&](const auto&x_2880){return x_2880;}).var,"inside_svg"),[&](const auto&x_2883){return Panic();},[&](const auto&x_2882){return x_2882;});}else{return VBool(false);};}auto var_modified_x_678(const auto&x_2884){return [&](const auto&x_2885){return MakeUnit();};}auto eval_expr_x_675(const auto&x_2887){return [&](const auto&x_2888){return eq(VString(x_2887.name),VString("svg"));};}auto var_modified_x_673(const auto&x_2889){return [&](const auto&x_2890){return MakeUnit();};}auto eval_expr_x_670(const auto&x_2899){return [&](const auto&x_2900){return neq([&](){ReadMetric(x_2900);return OptionMatch(HashtblFind(OptionMatch(Some(x_2899),[&](const auto&x_2902){return Panic();},[&](const auto&x_2901){return x_2901;}).var,"height_attr_expr"),[&](const auto&x_2904){return Panic();},[&](const auto&x_2903){return x_2903;});}(),VString("auto"));};}auto var_modified_x_668(const auto&x_2905){return [&](const auto&x_2906){return MakeUnit();};}auto eval_expr_x_665(const auto&x_2914){return [&](const auto&x_2915){if (BoolOfValue(not(VBool(IsSome(HashtblFind(x_2914.attr,"height")))))){return VString("auto");}else{if (BoolOfValue((BoolOfValue(string_is_float([&](){ReadMetric(x_2915);return OptionMatch(HashtblFind(x_2914.attr,"height"),[&](const auto&x_2917){return Panic();},[&](const auto&x_2916){return x_2916;});}())))?(VBool(true)):(has_suffix([&](){ReadMetric(x_2915);return OptionMatch(HashtblFind(x_2914.attr,"height"),[&](const auto&x_2919){return Panic();},[&](const auto&x_2918){return x_2918;});}(),VString("%"))))){ReadMetric(x_2915);return OptionMatch(HashtblFind(x_2914.attr,"height"),[&](const auto&x_2925){return Panic();},[&](const auto&x_2924){return x_2924;});}else{if (BoolOfValue(eq([&](){ReadMetric(x_2915);return OptionMatch(HashtblFind(x_2914.attr,"height"),[&](const auto&x_2921){return Panic();},[&](const auto&x_2920){return x_2920;});}(),VString("Auto")))){return VString("auto");}else{return Panic();};}auto var_modified_x_663(const auto&x_2926){return [&](const auto&x_2927){return MakeUnit();};}auto eval_expr_x_660(const auto&x_2937){return [&](const auto&x_2938){return neq([&](){ReadMetric(x_2938);return OptionMatch(HashtblFind(OptionMatch(Some(x_2937),[&](const auto&x_2940){return Panic();},[&](const auto&x_2939){return x_2939;}).var,"width_attr_expr"),[&](const auto&x_2942){return Panic();},[&](const auto&x_2941){return x_2941;});}(),VString("auto"));};}auto var_modified_x_658(const auto&x_2943){return [&](const auto&x_2944){return MakeUnit();};}auto eval_expr_x_655(const auto&x_2952){return [&](const auto&x_2953){if (BoolOfValue(not(VBool(IsSome(HashtblFind(x_2952.attr,"width")))))){return VString("auto");}else{if (BoolOfValue((BoolOfValue(string_is_float([&](){ReadMetric(x_2953);return OptionMatch(HashtblFind(x_2952.attr,"width"),[&](const auto&x_2955){return Panic();},[&](const auto&x_2954){return x_2954;});}())))?(VBool(true)):(has_suffix([&](){ReadMetric(x_2953);return OptionMatch(HashtblFind(x_2952.attr,"width"),[&](const auto&x_2957){return Panic();},[&](const auto&x_2956){return x_2956;});}(),VString("%"))))){ReadMetric(x_2953);return OptionMatch(HashtblFind(x_2952.attr,"width"),[&](const auto&x_2963){return Panic();},[&](const auto&x_2962){return x_2962;});}else{if (BoolOfValue(eq([&](){ReadMetric(x_2953);return OptionMatch(HashtblFind(x_2952.attr,"width"),[&](const auto&x_2959){return Panic();},[&](const auto&x_2958){return x_2958;});}(),VString("Auto")))){return VString("auto");}else{return Panic();};}auto var_modified_x_653(const auto&x_2964){return [&](const auto&x_2965){return MakeUnit();};}auto eval_expr_x_650(const auto&x_2968){return [&](const auto&x_2969){if (BoolOfValue((BoolOfValue(VBool(IsSome(x_2968.parent))))?((BoolOfValue(eq([&](){ReadMetric(x_2969);return OptionMatch(HashtblFind(OptionMatch(x_2968.parent,[&](const auto&x_2971){return Panic();},[&](const auto&x_2970){return x_2970;}).var,"display"),[&](const auto&x_2973){return Panic();},[&](const auto&x_2972){return x_2972;});}(),VString("flex"))))?(VBool(true)):(eq([&](){ReadMetric(x_2969);return OptionMatch(HashtblFind(OptionMatch(x_2968.parent,[&](const auto&x_2975){return Panic();},[&](const auto&x_2974){return x_2974;}).var,"display"),[&](const auto&x_2977){return Panic();},[&](const auto&x_2976){return x_2976;});}(),VString("inline-flex")))):(VBool(false)))){if (BoolOfValue((BoolOfValue(eq([&](){ReadMetric(x_2969);return OptionMatch(HashtblFind(OptionMatch(x_2968.parent,[&](const auto&x_2979){return Panic();},[&](const auto&x_2978){return x_2978;}).var,"flex_direction"),[&](const auto&x_2981){return Panic();},[&](const auto&x_2980){return x_2980;});}(),VString("column"))))?(VBool(true)):(eq([&](){ReadMetric(x_2969);return OptionMatch(HashtblFind(OptionMatch(x_2968.parent,[&](const auto&x_2983){return Panic();},[&](const auto&x_2982){return x_2982;}).var,"flex_direction"),[&](const auto&x_2985){return Panic();},[&](const auto&x_2984){return x_2984;});}(),VString("column-reverse"))))){return VBool(true);}else{if (BoolOfValue(eq([&](){ReadMetric(x_2969);return OptionMatch(HashtblFind(OptionMatch(x_2968.parent,[&](const auto&x_2987){return Panic();},[&](const auto&x_2986){return x_2986;}).var,"flex_direction"),[&](const auto&x_2989){return Panic();},[&](const auto&x_2988){return x_2988;});}(),VString("row")))){return VBool(false);}else{return Panic();}else{return VBool(false);};}auto var_modified_x_648(const auto&x_2994){return [&](const auto&x_2995){return MakeUnit();};}auto eval_expr_x_645(const auto&x_2999){return [&](const auto&x_3000){if (BoolOfValue((BoolOfValue(VBool(IsSome(x_2999.parent))))?((BoolOfValue(eq([&](){ReadMetric(x_3000);return OptionMatch(HashtblFind(OptionMatch(x_2999.parent,[&](const auto&x_3002){return Panic();},[&](const auto&x_3001){return x_3001;}).var,"display"),[&](const auto&x_3004){return Panic();},[&](const auto&x_3003){return x_3003;});}(),VString("flex"))))?(VBool(true)):(eq([&](){ReadMetric(x_3000);return OptionMatch(HashtblFind(OptionMatch(x_2999.parent,[&](const auto&x_3006){return Panic();},[&](const auto&x_3005){return x_3005;}).var,"display"),[&](const auto&x_3008){return Panic();},[&](const auto&x_3007){return x_3007;});}(),VString("inline-flex")))):(VBool(false)))){if (BoolOfValue(eq([&](){ReadMetric(x_3000);return OptionMatch(HashtblFind(OptionMatch(x_2999.parent,[&](const auto&x_3010){return Panic();},[&](const auto&x_3009){return x_3009;}).var,"flex_direction"),[&](const auto&x_3012){return Panic();},[&](const auto&x_3011){return x_3011;});}(),VString("row")))){return VBool(true);}else{if (BoolOfValue((BoolOfValue(eq([&](){ReadMetric(x_3000);return OptionMatch(HashtblFind(OptionMatch(x_2999.parent,[&](const auto&x_3014){return Panic();},[&](const auto&x_3013){return x_3013;}).var,"flex_direction"),[&](const auto&x_3016){return Panic();},[&](const auto&x_3015){return x_3015;});}(),VString("column"))))?(VBool(true)):(eq([&](){ReadMetric(x_3000);return OptionMatch(HashtblFind(OptionMatch(x_2999.parent,[&](const auto&x_3018){return Panic();},[&](const auto&x_3017){return x_3017;}).var,"flex_direction"),[&](const auto&x_3020){return Panic();},[&](const auto&x_3019){return x_3019;});}(),VString("column-reverse"))))){return VBool(false);}else{return Panic();}else{return VBool(false);};}auto var_modified_x_643(const auto&x_3025){return [&](const auto&x_3026){return MakeUnit();};}auto eval_expr_x_640(const auto&x_3033){return [&](const auto&x_3034){if (BoolOfValue(VBool(IsSome(HashtblFind(x_3033.prop,"flex-direction"))))){ReadMetric(x_3034);return OptionMatch(HashtblFind(x_3033.prop,"flex-direction"),[&](const auto&x_3036){return Panic();},[&](const auto&x_3035){return x_3035;});}else{return VString("");};}auto var_modified_x_638(const auto&x_3037){return [&](const auto&x_3038){OptionMatch(x_3037.next,[&](const auto&x_3040){return Nil();},[&](const auto&x_3039){return Cons(x_3039,Nil());});MakeUnit();MakeUnit();return MakeUnit();};}auto eval_expr_x_635(const auto&x_3043){return [&](const auto&x_3044){return plus((BoolOfValue(VBool(IsSome(x_3043.prev))))?([&](){ReadMetric(x_3044);return OptionMatch(HashtblFind(OptionMatch(x_3043.prev,[&](const auto&x_3046){return Panic();},[&](const auto&x_3045){return x_3045;}).var,"flex_shrink_sum"),[&](const auto&x_3048){return Panic();},[&](const auto&x_3047){return x_3047;});}()):(VFloat(0.)),[&](){ReadMetric(x_3044);return OptionMatch(HashtblFind(OptionMatch(Some(x_3043),[&](const auto&x_3050){return Panic();},[&](const auto&x_3049){return x_3049;}).var,"flex_shrink"),[&](const auto&x_3052){return Panic();},[&](const auto&x_3051){return x_3051;});}());};}auto var_modified_x_633(const auto&x_3053){return [&](const auto&x_3054){OptionMatch(x_3053.next,[&](const auto&x_3056){return Nil();},[&](const auto&x_3055){return Cons(x_3055,Nil());});MakeUnit();MakeUnit();return MakeUnit();};}auto eval_expr_x_630(const auto&x_3059){return [&](const auto&x_3060){return plus((BoolOfValue(VBool(IsSome(x_3059.prev))))?([&](){ReadMetric(x_3060);return OptionMatch(HashtblFind(OptionMatch(x_3059.prev,[&](const auto&x_3062){return Panic();},[&](const auto&x_3061){return x_3061;}).var,"flex_grow_sum"),[&](const auto&x_3064){return Panic();},[&](const auto&x_3063){return x_3063;});}()):(VFloat(0.)),[&](){ReadMetric(x_3060);return OptionMatch(HashtblFind(OptionMatch(Some(x_3059),[&](const auto&x_3066){return Panic();},[&](const auto&x_3065){return x_3065;}).var,"flex_grow"),[&](const auto&x_3068){return Panic();},[&](const auto&x_3067){return x_3067;});}());};}auto var_modified_x_628(const auto&x_3069){return [&](const auto&x_3070){return MakeUnit();};}auto eval_expr_x_625(const auto&x_3073){return [&](const auto&x_3074){if (BoolOfValue(VBool(IsSome(HashtblFind(x_3073.prop,"flex-shrink"))))){return string_to_float([&](){ReadMetric(x_3074);return OptionMatch(HashtblFind(x_3073.prop,"flex-shrink"),[&](const auto&x_3076){return Panic();},[&](const auto&x_3075){return x_3075;});}());}else{return VFloat(0.);};}auto var_modified_x_623(const auto&x_3077){return [&](const auto&x_3078){return MakeUnit();};}auto eval_expr_x_620(const auto&x_3081){return [&](const auto&x_3082){if (BoolOfValue(VBool(IsSome(HashtblFind(x_3081.prop,"flex-grow"))))){return string_to_float([&](){ReadMetric(x_3082);return OptionMatch(HashtblFind(x_3081.prop,"flex-grow"),[&](const auto&x_3084){return Panic();},[&](const auto&x_3083){return x_3083;});}());}else{return VFloat(0.);};}auto var_modified_x_618(const auto&x_3085){return [&](const auto&x_3086){return MakeUnit();};}auto eval_expr_x_615(const auto&x_3092){return [&](const auto&x_3093){if (BoolOfValue(VBool(IsSome(HashtblFind(x_3092.prop,"position"))))){ReadMetric(x_3093);return OptionMatch(HashtblFind(x_3092.prop,"position"),[&](const auto&x_3095){return Panic();},[&](const auto&x_3094){return x_3094;});}else{return VString("static");};}auto var_modified_x_613(const auto&x_3096){return [&](const auto&x_3097){return MakeUnit();};}auto eval_expr_x_610(const auto&x_3123){return [&](const auto&x_3124){if (BoolOfValue(VBool(IsSome(HashtblFind(x_3123.prop,"display"))))){ReadMetric(x_3124);return OptionMatch(HashtblFind(x_3123.prop,"display"),[&](const auto&x_3126){return Panic();},[&](const auto&x_3125){return x_3125;});}else{return VString("block");};}auto var_modified_x_606(const auto&x_3127){return [&](const auto&x_3128){if (IsNone(x_3127.next)){OptionMatch(x_3127.parent,[&](const auto&x_3130){return Nil();},[&](const auto&x_3129){return Cons(x_3129,Nil());});}else{Nil();OptionMatch(x_3127.next,[&](const auto&x_3133){return Nil();},[&](const auto&x_3132){return Cons(x_3132,Nil());});OptionMatch(x_3127.next,[&](const auto&x_3136){return Nil();},[&](const auto&x_3135){return Cons(x_3135,Nil());});MakeUnit();MakeUnit();return MakeUnit();};}auto eval_expr_x_603(const auto&x_3138){return [&](const auto&x_3139){if (BoolOfValue(VBool(IsSome(x_3138.prev)))){if (BoolOfValue([&](){ReadMetric(x_3139);return OptionMatch(HashtblFind(OptionMatch(Some(x_3138),[&](const auto&x_3149){return Panic();},[&](const auto&x_3148){return x_3148;}).var,"line_break"),[&](const auto&x_3151){return Panic();},[&](const auto&x_3150){return x_3150;});}())){return plus([&](){ReadMetric(x_3139);return OptionMatch(HashtblFind(OptionMatch(x_3138.prev,[&](const auto&x_3157){return Panic();},[&](const auto&x_3156){return x_3156;}).var,"finished_intrinsic_height_sum"),[&](const auto&x_3159){return Panic();},[&](const auto&x_3158){return x_3158;});}(),plus([&](){ReadMetric(x_3139);return OptionMatch(HashtblFind(OptionMatch(x_3138.prev,[&](const auto&x_3161){return Panic();},[&](const auto&x_3160){return x_3160;}).var,"intrinsic_current_line_height"),[&](const auto&x_3163){return Panic();},[&](const auto&x_3162){return x_3162;});}(),[&](){ReadMetric(x_3139);return OptionMatch(HashtblFind(OptionMatch(Some(x_3138),[&](const auto&x_3165){return Panic();},[&](const auto&x_3164){return x_3164;}).var,"intrinsic_height_external"),[&](const auto&x_3167){return Panic();},[&](const auto&x_3166){return x_3166;});}()));}else{ReadMetric(x_3139);return OptionMatch(HashtblFind(OptionMatch(x_3138.prev,[&](const auto&x_3153){return Panic();},[&](const auto&x_3152){return x_3152;}).var,"finished_intrinsic_height_sum"),[&](const auto&x_3155){return Panic();},[&](const auto&x_3154){return x_3154;});}else{if (BoolOfValue([&](){ReadMetric(x_3139);return OptionMatch(HashtblFind(OptionMatch(Some(x_3138),[&](const auto&x_3141){return Panic();},[&](const auto&x_3140){return x_3140;}).var,"line_break"),[&](const auto&x_3143){return Panic();},[&](const auto&x_3142){return x_3142;});}())){ReadMetric(x_3139);return OptionMatch(HashtblFind(OptionMatch(Some(x_3138),[&](const auto&x_3145){return Panic();},[&](const auto&x_3144){return x_3144;}).var,"intrinsic_height_external"),[&](const auto&x_3147){return Panic();},[&](const auto&x_3146){return x_3146;});}else{return VFloat(0.);};}auto var_modified_x_601(const auto&x_3168){return [&](const auto&x_3169){if (IsNone(x_3168.next)){OptionMatch(x_3168.parent,[&](const auto&x_3171){return Nil();},[&](const auto&x_3170){return Cons(x_3170,Nil());});}else{Nil();OptionMatch(x_3168.next,[&](const auto&x_3174){return Nil();},[&](const auto&x_3173){return Cons(x_3173,Nil());});OptionMatch(x_3168.next,[&](const auto&x_3177){return Nil();},[&](const auto&x_3176){return Cons(x_3176,Nil());});MakeUnit();MakeUnit();return MakeUnit();};}auto eval_expr_x_598(const auto&x_3179){return [&](const auto&x_3180){if (BoolOfValue([&](){ReadMetric(x_3180);return OptionMatch(HashtblFind(OptionMatch(Some(x_3179),[&](const auto&x_3182){return Panic();},[&](const auto&x_3181){return x_3181;}).var,"line_break"),[&](const auto&x_3184){return Panic();},[&](const auto&x_3183){return x_3183;});}())){return VFloat(0.);}else{return max([&](){ReadMetric(x_3180);return OptionMatch(HashtblFind(OptionMatch(Some(x_3179),[&](const auto&x_3186){return Panic();},[&](const auto&x_3185){return x_3185;}).var,"intrinsic_height_external"),[&](const auto&x_3188){return Panic();},[&](const auto&x_3187){return x_3187;});}(),(BoolOfValue(VBool(IsSome(x_3179.prev))))?([&](){ReadMetric(x_3180);return OptionMatch(HashtblFind(OptionMatch(x_3179.prev,[&](const auto&x_3190){return Panic();},[&](const auto&x_3189){return x_3189;}).var,"intrinsic_current_line_height"),[&](const auto&x_3192){return Panic();},[&](const auto&x_3191){return x_3191;});}()):(VFloat(0.)));};}auto var_modified_x_596(const auto&x_3193){return [&](const auto&x_3194){OptionMatch(x_3193.next,[&](const auto&x_3196){return Nil();},[&](const auto&x_3195){return Cons(x_3195,Nil());});MakeUnit();MakeUnit();if (IsNone(x_3193.next)){OptionMatch(x_3193.parent,[&](const auto&x_3199){return Nil();},[&](const auto&x_3198){return Cons(x_3198,Nil());});}else{Nil();MakeUnit();MakeUnit();return MakeUnit();};}auto eval_expr_x_593(const auto&x_3201){return [&](const auto&x_3202){return plus((BoolOfValue(VBool(IsSome(x_3201.prev))))?([&](){ReadMetric(x_3202);return OptionMatch(HashtblFind(OptionMatch(x_3201.prev,[&](const auto&x_3204){return Panic();},[&](const auto&x_3203){return x_3203;}).var,"intrinsic_height_sum"),[&](const auto&x_3206){return Panic();},[&](const auto&x_3205){return x_3205;});}()):(VFloat(0.)),[&](){ReadMetric(x_3202);return OptionMatch(HashtblFind(OptionMatch(Some(x_3201),[&](const auto&x_3208){return Panic();},[&](const auto&x_3207){return x_3207;}).var,"intrinsic_height_external"),[&](const auto&x_3210){return Panic();},[&](const auto&x_3209){return x_3209;});}());};}auto var_modified_x_591(const auto&x_3211){return [&](const auto&x_3212){return MakeUnit();};}auto eval_expr_x_588(const auto&x_3217){return [&](const auto&x_3218){if (BoolOfValue(eq([&](){ReadMetric(x_3218);return OptionMatch(HashtblFind(OptionMatch(Some(x_3217),[&](const auto&x_3220){return Panic();},[&](const auto&x_3219){return x_3219;}).var,"position"),[&](const auto&x_3222){return Panic();},[&](const auto&x_3221){return x_3221;});}(),VString("absolute")))){return VFloat(0.);}else{ReadMetric(x_3218);return OptionMatch(HashtblFind(OptionMatch(Some(x_3217),[&](const auto&x_3224){return Panic();},[&](const auto&x_3223){return x_3223;}).var,"intrinsic_height_internal"),[&](const auto&x_3226){return Panic();},[&](const auto&x_3225){return x_3225;});};}auto var_modified_x_586(const auto&x_3227){return [&](const auto&x_3228){return MakeUnit();};}auto eval_expr_x_583(const auto&x_3233){return [&](const auto&x_3234){if (BoolOfValue(eq([&](){ReadMetric(x_3234);return OptionMatch(HashtblFind(OptionMatch(Some(x_3233),[&](const auto&x_3236){return Panic();},[&](const auto&x_3235){return x_3235;}).var,"display"),[&](const auto&x_3238){return Panic();},[&](const auto&x_3237){return x_3237;});}(),VString("none")))){return VFloat(0.);}else{if (BoolOfValue([&](){ReadMetric(x_3234);return OptionMatch(HashtblFind(OptionMatch(Some(x_3233),[&](const auto&x_3240){return Panic();},[&](const auto&x_3239){return x_3239;}).var,"inside_svg"),[&](const auto&x_3242){return Panic();},[&](const auto&x_3241){return x_3241;});}())){return VFloat(0.);}else{if (BoolOfValue([&](){ReadMetric(x_3234);return OptionMatch(HashtblFind(OptionMatch(Some(x_3233),[&](const auto&x_3244){return Panic();},[&](const auto&x_3243){return x_3243;}).var,"disabled"),[&](const auto&x_3246){return Panic();},[&](const auto&x_3245){return x_3245;});}())){return VFloat(0.);}else{if (BoolOfValue((BoolOfValue(neq([&](){ReadMetric(x_3234);return OptionMatch(HashtblFind(OptionMatch(Some(x_3233),[&](const auto&x_3248){return Panic();},[&](const auto&x_3247){return x_3247;}).var,"height_expr"),[&](const auto&x_3250){return Panic();},[&](const auto&x_3249){return x_3249;});}(),VString("auto"))))?((BoolOfValue(not(has_suffix([&](){ReadMetric(x_3234);return OptionMatch(HashtblFind(OptionMatch(Some(x_3233),[&](const auto&x_3252){return Panic();},[&](const auto&x_3251){return x_3251;}).var,"height_expr"),[&](const auto&x_3254){return Panic();},[&](const auto&x_3253){return x_3253;});}(),VString("%")))))?(neq([&](){ReadMetric(x_3234);return OptionMatch(HashtblFind(OptionMatch(Some(x_3233),[&](const auto&x_3256){return Panic();},[&](const auto&x_3255){return x_3255;}).var,"height_expr"),[&](const auto&x_3258){return Panic();},[&](const auto&x_3257){return x_3257;});}(),VString("fit-content"))):(VBool(false))):(VBool(false)))){if (BoolOfValue(has_suffix([&](){ReadMetric(x_3234);return OptionMatch(HashtblFind(OptionMatch(Some(x_3233),[&](const auto&x_3352){return Panic();},[&](const auto&x_3351){return x_3351;}).var,"height_expr"),[&](const auto&x_3354){return Panic();},[&](const auto&x_3353){return x_3353;});}(),VString("px")))){return string_to_float(strip_suffix([&](){ReadMetric(x_3234);return OptionMatch(HashtblFind(OptionMatch(Some(x_3233),[&](const auto&x_3376){return Panic();},[&](const auto&x_3375){return x_3375;}).var,"height_expr"),[&](const auto&x_3378){return Panic();},[&](const auto&x_3377){return x_3377;});}(),VString("px")));}else{if (BoolOfValue(has_suffix([&](){ReadMetric(x_3234);return OptionMatch(HashtblFind(OptionMatch(Some(x_3233),[&](const auto&x_3356){return Panic();},[&](const auto&x_3355){return x_3355;}).var,"height_expr"),[&](const auto&x_3358){return Panic();},[&](const auto&x_3357){return x_3357;});}(),VString("ch")))){return string_to_float(strip_suffix([&](){ReadMetric(x_3234);return OptionMatch(HashtblFind(OptionMatch(Some(x_3233),[&](const auto&x_3372){return Panic();},[&](const auto&x_3371){return x_3371;}).var,"height_expr"),[&](const auto&x_3374){return Panic();},[&](const auto&x_3373){return x_3373;});}(),VString("ch")));}else{if (BoolOfValue(has_suffix([&](){ReadMetric(x_3234);return OptionMatch(HashtblFind(OptionMatch(Some(x_3233),[&](const auto&x_3360){return Panic();},[&](const auto&x_3359){return x_3359;}).var,"height_expr"),[&](const auto&x_3362){return Panic();},[&](const auto&x_3361){return x_3361;});}(),VString("lh")))){return string_to_float(strip_suffix([&](){ReadMetric(x_3234);return OptionMatch(HashtblFind(OptionMatch(Some(x_3233),[&](const auto&x_3368){return Panic();},[&](const auto&x_3367){return x_3367;}).var,"height_expr"),[&](const auto&x_3370){return Panic();},[&](const auto&x_3369){return x_3369;});}(),VString("lh")));}else{return Panic();}else{return plus([&](){ReadMetric(x_3234);return OptionMatch(HashtblFind(OptionMatch(Some(x_3233),[&](const auto&x_3260){return Panic();},[&](const auto&x_3259){return x_3259;}).var,"children_intrinsic_height"),[&](const auto&x_3262){return Panic();},[&](const auto&x_3261){return x_3261;});}(),(BoolOfValue(eq(VString(x_3233.name),VString("#text"))))?((BoolOfValue(VBool(IsSome(ListHead(x_3233.children)))))?(Panic()):(VFloat(10.))):((BoolOfValue([&](){ReadMetric(x_3234);return OptionMatch(HashtblFind(OptionMatch(Some(x_3233),[&](const auto&x_3264){return Panic();},[&](const auto&x_3263){return x_3263;}).var,"is_default_case"),[&](const auto&x_3266){return Panic();},[&](const auto&x_3265){return x_3265;});}()))?(VFloat(0.)):((BoolOfValue(eq(VString(x_3233.name),VString("BR"))))?((BoolOfValue(VBool(IsSome(ListHead(x_3233.children)))))?(Panic()):(VFloat(0.))):((BoolOfValue(eq(VString(x_3233.name),VString("INPUT"))))?(VFloat(10.)):((BoolOfValue(eq(VString(x_3233.name),VString("svg"))))?((BoolOfValue((BoolOfValue([&](){ReadMetric(x_3234);return OptionMatch(HashtblFind(OptionMatch(Some(x_3233),[&](const auto&x_3324){return Panic();},[&](const auto&x_3323){return x_3323;}).var,"has_height_attr"),[&](const auto&x_3326){return Panic();},[&](const auto&x_3325){return x_3325;});}()))?(string_is_float([&](){ReadMetric(x_3234);return OptionMatch(HashtblFind(OptionMatch(Some(x_3233),[&](const auto&x_3328){return Panic();},[&](const auto&x_3327){return x_3327;}).var,"height_attr_expr"),[&](const auto&x_3330){return Panic();},[&](const auto&x_3329){return x_3329;});}())):(VBool(false))))?(string_to_float([&](){ReadMetric(x_3234);return OptionMatch(HashtblFind(OptionMatch(Some(x_3233),[&](const auto&x_3348){return Panic();},[&](const auto&x_3347){return x_3347;}).var,"height_attr_expr"),[&](const auto&x_3350){return Panic();},[&](const auto&x_3349){return x_3349;});}())):((BoolOfValue(VBool(IsSome(HashtblFind(x_3233.attr,"viewBox")))))?(string_to_float(nth_by_sep([&](){ReadMetric(x_3234);return OptionMatch(HashtblFind(x_3233.attr,"viewBox"),[&](const auto&x_3346){return Panic();},[&](const auto&x_3345){return x_3345;});}(),VString(" "),VInt(3)))):((BoolOfValue((BoolOfValue([&](){ReadMetric(x_3234);return OptionMatch(HashtblFind(OptionMatch(Some(x_3233),[&](const auto&x_3332){return Panic();},[&](const auto&x_3331){return x_3331;}).var,"has_height_attr"),[&](const auto&x_3334){return Panic();},[&](const auto&x_3333){return x_3333;});}()))?((BoolOfValue(has_suffix([&](){ReadMetric(x_3234);return OptionMatch(HashtblFind(OptionMatch(Some(x_3233),[&](const auto&x_3336){return Panic();},[&](const auto&x_3335){return x_3335;}).var,"height_attr_expr"),[&](const auto&x_3338){return Panic();},[&](const auto&x_3337){return x_3337;});}(),VString("%"))))?(VBool(IsSome(HashtblFind(x_3233.attr,"viewBox")))):(VBool(false))):(VBool(false))))?(mult(string_to_float(nth_by_sep([&](){ReadMetric(x_3234);return OptionMatch(HashtblFind(x_3233.attr,"viewBox"),[&](const auto&x_3340){return Panic();},[&](const auto&x_3339){return x_3339;});}(),VString(" "),VInt(3))),divide(string_to_float(strip_suffix([&](){ReadMetric(x_3234);return OptionMatch(HashtblFind(OptionMatch(Some(x_3233),[&](const auto&x_3342){return Panic();},[&](const auto&x_3341){return x_3341;}).var,"height_attr_expr"),[&](const auto&x_3344){return Panic();},[&](const auto&x_3343){return x_3343;});}(),VString("%"))),VFloat(100.)))):(Panic())))):((BoolOfValue(eq(VString(x_3233.name),VString("IMG"))))?((BoolOfValue([&](){ReadMetric(x_3234);return OptionMatch(HashtblFind(OptionMatch(Some(x_3233),[&](const auto&x_3284){return Panic();},[&](const auto&x_3283){return x_3283;}).var,"has_height_attr"),[&](const auto&x_3286){return Panic();},[&](const auto&x_3285){return x_3285;});}()))?(string_to_float([&](){ReadMetric(x_3234);return OptionMatch(HashtblFind(OptionMatch(Some(x_3233),[&](const auto&x_3320){return Panic();},[&](const auto&x_3319){return x_3319;}).var,"height_attr_expr"),[&](const auto&x_3322){return Panic();},[&](const auto&x_3321){return x_3321;});}())):((BoolOfValue((BoolOfValue(VBool(IsSome(HashtblFind(x_3233.attr,"image_height")))))?(not([&](){ReadMetric(x_3234);return OptionMatch(HashtblFind(OptionMatch(Some(x_3233),[&](const auto&x_3288){return Panic();},[&](const auto&x_3287){return x_3287;}).var,"has_width_attr"),[&](const auto&x_3290){return Panic();},[&](const auto&x_3289){return x_3289;});}())):(VBool(false))))?(int_to_float([&](){ReadMetric(x_3234);return OptionMatch(HashtblFind(x_3233.attr,"image_height"),[&](const auto&x_3318){return Panic();},[&](const auto&x_3317){return x_3317;});}())):((BoolOfValue((BoolOfValue([&](){ReadMetric(x_3234);return OptionMatch(HashtblFind(OptionMatch(Some(x_3233),[&](const auto&x_3292){return Panic();},[&](const auto&x_3291){return x_3291;}).var,"has_width_attr"),[&](const auto&x_3294){return Panic();},[&](const auto&x_3293){return x_3293;});}()))?((BoolOfValue(not([&](){ReadMetric(x_3234);return OptionMatch(HashtblFind(OptionMatch(Some(x_3233),[&](const auto&x_3296){return Panic();},[&](const auto&x_3295){return x_3295;}).var,"has_height_attr"),[&](const auto&x_3298){return Panic();},[&](const auto&x_3297){return x_3297;});}())))?((BoolOfValue(VBool(IsSome(HashtblFind(x_3233.attr,"image_width")))))?(VBool(IsSome(HashtblFind(x_3233.attr,"image_height")))):(VBool(false))):(VBool(false))):(VBool(false))))?((BoolOfValue(neq([&](){ReadMetric(x_3234);return OptionMatch(HashtblFind(x_3233.attr,"image_width"),[&](const auto&x_3308){return Panic();},[&](const auto&x_3307){return x_3307;});}(),VInt(0))))?(mult(string_to_float([&](){ReadMetric(x_3234);return OptionMatch(HashtblFind(OptionMatch(Some(x_3233),[&](const auto&x_3310){return Panic();},[&](const auto&x_3309){return x_3309;}).var,"width_attr_expr"),[&](const auto&x_3312){return Panic();},[&](const auto&x_3311){return x_3311;});}()),divide(int_to_float([&](){ReadMetric(x_3234);return OptionMatch(HashtblFind(x_3233.attr,"image_height"),[&](const auto&x_3314){return Panic();},[&](const auto&x_3313){return x_3313;});}()),int_to_float([&](){ReadMetric(x_3234);return OptionMatch(HashtblFind(x_3233.attr,"image_width"),[&](const auto&x_3316){return Panic();},[&](const auto&x_3315){return x_3315;});}())))):(VFloat(0.))):(Panic())))):((BoolOfValue(eq(VString(x_3233.name),VString("IFRAME"))))?((BoolOfValue([&](){ReadMetric(x_3234);return OptionMatch(HashtblFind(OptionMatch(Some(x_3233),[&](const auto&x_3276){return Panic();},[&](const auto&x_3275){return x_3275;}).var,"has_height_attr"),[&](const auto&x_3278){return Panic();},[&](const auto&x_3277){return x_3277;});}()))?(Panic()):(VFloat(150.))):((BoolOfValue(eq(VString(x_3233.name),VString("TEXTAREA"))))?(VFloat(100.)):((BoolOfValue(eq(VString(x_3233.name),VString("VIDEO"))))?((BoolOfValue([&](){ReadMetric(x_3234);return OptionMatch(HashtblFind(OptionMatch(Some(x_3233),[&](const auto&x_3268){return Panic();},[&](const auto&x_3267){return x_3267;}).var,"has_height_attr"),[&](const auto&x_3270){return Panic();},[&](const auto&x_3269){return x_3269;});}()))?(Panic()):(VFloat(150.))):(Panic()))))))))));};}auto var_modified_x_581(const auto&x_3379){return [&](const auto&x_3380){return MakeUnit();};}auto eval_expr_x_578(const auto&x_3382){return [&](const auto&x_3383){if (BoolOfValue((BoolOfValue(eq([&](){ReadMetric(x_3383);return OptionMatch(HashtblFind(OptionMatch(Some(x_3382),[&](const auto&x_3385){return Panic();},[&](const auto&x_3384){return x_3384;}).var,"display"),[&](const auto&x_3387){return Panic();},[&](const auto&x_3386){return x_3386;});}(),VString("none"))))?(VBool(true)):((BoolOfValue([&](){ReadMetric(x_3383);return OptionMatch(HashtblFind(OptionMatch(Some(x_3382),[&](const auto&x_3389){return Panic();},[&](const auto&x_3388){return x_3388;}).var,"inside_svg"),[&](const auto&x_3391){return Panic();},[&](const auto&x_3390){return x_3390;});}()))?(VBool(true)):([&](){ReadMetric(x_3383);return OptionMatch(HashtblFind(OptionMatch(Some(x_3382),[&](const auto&x_3393){return Panic();},[&](const auto&x_3392){return x_3392;}).var,"disabled"),[&](const auto&x_3395){return Panic();},[&](const auto&x_3394){return x_3394;});}())))){return VBool(true);}else{if (BoolOfValue((BoolOfValue(VBool(IsSome(x_3382.parent))))?([&](){ReadMetric(x_3383);return OptionMatch(HashtblFind(OptionMatch(x_3382.parent,[&](const auto&x_3397){return Panic();},[&](const auto&x_3396){return x_3396;}).var,"is_flex_column"),[&](const auto&x_3399){return Panic();},[&](const auto&x_3398){return x_3398;});}()):(VBool(false)))){return VBool(false);}else{if (BoolOfValue((BoolOfValue(eq([&](){ReadMetric(x_3383);return OptionMatch(HashtblFind(OptionMatch(Some(x_3382),[&](const auto&x_3401){return Panic();},[&](const auto&x_3400){return x_3400;}).var,"height_expr"),[&](const auto&x_3403){return Panic();},[&](const auto&x_3402){return x_3402;});}(),VString("auto"))))?(VBool(true)):((BoolOfValue(has_suffix([&](){ReadMetric(x_3383);return OptionMatch(HashtblFind(OptionMatch(Some(x_3382),[&](const auto&x_3405){return Panic();},[&](const auto&x_3404){return x_3404;}).var,"height_expr"),[&](const auto&x_3407){return Panic();},[&](const auto&x_3406){return x_3406;});}(),VString("px"))))?(VBool(true)):((BoolOfValue(has_suffix([&](){ReadMetric(x_3383);return OptionMatch(HashtblFind(OptionMatch(Some(x_3382),[&](const auto&x_3409){return Panic();},[&](const auto&x_3408){return x_3408;}).var,"height_expr"),[&](const auto&x_3411){return Panic();},[&](const auto&x_3410){return x_3410;});}(),VString("ch"))))?(VBool(true)):((BoolOfValue(has_suffix([&](){ReadMetric(x_3383);return OptionMatch(HashtblFind(OptionMatch(Some(x_3382),[&](const auto&x_3413){return Panic();},[&](const auto&x_3412){return x_3412;}).var,"height_expr"),[&](const auto&x_3415){return Panic();},[&](const auto&x_3414){return x_3414;});}(),VString("lh"))))?(VBool(true)):(eq([&](){ReadMetric(x_3383);return OptionMatch(HashtblFind(OptionMatch(Some(x_3382),[&](const auto&x_3417){return Panic();},[&](const auto&x_3416){return x_3416;}).var,"height_expr"),[&](const auto&x_3419){return Panic();},[&](const auto&x_3418){return x_3418;});}(),VString("max-content")))))))){return VBool(true);}else{if (BoolOfValue((BoolOfValue(has_suffix([&](){ReadMetric(x_3383);return OptionMatch(HashtblFind(OptionMatch(Some(x_3382),[&](const auto&x_3421){return Panic();},[&](const auto&x_3420){return x_3420;}).var,"height_expr"),[&](const auto&x_3423){return Panic();},[&](const auto&x_3422){return x_3422;});}(),VString("%"))))?(VBool(true)):(eq([&](){ReadMetric(x_3383);return OptionMatch(HashtblFind(OptionMatch(Some(x_3382),[&](const auto&x_3425){return Panic();},[&](const auto&x_3424){return x_3424;}).var,"height_expr"),[&](const auto&x_3427){return Panic();},[&](const auto&x_3426){return x_3426;});}(),VString("fit-content"))))){return VBool(false);}else{return Panic();};}auto var_modified_x_576(const auto&x_3432){return [&](const auto&x_3433){return MakeUnit();};}auto eval_expr_x_573(const auto&x_3453){return [&](const auto&x_3454){if (BoolOfValue(VBool(IsSome(HashtblFind(x_3453.prop,"height"))))){ReadMetric(x_3454);return OptionMatch(HashtblFind(x_3453.prop,"height"),[&](const auto&x_3456){return Panic();},[&](const auto&x_3455){return x_3455;});}else{return VString("auto");};}auto var_modified_x_571(const auto&x_3457){return [&](const auto&x_3458){return MakeUnit();};}auto eval_expr_x_568(const auto&x_3460){return [&](const auto&x_3461){if (BoolOfValue(VBool(IsSome(ListLast(x_3460.children))))){return plus([&](){ReadMetric(x_3461);return OptionMatch(HashtblFind(OptionMatch(ListLast(x_3460.children),[&](const auto&x_3463){return Panic();},[&](const auto&x_3462){return x_3462;}).var,"finished_intrinsic_height_sum"),[&](const auto&x_3465){return Panic();},[&](const auto&x_3464){return x_3464;});}(),[&](){ReadMetric(x_3461);return OptionMatch(HashtblFind(OptionMatch(ListLast(x_3460.children),[&](const auto&x_3467){return Panic();},[&](const auto&x_3466){return x_3466;}).var,"intrinsic_current_line_height"),[&](const auto&x_3469){return Panic();},[&](const auto&x_3468){return x_3468;});}());}else{return VFloat(0.);};}auto var_modified_x_566(const auto&x_3470){return [&](const auto&x_3471){OptionMatch(x_3470.next,[&](const auto&x_3473){return Nil();},[&](const auto&x_3472){return Cons(x_3472,Nil());});MakeUnit();MakeUnit();if (IsNone(x_3470.next)){OptionMatch(x_3470.parent,[&](const auto&x_3476){return Nil();},[&](const auto&x_3475){return Cons(x_3475,Nil());});}else{Nil();MakeUnit();MakeUnit();return MakeUnit();};}auto eval_expr_x_563(const auto&x_3478){return [&](const auto&x_3479){return plus((BoolOfValue(VBool(IsSome(x_3478.prev))))?([&](){ReadMetric(x_3479);return OptionMatch(HashtblFind(OptionMatch(x_3478.prev,[&](const auto&x_3481){return Panic();},[&](const auto&x_3480){return x_3480;}).var,"intrinsic_width_sum"),[&](const auto&x_3483){return Panic();},[&](const auto&x_3482){return x_3482;});}()):(VFloat(0.)),[&](){ReadMetric(x_3479);return OptionMatch(HashtblFind(OptionMatch(Some(x_3478),[&](const auto&x_3485){return Panic();},[&](const auto&x_3484){return x_3484;}).var,"intrinsic_width_external"),[&](const auto&x_3487){return Panic();},[&](const auto&x_3486){return x_3486;});}());};}auto var_modified_x_561(const auto&x_3488){return [&](const auto&x_3489){if (IsNone(x_3488.next)){OptionMatch(x_3488.parent,[&](const auto&x_3491){return Nil();},[&](const auto&x_3490){return Cons(x_3490,Nil());});}else{Nil();OptionMatch(x_3488.next,[&](const auto&x_3494){return Nil();},[&](const auto&x_3493){return Cons(x_3493,Nil());});MakeUnit();MakeUnit();return MakeUnit();};}auto eval_expr_x_558(const auto&x_3496){return [&](const auto&x_3497){return max([&](){ReadMetric(x_3497);return OptionMatch(HashtblFind(OptionMatch(Some(x_3496),[&](const auto&x_3499){return Panic();},[&](const auto&x_3498){return x_3498;}).var,"intrinsic_current_line_width"),[&](const auto&x_3501){return Panic();},[&](const auto&x_3500){return x_3500;});}(),(BoolOfValue(VBool(IsSome(x_3496.prev))))?([&](){ReadMetric(x_3497);return OptionMatch(HashtblFind(OptionMatch(x_3496.prev,[&](const auto&x_3503){return Panic();},[&](const auto&x_3502){return x_3502;}).var,"intrinsic_width_max"),[&](const auto&x_3505){return Panic();},[&](const auto&x_3504){return x_3504;});}()):(VFloat(0.)));};}auto var_modified_x_556(const auto&x_3506){return [&](const auto&x_3507){OptionMatch(x_3506.next,[&](const auto&x_3509){return Nil();},[&](const auto&x_3508){return Cons(x_3508,Nil());});MakeUnit();MakeUnit();return MakeUnit();};}auto eval_expr_x_553(const auto&x_3512){return [&](const auto&x_3513){return plus([&](){ReadMetric(x_3513);return OptionMatch(HashtblFind(OptionMatch(Some(x_3512),[&](const auto&x_3515){return Panic();},[&](const auto&x_3514){return x_3514;}).var,"intrinsic_width_external"),[&](const auto&x_3517){return Panic();},[&](const auto&x_3516){return x_3516;});}(),(BoolOfValue((BoolOfValue(VBool(IsSome(x_3512.prev))))?(not([&](){ReadMetric(x_3513);return OptionMatch(HashtblFind(OptionMatch(x_3512.prev,[&](const auto&x_3519){return Panic();},[&](const auto&x_3518){return x_3518;}).var,"line_break"),[&](const auto&x_3521){return Panic();},[&](const auto&x_3520){return x_3520;});}())):(VBool(false))))?([&](){ReadMetric(x_3513);return OptionMatch(HashtblFind(OptionMatch(x_3512.prev,[&](const auto&x_3523){return Panic();},[&](const auto&x_3522){return x_3522;}).var,"intrinsic_current_line_width"),[&](const auto&x_3525){return Panic();},[&](const auto&x_3524){return x_3524;});}()):(VFloat(0.)));};}auto var_modified_x_551(const auto&x_3526){return [&](const auto&x_3527){return MakeUnit();};}auto eval_expr_x_548(const auto&x_3530){return [&](const auto&x_3531){if (BoolOfValue(eq([&](){ReadMetric(x_3531);return OptionMatch(HashtblFind(OptionMatch(Some(x_3530),[&](const auto&x_3533){return Panic();},[&](const auto&x_3532){return x_3532;}).var,"position"),[&](const auto&x_3535){return Panic();},[&](const auto&x_3534){return x_3534;});}(),VString("absolute")))){return VFloat(0.);}else{ReadMetric(x_3531);return OptionMatch(HashtblFind(OptionMatch(Some(x_3530),[&](const auto&x_3537){return Panic();},[&](const auto&x_3536){return x_3536;}).var,"intrinsic_width_internal"),[&](const auto&x_3539){return Panic();},[&](const auto&x_3538){return x_3538;});};}auto var_modified_x_546(const auto&x_3540){return [&](const auto&x_3541){return MakeUnit();};}auto eval_expr_x_543(const auto&x_3546){return [&](const auto&x_3547){if (BoolOfValue(eq([&](){ReadMetric(x_3547);return OptionMatch(HashtblFind(OptionMatch(Some(x_3546),[&](const auto&x_3549){return Panic();},[&](const auto&x_3548){return x_3548;}).var,"display"),[&](const auto&x_3551){return Panic();},[&](const auto&x_3550){return x_3550;});}(),VString("none")))){return VFloat(0.);}else{if (BoolOfValue([&](){ReadMetric(x_3547);return OptionMatch(HashtblFind(OptionMatch(Some(x_3546),[&](const auto&x_3553){return Panic();},[&](const auto&x_3552){return x_3552;}).var,"inside_svg"),[&](const auto&x_3555){return Panic();},[&](const auto&x_3554){return x_3554;});}())){return VFloat(0.);}else{if (BoolOfValue([&](){ReadMetric(x_3547);return OptionMatch(HashtblFind(OptionMatch(Some(x_3546),[&](const auto&x_3557){return Panic();},[&](const auto&x_3556){return x_3556;}).var,"disabled"),[&](const auto&x_3559){return Panic();},[&](const auto&x_3558){return x_3558;});}())){return VFloat(0.);}else{if (BoolOfValue((BoolOfValue(neq([&](){ReadMetric(x_3547);return OptionMatch(HashtblFind(OptionMatch(Some(x_3546),[&](const auto&x_3561){return Panic();},[&](const auto&x_3560){return x_3560;}).var,"width_expr"),[&](const auto&x_3563){return Panic();},[&](const auto&x_3562){return x_3562;});}(),VString("auto"))))?((BoolOfValue(not(has_suffix([&](){ReadMetric(x_3547);return OptionMatch(HashtblFind(OptionMatch(Some(x_3546),[&](const auto&x_3565){return Panic();},[&](const auto&x_3564){return x_3564;}).var,"width_expr"),[&](const auto&x_3567){return Panic();},[&](const auto&x_3566){return x_3566;});}(),VString("%")))))?((BoolOfValue(neq([&](){ReadMetric(x_3547);return OptionMatch(HashtblFind(OptionMatch(Some(x_3546),[&](const auto&x_3569){return Panic();},[&](const auto&x_3568){return x_3568;}).var,"width_expr"),[&](const auto&x_3571){return Panic();},[&](const auto&x_3570){return x_3570;});}(),VString("fit-content"))))?((BoolOfValue(neq([&](){ReadMetric(x_3547);return OptionMatch(HashtblFind(OptionMatch(Some(x_3546),[&](const auto&x_3573){return Panic();},[&](const auto&x_3572){return x_3572;}).var,"width_expr"),[&](const auto&x_3575){return Panic();},[&](const auto&x_3574){return x_3574;});}(),VString("max-content"))))?(not(has_prefix([&](){ReadMetric(x_3547);return OptionMatch(HashtblFind(OptionMatch(Some(x_3546),[&](const auto&x_3577){return Panic();},[&](const auto&x_3576){return x_3576;}).var,"width_expr"),[&](const auto&x_3579){return Panic();},[&](const auto&x_3578){return x_3578;});}(),VString("calc")))):(VBool(false))):(VBool(false))):(VBool(false))):(VBool(false)))){if (BoolOfValue(has_suffix([&](){ReadMetric(x_3547);return OptionMatch(HashtblFind(OptionMatch(Some(x_3546),[&](const auto&x_3681){return Panic();},[&](const auto&x_3680){return x_3680;}).var,"width_expr"),[&](const auto&x_3683){return Panic();},[&](const auto&x_3682){return x_3682;});}(),VString("px")))){return string_to_float(strip_suffix([&](){ReadMetric(x_3547);return OptionMatch(HashtblFind(OptionMatch(Some(x_3546),[&](const auto&x_3697){return Panic();},[&](const auto&x_3696){return x_3696;}).var,"width_expr"),[&](const auto&x_3699){return Panic();},[&](const auto&x_3698){return x_3698;});}(),VString("px")));}else{if (BoolOfValue(has_suffix([&](){ReadMetric(x_3547);return OptionMatch(HashtblFind(OptionMatch(Some(x_3546),[&](const auto&x_3685){return Panic();},[&](const auto&x_3684){return x_3684;}).var,"width_expr"),[&](const auto&x_3687){return Panic();},[&](const auto&x_3686){return x_3686;});}(),VString("ch")))){return string_to_float(strip_suffix([&](){ReadMetric(x_3547);return OptionMatch(HashtblFind(OptionMatch(Some(x_3546),[&](const auto&x_3693){return Panic();},[&](const auto&x_3692){return x_3692;}).var,"width_expr"),[&](const auto&x_3695){return Panic();},[&](const auto&x_3694){return x_3694;});}(),VString("ch")));}else{return Panic();}else{return plus([&](){ReadMetric(x_3547);return OptionMatch(HashtblFind(OptionMatch(Some(x_3546),[&](const auto&x_3581){return Panic();},[&](const auto&x_3580){return x_3580;}).var,"children_intrinsic_width"),[&](const auto&x_3583){return Panic();},[&](const auto&x_3582){return x_3582;});}(),(BoolOfValue(eq(VString(x_3546.name),VString("#text"))))?((BoolOfValue(VBool(IsSome(ListHead(x_3546.children)))))?(Panic()):(VFloat(100.))):((BoolOfValue([&](){ReadMetric(x_3547);return OptionMatch(HashtblFind(OptionMatch(Some(x_3546),[&](const auto&x_3585){return Panic();},[&](const auto&x_3584){return x_3584;}).var,"is_default_case"),[&](const auto&x_3587){return Panic();},[&](const auto&x_3586){return x_3586;});}()))?(VFloat(0.)):((BoolOfValue(eq(VString(x_3546.name),VString("BR"))))?((BoolOfValue(VBool(IsSome(ListHead(x_3546.children)))))?(Panic()):(VFloat(0.))):((BoolOfValue(eq(VString(x_3546.name),VString("INPUT"))))?(VFloat(100.)):((BoolOfValue(eq(VString(x_3546.name),VString("svg"))))?((BoolOfValue((BoolOfValue([&](){ReadMetric(x_3547);return OptionMatch(HashtblFind(OptionMatch(Some(x_3546),[&](const auto&x_3645){return Panic();},[&](const auto&x_3644){return x_3644;}).var,"has_width_attr"),[&](const auto&x_3647){return Panic();},[&](const auto&x_3646){return x_3646;});}()))?(string_is_float([&](){ReadMetric(x_3547);return OptionMatch(HashtblFind(OptionMatch(Some(x_3546),[&](const auto&x_3649){return Panic();},[&](const auto&x_3648){return x_3648;}).var,"width_attr_expr"),[&](const auto&x_3651){return Panic();},[&](const auto&x_3650){return x_3650;});}())):(VBool(false))))?(string_to_float([&](){ReadMetric(x_3547);return OptionMatch(HashtblFind(OptionMatch(Some(x_3546),[&](const auto&x_3677){return Panic();},[&](const auto&x_3676){return x_3676;}).var,"width_attr_expr"),[&](const auto&x_3679){return Panic();},[&](const auto&x_3678){return x_3678;});}())):((BoolOfValue((BoolOfValue(not([&](){ReadMetric(x_3547);return OptionMatch(HashtblFind(OptionMatch(Some(x_3546),[&](const auto&x_3653){return Panic();},[&](const auto&x_3652){return x_3652;}).var,"has_width_attr"),[&](const auto&x_3655){return Panic();},[&](const auto&x_3654){return x_3654;});}())))?(VBool(IsSome(HashtblFind(x_3546.attr,"viewBox")))):(VBool(false))))?(string_to_float(nth_by_sep([&](){ReadMetric(x_3547);return OptionMatch(HashtblFind(x_3546.attr,"viewBox"),[&](const auto&x_3675){return Panic();},[&](const auto&x_3674){return x_3674;});}(),VString(" "),VInt(2)))):((BoolOfValue((BoolOfValue([&](){ReadMetric(x_3547);return OptionMatch(HashtblFind(OptionMatch(Some(x_3546),[&](const auto&x_3657){return Panic();},[&](const auto&x_3656){return x_3656;}).var,"has_width_attr"),[&](const auto&x_3659){return Panic();},[&](const auto&x_3658){return x_3658;});}()))?((BoolOfValue(has_suffix([&](){ReadMetric(x_3547);return OptionMatch(HashtblFind(OptionMatch(Some(x_3546),[&](const auto&x_3661){return Panic();},[&](const auto&x_3660){return x_3660;}).var,"width_attr_expr"),[&](const auto&x_3663){return Panic();},[&](const auto&x_3662){return x_3662;});}(),VString("%"))))?(VBool(IsSome(HashtblFind(x_3546.attr,"viewBox")))):(VBool(false))):(VBool(false))))?(mult(string_to_float(nth_by_sep([&](){ReadMetric(x_3547);return OptionMatch(HashtblFind(x_3546.attr,"viewBox"),[&](const auto&x_3669){return Panic();},[&](const auto&x_3668){return x_3668;});}(),VString(" "),VInt(2))),divide(string_to_float(strip_suffix([&](){ReadMetric(x_3547);return OptionMatch(HashtblFind(OptionMatch(Some(x_3546),[&](const auto&x_3671){return Panic();},[&](const auto&x_3670){return x_3670;}).var,"width_attr_expr"),[&](const auto&x_3673){return Panic();},[&](const auto&x_3672){return x_3672;});}(),VString("%"))),VFloat(100.)))):(Panic())))):((BoolOfValue(eq(VString(x_3546.name),VString("IMG"))))?((BoolOfValue([&](){ReadMetric(x_3547);return OptionMatch(HashtblFind(OptionMatch(Some(x_3546),[&](const auto&x_3605){return Panic();},[&](const auto&x_3604){return x_3604;}).var,"has_width_attr"),[&](const auto&x_3607){return Panic();},[&](const auto&x_3606){return x_3606;});}()))?(string_to_float([&](){ReadMetric(x_3547);return OptionMatch(HashtblFind(OptionMatch(Some(x_3546),[&](const auto&x_3641){return Panic();},[&](const auto&x_3640){return x_3640;}).var,"width_attr_expr"),[&](const auto&x_3643){return Panic();},[&](const auto&x_3642){return x_3642;});}())):((BoolOfValue((BoolOfValue(VBool(IsSome(HashtblFind(x_3546.attr,"image_width")))))?(not([&](){ReadMetric(x_3547);return OptionMatch(HashtblFind(OptionMatch(Some(x_3546),[&](const auto&x_3609){return Panic();},[&](const auto&x_3608){return x_3608;}).var,"has_height_attr"),[&](const auto&x_3611){return Panic();},[&](const auto&x_3610){return x_3610;});}())):(VBool(false))))?(int_to_float([&](){ReadMetric(x_3547);return OptionMatch(HashtblFind(x_3546.attr,"image_width"),[&](const auto&x_3639){return Panic();},[&](const auto&x_3638){return x_3638;});}())):((BoolOfValue((BoolOfValue(not([&](){ReadMetric(x_3547);return OptionMatch(HashtblFind(OptionMatch(Some(x_3546),[&](const auto&x_3613){return Panic();},[&](const auto&x_3612){return x_3612;}).var,"has_width_attr"),[&](const auto&x_3615){return Panic();},[&](const auto&x_3614){return x_3614;});}())))?((BoolOfValue([&](){ReadMetric(x_3547);return OptionMatch(HashtblFind(OptionMatch(Some(x_3546),[&](const auto&x_3617){return Panic();},[&](const auto&x_3616){return x_3616;}).var,"has_height_attr"),[&](const auto&x_3619){return Panic();},[&](const auto&x_3618){return x_3618;});}()))?((BoolOfValue(VBool(IsSome(HashtblFind(x_3546.attr,"image_width")))))?(VBool(IsSome(HashtblFind(x_3546.attr,"image_height")))):(VBool(false))):(VBool(false))):(VBool(false))))?((BoolOfValue(neq([&](){ReadMetric(x_3547);return OptionMatch(HashtblFind(x_3546.attr,"image_height"),[&](const auto&x_3629){return Panic();},[&](const auto&x_3628){return x_3628;});}(),VInt(0))))?(mult(string_to_float([&](){ReadMetric(x_3547);return OptionMatch(HashtblFind(OptionMatch(Some(x_3546),[&](const auto&x_3631){return Panic();},[&](const auto&x_3630){return x_3630;}).var,"height_attr_expr"),[&](const auto&x_3633){return Panic();},[&](const auto&x_3632){return x_3632;});}()),divide(int_to_float([&](){ReadMetric(x_3547);return OptionMatch(HashtblFind(x_3546.attr,"image_width"),[&](const auto&x_3635){return Panic();},[&](const auto&x_3634){return x_3634;});}()),int_to_float([&](){ReadMetric(x_3547);return OptionMatch(HashtblFind(x_3546.attr,"image_height"),[&](const auto&x_3637){return Panic();},[&](const auto&x_3636){return x_3636;});}())))):(VFloat(0.))):(Panic())))):((BoolOfValue(eq(VString(x_3546.name),VString("IFRAME"))))?((BoolOfValue([&](){ReadMetric(x_3547);return OptionMatch(HashtblFind(OptionMatch(Some(x_3546),[&](const auto&x_3597){return Panic();},[&](const auto&x_3596){return x_3596;}).var,"has_width_attr"),[&](const auto&x_3599){return Panic();},[&](const auto&x_3598){return x_3598;});}()))?(Panic()):(VFloat(300.))):((BoolOfValue(eq(VString(x_3546.name),VString("TEXTAREA"))))?(VFloat(100.)):((BoolOfValue(eq(VString(x_3546.name),VString("VIDEO"))))?((BoolOfValue([&](){ReadMetric(x_3547);return OptionMatch(HashtblFind(OptionMatch(Some(x_3546),[&](const auto&x_3589){return Panic();},[&](const auto&x_3588){return x_3588;}).var,"has_width_attr"),[&](const auto&x_3591){return Panic();},[&](const auto&x_3590){return x_3590;});}()))?(Panic()):(VFloat(300.))):(Panic()))))))))));};}auto var_modified_x_541(const auto&x_3700){return [&](const auto&x_3701){return MakeUnit();};}auto eval_expr_x_538(const auto&x_3703){return [&](const auto&x_3704){if (BoolOfValue(VBool(IsSome(ListLast(x_3703.children))))){ReadMetric(x_3704);return OptionMatch(HashtblFind(OptionMatch(ListLast(x_3703.children),[&](const auto&x_3706){return Panic();},[&](const auto&x_3705){return x_3705;}).var,"intrinsic_width_max"),[&](const auto&x_3708){return Panic();},[&](const auto&x_3707){return x_3707;});}else{return VFloat(0.);};}auto var_modified_x_536(const auto&x_3709){return [&](const auto&x_3710){return MakeUnit();};}auto eval_expr_x_533(const auto&x_3712){return [&](const auto&x_3713){if (BoolOfValue((BoolOfValue(eq([&](){ReadMetric(x_3713);return OptionMatch(HashtblFind(OptionMatch(Some(x_3712),[&](const auto&x_3715){return Panic();},[&](const auto&x_3714){return x_3714;}).var,"display"),[&](const auto&x_3717){return Panic();},[&](const auto&x_3716){return x_3716;});}(),VString("none"))))?(VBool(true)):((BoolOfValue([&](){ReadMetric(x_3713);return OptionMatch(HashtblFind(OptionMatch(Some(x_3712),[&](const auto&x_3719){return Panic();},[&](const auto&x_3718){return x_3718;}).var,"inside_svg"),[&](const auto&x_3721){return Panic();},[&](const auto&x_3720){return x_3720;});}()))?(VBool(true)):([&](){ReadMetric(x_3713);return OptionMatch(HashtblFind(OptionMatch(Some(x_3712),[&](const auto&x_3723){return Panic();},[&](const auto&x_3722){return x_3722;}).var,"disabled"),[&](const auto&x_3725){return Panic();},[&](const auto&x_3724){return x_3724;});}())))){return VBool(true);}else{if (BoolOfValue((BoolOfValue(VBool(IsSome(x_3712.parent))))?([&](){ReadMetric(x_3713);return OptionMatch(HashtblFind(OptionMatch(x_3712.parent,[&](const auto&x_3727){return Panic();},[&](const auto&x_3726){return x_3726;}).var,"is_flex_row"),[&](const auto&x_3729){return Panic();},[&](const auto&x_3728){return x_3728;});}()):(VBool(false)))){return VBool(false);}else{if (BoolOfValue((BoolOfValue(eq([&](){ReadMetric(x_3713);return OptionMatch(HashtblFind(OptionMatch(Some(x_3712),[&](const auto&x_3731){return Panic();},[&](const auto&x_3730){return x_3730;}).var,"width_expr"),[&](const auto&x_3733){return Panic();},[&](const auto&x_3732){return x_3732;});}(),VString("auto"))))?(VBool(true)):((BoolOfValue(has_suffix([&](){ReadMetric(x_3713);return OptionMatch(HashtblFind(OptionMatch(Some(x_3712),[&](const auto&x_3735){return Panic();},[&](const auto&x_3734){return x_3734;}).var,"width_expr"),[&](const auto&x_3737){return Panic();},[&](const auto&x_3736){return x_3736;});}(),VString("px"))))?(VBool(true)):((BoolOfValue(has_suffix([&](){ReadMetric(x_3713);return OptionMatch(HashtblFind(OptionMatch(Some(x_3712),[&](const auto&x_3739){return Panic();},[&](const auto&x_3738){return x_3738;}).var,"width_expr"),[&](const auto&x_3741){return Panic();},[&](const auto&x_3740){return x_3740;});}(),VString("ch"))))?(VBool(true)):((BoolOfValue(has_prefix([&](){ReadMetric(x_3713);return OptionMatch(HashtblFind(OptionMatch(Some(x_3712),[&](const auto&x_3743){return Panic();},[&](const auto&x_3742){return x_3742;}).var,"width_expr"),[&](const auto&x_3745){return Panic();},[&](const auto&x_3744){return x_3744;});}(),VString("calc("))))?(VBool(true)):(eq([&](){ReadMetric(x_3713);return OptionMatch(HashtblFind(OptionMatch(Some(x_3712),[&](const auto&x_3747){return Panic();},[&](const auto&x_3746){return x_3746;}).var,"width_expr"),[&](const auto&x_3749){return Panic();},[&](const auto&x_3748){return x_3748;});}(),VString("max-content")))))))){return VBool(true);}else{if (BoolOfValue((BoolOfValue(has_suffix([&](){ReadMetric(x_3713);return OptionMatch(HashtblFind(OptionMatch(Some(x_3712),[&](const auto&x_3751){return Panic();},[&](const auto&x_3750){return x_3750;}).var,"width_expr"),[&](const auto&x_3753){return Panic();},[&](const auto&x_3752){return x_3752;});}(),VString("%"))))?(VBool(true)):(eq([&](){ReadMetric(x_3713);return OptionMatch(HashtblFind(OptionMatch(Some(x_3712),[&](const auto&x_3755){return Panic();},[&](const auto&x_3754){return x_3754;}).var,"width_expr"),[&](const auto&x_3757){return Panic();},[&](const auto&x_3756){return x_3756;});}(),VString("fit-content"))))){return VBool(false);}else{return Panic();};}auto var_modified_x_531(const auto&x_3762){return [&](const auto&x_3763){return MakeUnit();};}auto eval_expr_x_528(const auto&x_3766){return [&](const auto&x_3767){if (BoolOfValue(eq([&](){ReadMetric(x_3767);return OptionMatch(HashtblFind(OptionMatch(Some(x_3766),[&](const auto&x_3769){return Panic();},[&](const auto&x_3768){return x_3768;}).var,"display"),[&](const auto&x_3771){return Panic();},[&](const auto&x_3770){return x_3770;});}(),VString("none")))){return VBool(true);}else{if (BoolOfValue([&](){ReadMetric(x_3767);return OptionMatch(HashtblFind(OptionMatch(Some(x_3766),[&](const auto&x_3773){return Panic();},[&](const auto&x_3772){return x_3772;}).var,"inside_svg"),[&](const auto&x_3775){return Panic();},[&](const auto&x_3774){return x_3774;});}())){return VBool(true);}else{if (BoolOfValue([&](){ReadMetric(x_3767);return OptionMatch(HashtblFind(OptionMatch(Some(x_3766),[&](const auto&x_3777){return Panic();},[&](const auto&x_3776){return x_3776;}).var,"disabled"),[&](const auto&x_3779){return Panic();},[&](const auto&x_3778){return x_3778;});}())){return VBool(true);}else{if (BoolOfValue((BoolOfValue(eq(VString(x_3766.name),VString("#document"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("#shadow-root"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("DIV"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("HTML"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("BODY"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("BUTTON"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("FOOTER"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("SELECT"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("SECTION"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("FORM"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("CENTER"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("TD"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("TR"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("TBODY"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("TABLE"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("SPAN"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("FONT"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("A"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("ARTICLE"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("P"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("U"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("UL"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("B"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("H1"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("H2"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("H3"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("H4"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("DT"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("DD"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("DL"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("LI"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("LABEL"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("OL"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("NAV"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("HEADER"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("HEAD"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("SOURCE"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("PICTURE"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("FIGURE"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("FIGCAPTION"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("MAIN"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("REACT-PARTIAL"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("QUERY-BUILDER"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("MODAL-DIALOG"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("SCROLLABLE-REGION"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("DIALOG-HELPER"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("AUTO-CHECK"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("TOOL-TIP"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("CUSTOM-SCOPES"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("QBSEARCH-INPUT"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("INCLUDE-FRAGMENT"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("COOKIE-CONSENT-LINK"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("FULLSTORY-CAPTURE"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("GHCC-CONSENT"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("GLOBAL-BANNER"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("ACTIVE-GLOBAL-BANNERS"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("CARD-SKEW"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("EM"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("ASIDE"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("AUDIO"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("SUP"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("TIME"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("ABBR"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("SMALL"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("SLOT"))))?(VBool(true)):(eq(VString(x_3766.name),VString("I"))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))){return VBool(true);}else{if (BoolOfValue((BoolOfValue(eq(VString(x_3766.name),VString("#text"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("svg"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("IFRAME"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("INPUT"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("VIDEO"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("BR"))))?(VBool(true)):((BoolOfValue(eq(VString(x_3766.name),VString("IMG"))))?(VBool(true)):(eq(VString(x_3766.name),VString("TEXTAREA"))))))))))){return VBool(false);}else{return Panic();};}auto var_modified_x_526(const auto&x_3780){return [&](const auto&x_3781){return MakeUnit();};}auto eval_expr_x_523(const auto&x_3801){return [&](const auto&x_3802){if (BoolOfValue(VBool(IsSome(HashtblFind(x_3801.prop,"width"))))){ReadMetric(x_3802);return OptionMatch(HashtblFind(x_3801.prop,"width"),[&](const auto&x_3804){return Panic();},[&](const auto&x_3803){return x_3803;});}else{return VString("auto");};}auto eval_stmts_x_91(const auto&x_521){return [&](const auto&x_522){WriteMetric(x_522);auto x_524 = eval_expr_x_523(x_521)(x_522);OptionMatch(HashtblFind(x_521.var,"width_expr"),[&](const auto&x_527){return MakeUnit();},[&](const auto&x_525){if (EqualValue(x_525,x_524)){return MakeUnit();}else{return var_modified_x_526(x_521)(x_522);});HashtblSet(x_521.var,"width_expr",x_524);WriteMetric(x_522);auto x_529 = eval_expr_x_528(x_521)(x_522);OptionMatch(HashtblFind(x_521.var,"is_default_case"),[&](const auto&x_532){return MakeUnit();},[&](const auto&x_530){if (EqualValue(x_530,x_529)){return MakeUnit();}else{return var_modified_x_531(x_521)(x_522);});HashtblSet(x_521.var,"is_default_case",x_529);WriteMetric(x_522);auto x_534 = eval_expr_x_533(x_521)(x_522);OptionMatch(HashtblFind(x_521.var,"intrinsic_width_is_width"),[&](const auto&x_537){return MakeUnit();},[&](const auto&x_535){if (EqualValue(x_535,x_534)){return MakeUnit();}else{return var_modified_x_536(x_521)(x_522);});HashtblSet(x_521.var,"intrinsic_width_is_width",x_534);WriteMetric(x_522);auto x_539 = eval_expr_x_538(x_521)(x_522);OptionMatch(HashtblFind(x_521.var,"children_intrinsic_width"),[&](const auto&x_542){return MakeUnit();},[&](const auto&x_540){if (EqualValue(x_540,x_539)){return MakeUnit();}else{return var_modified_x_541(x_521)(x_522);});HashtblSet(x_521.var,"children_intrinsic_width",x_539);WriteMetric(x_522);auto x_544 = eval_expr_x_543(x_521)(x_522);OptionMatch(HashtblFind(x_521.var,"intrinsic_width_internal"),[&](const auto&x_547){return MakeUnit();},[&](const auto&x_545){if (EqualValue(x_545,x_544)){return MakeUnit();}else{return var_modified_x_546(x_521)(x_522);});HashtblSet(x_521.var,"intrinsic_width_internal",x_544);WriteMetric(x_522);auto x_549 = eval_expr_x_548(x_521)(x_522);OptionMatch(HashtblFind(x_521.var,"intrinsic_width_external"),[&](const auto&x_552){return MakeUnit();},[&](const auto&x_550){if (EqualValue(x_550,x_549)){return MakeUnit();}else{return var_modified_x_551(x_521)(x_522);});HashtblSet(x_521.var,"intrinsic_width_external",x_549);WriteMetric(x_522);auto x_554 = eval_expr_x_553(x_521)(x_522);OptionMatch(HashtblFind(x_521.var,"intrinsic_current_line_width"),[&](const auto&x_557){return MakeUnit();},[&](const auto&x_555){if (EqualValue(x_555,x_554)){return MakeUnit();}else{return var_modified_x_556(x_521)(x_522);});HashtblSet(x_521.var,"intrinsic_current_line_width",x_554);WriteMetric(x_522);auto x_559 = eval_expr_x_558(x_521)(x_522);OptionMatch(HashtblFind(x_521.var,"intrinsic_width_max"),[&](const auto&x_562){return MakeUnit();},[&](const auto&x_560){if (EqualValue(x_560,x_559)){return MakeUnit();}else{return var_modified_x_561(x_521)(x_522);});HashtblSet(x_521.var,"intrinsic_width_max",x_559);WriteMetric(x_522);auto x_564 = eval_expr_x_563(x_521)(x_522);OptionMatch(HashtblFind(x_521.var,"intrinsic_width_sum"),[&](const auto&x_567){return MakeUnit();},[&](const auto&x_565){if (EqualValue(x_565,x_564)){return MakeUnit();}else{return var_modified_x_566(x_521)(x_522);});HashtblSet(x_521.var,"intrinsic_width_sum",x_564);WriteMetric(x_522);auto x_569 = eval_expr_x_568(x_521)(x_522);OptionMatch(HashtblFind(x_521.var,"children_intrinsic_height"),[&](const auto&x_572){return MakeUnit();},[&](const auto&x_570){if (EqualValue(x_570,x_569)){return MakeUnit();}else{return var_modified_x_571(x_521)(x_522);});HashtblSet(x_521.var,"children_intrinsic_height",x_569);WriteMetric(x_522);auto x_574 = eval_expr_x_573(x_521)(x_522);OptionMatch(HashtblFind(x_521.var,"height_expr"),[&](const auto&x_577){return MakeUnit();},[&](const auto&x_575){if (EqualValue(x_575,x_574)){return MakeUnit();}else{return var_modified_x_576(x_521)(x_522);});HashtblSet(x_521.var,"height_expr",x_574);WriteMetric(x_522);auto x_579 = eval_expr_x_578(x_521)(x_522);OptionMatch(HashtblFind(x_521.var,"intrinsic_height_is_height"),[&](const auto&x_582){return MakeUnit();},[&](const auto&x_580){if (EqualValue(x_580,x_579)){return MakeUnit();}else{return var_modified_x_581(x_521)(x_522);});HashtblSet(x_521.var,"intrinsic_height_is_height",x_579);WriteMetric(x_522);auto x_584 = eval_expr_x_583(x_521)(x_522);OptionMatch(HashtblFind(x_521.var,"intrinsic_height_internal"),[&](const auto&x_587){return MakeUnit();},[&](const auto&x_585){if (EqualValue(x_585,x_584)){return MakeUnit();}else{return var_modified_x_586(x_521)(x_522);});HashtblSet(x_521.var,"intrinsic_height_internal",x_584);WriteMetric(x_522);auto x_589 = eval_expr_x_588(x_521)(x_522);OptionMatch(HashtblFind(x_521.var,"intrinsic_height_external"),[&](const auto&x_592){return MakeUnit();},[&](const auto&x_590){if (EqualValue(x_590,x_589)){return MakeUnit();}else{return var_modified_x_591(x_521)(x_522);});HashtblSet(x_521.var,"intrinsic_height_external",x_589);WriteMetric(x_522);auto x_594 = eval_expr_x_593(x_521)(x_522);OptionMatch(HashtblFind(x_521.var,"intrinsic_height_sum"),[&](const auto&x_597){return MakeUnit();},[&](const auto&x_595){if (EqualValue(x_595,x_594)){return MakeUnit();}else{return var_modified_x_596(x_521)(x_522);});HashtblSet(x_521.var,"intrinsic_height_sum",x_594);WriteMetric(x_522);auto x_599 = eval_expr_x_598(x_521)(x_522);OptionMatch(HashtblFind(x_521.var,"intrinsic_current_line_height"),[&](const auto&x_602){return MakeUnit();},[&](const auto&x_600){if (EqualValue(x_600,x_599)){return MakeUnit();}else{return var_modified_x_601(x_521)(x_522);});HashtblSet(x_521.var,"intrinsic_current_line_height",x_599);WriteMetric(x_522);auto x_604 = eval_expr_x_603(x_521)(x_522);OptionMatch(HashtblFind(x_521.var,"finished_intrinsic_height_sum"),[&](const auto&x_607){return MakeUnit();},[&](const auto&x_605){if (EqualValue(x_605,x_604)){return MakeUnit();}else{return var_modified_x_606(x_521)(x_522);});HashtblSet(x_521.var,"finished_intrinsic_height_sum",x_604);return MakeUnit();};}auto eval_stmts_x_89(const auto&x_608){return [&](const auto&x_609){WriteMetric(x_609);auto x_611 = eval_expr_x_610(x_608)(x_609);OptionMatch(HashtblFind(x_608.var,"display"),[&](const auto&x_614){return MakeUnit();},[&](const auto&x_612){if (EqualValue(x_612,x_611)){return MakeUnit();}else{return var_modified_x_613(x_608)(x_609);});HashtblSet(x_608.var,"display",x_611);WriteMetric(x_609);auto x_616 = eval_expr_x_615(x_608)(x_609);OptionMatch(HashtblFind(x_608.var,"position"),[&](const auto&x_619){return MakeUnit();},[&](const auto&x_617){if (EqualValue(x_617,x_616)){return MakeUnit();}else{return var_modified_x_618(x_608)(x_609);});HashtblSet(x_608.var,"position",x_616);WriteMetric(x_609);auto x_621 = eval_expr_x_620(x_608)(x_609);OptionMatch(HashtblFind(x_608.var,"flex_grow"),[&](const auto&x_624){return MakeUnit();},[&](const auto&x_622){if (EqualValue(x_622,x_621)){return MakeUnit();}else{return var_modified_x_623(x_608)(x_609);});HashtblSet(x_608.var,"flex_grow",x_621);WriteMetric(x_609);auto x_626 = eval_expr_x_625(x_608)(x_609);OptionMatch(HashtblFind(x_608.var,"flex_shrink"),[&](const auto&x_629){return MakeUnit();},[&](const auto&x_627){if (EqualValue(x_627,x_626)){return MakeUnit();}else{return var_modified_x_628(x_608)(x_609);});HashtblSet(x_608.var,"flex_shrink",x_626);WriteMetric(x_609);auto x_631 = eval_expr_x_630(x_608)(x_609);OptionMatch(HashtblFind(x_608.var,"flex_grow_sum"),[&](const auto&x_634){return MakeUnit();},[&](const auto&x_632){if (EqualValue(x_632,x_631)){return MakeUnit();}else{return var_modified_x_633(x_608)(x_609);});HashtblSet(x_608.var,"flex_grow_sum",x_631);WriteMetric(x_609);auto x_636 = eval_expr_x_635(x_608)(x_609);OptionMatch(HashtblFind(x_608.var,"flex_shrink_sum"),[&](const auto&x_639){return MakeUnit();},[&](const auto&x_637){if (EqualValue(x_637,x_636)){return MakeUnit();}else{return var_modified_x_638(x_608)(x_609);});HashtblSet(x_608.var,"flex_shrink_sum",x_636);WriteMetric(x_609);auto x_641 = eval_expr_x_640(x_608)(x_609);OptionMatch(HashtblFind(x_608.var,"flex_direction"),[&](const auto&x_644){return MakeUnit();},[&](const auto&x_642){if (EqualValue(x_642,x_641)){return MakeUnit();}else{return var_modified_x_643(x_608)(x_609);});HashtblSet(x_608.var,"flex_direction",x_641);WriteMetric(x_609);auto x_646 = eval_expr_x_645(x_608)(x_609);OptionMatch(HashtblFind(x_608.var,"is_flex_row"),[&](const auto&x_649){return MakeUnit();},[&](const auto&x_647){if (EqualValue(x_647,x_646)){return MakeUnit();}else{return var_modified_x_648(x_608)(x_609);});HashtblSet(x_608.var,"is_flex_row",x_646);WriteMetric(x_609);auto x_651 = eval_expr_x_650(x_608)(x_609);OptionMatch(HashtblFind(x_608.var,"is_flex_column"),[&](const auto&x_654){return MakeUnit();},[&](const auto&x_652){if (EqualValue(x_652,x_651)){return MakeUnit();}else{return var_modified_x_653(x_608)(x_609);});HashtblSet(x_608.var,"is_flex_column",x_651);WriteMetric(x_609);auto x_656 = eval_expr_x_655(x_608)(x_609);OptionMatch(HashtblFind(x_608.var,"width_attr_expr"),[&](const auto&x_659){return MakeUnit();},[&](const auto&x_657){if (EqualValue(x_657,x_656)){return MakeUnit();}else{return var_modified_x_658(x_608)(x_609);});HashtblSet(x_608.var,"width_attr_expr",x_656);WriteMetric(x_609);auto x_661 = eval_expr_x_660(x_608)(x_609);OptionMatch(HashtblFind(x_608.var,"has_width_attr"),[&](const auto&x_664){return MakeUnit();},[&](const auto&x_662){if (EqualValue(x_662,x_661)){return MakeUnit();}else{return var_modified_x_663(x_608)(x_609);});HashtblSet(x_608.var,"has_width_attr",x_661);WriteMetric(x_609);auto x_666 = eval_expr_x_665(x_608)(x_609);OptionMatch(HashtblFind(x_608.var,"height_attr_expr"),[&](const auto&x_669){return MakeUnit();},[&](const auto&x_667){if (EqualValue(x_667,x_666)){return MakeUnit();}else{return var_modified_x_668(x_608)(x_609);});HashtblSet(x_608.var,"height_attr_expr",x_666);WriteMetric(x_609);auto x_671 = eval_expr_x_670(x_608)(x_609);OptionMatch(HashtblFind(x_608.var,"has_height_attr"),[&](const auto&x_674){return MakeUnit();},[&](const auto&x_672){if (EqualValue(x_672,x_671)){return MakeUnit();}else{return var_modified_x_673(x_608)(x_609);});HashtblSet(x_608.var,"has_height_attr",x_671);WriteMetric(x_609);auto x_676 = eval_expr_x_675(x_608)(x_609);OptionMatch(HashtblFind(x_608.var,"is_svg_block"),[&](const auto&x_679){return MakeUnit();},[&](const auto&x_677){if (EqualValue(x_677,x_676)){return MakeUnit();}else{return var_modified_x_678(x_608)(x_609);});HashtblSet(x_608.var,"is_svg_block",x_676);WriteMetric(x_609);auto x_681 = eval_expr_x_680(x_608)(x_609);OptionMatch(HashtblFind(x_608.var,"inside_svg"),[&](const auto&x_684){return MakeUnit();},[&](const auto&x_682){if (EqualValue(x_682,x_681)){return MakeUnit();}else{return var_modified_x_683(x_608)(x_609);});HashtblSet(x_608.var,"inside_svg",x_681);WriteMetric(x_609);auto x_686 = eval_expr_x_685(x_608)(x_609);OptionMatch(HashtblFind(x_608.var,"disabled"),[&](const auto&x_689){return MakeUnit();},[&](const auto&x_687){if (EqualValue(x_687,x_686)){return MakeUnit();}else{return var_modified_x_688(x_608)(x_609);});HashtblSet(x_608.var,"disabled",x_686);WriteMetric(x_609);auto x_691 = eval_expr_x_690(x_608)(x_609);OptionMatch(HashtblFind(x_608.var,"visible"),[&](const auto&x_694){return MakeUnit();},[&](const auto&x_692){if (EqualValue(x_692,x_691)){return MakeUnit();}else{return var_modified_x_693(x_608)(x_609);});HashtblSet(x_608.var,"visible",x_691);WriteMetric(x_609);auto x_696 = eval_expr_x_695(x_608)(x_609);OptionMatch(HashtblFind(x_608.var,"line_break"),[&](const auto&x_699){return MakeUnit();},[&](const auto&x_697){if (EqualValue(x_697,x_696)){return MakeUnit();}else{return var_modified_x_698(x_608)(x_609);});HashtblSet(x_608.var,"line_break",x_696);return MakeUnit();};}auto eval_stmts_x_85(const auto&x_700){return [&](const auto&x_701){WriteMetric(x_701);auto x_703 = eval_expr_x_702(x_700)(x_701);OptionMatch(HashtblFind(x_700.var,"box_width"),[&](const auto&x_706){return MakeUnit();},[&](const auto&x_704){if (EqualValue(x_704,x_703)){return MakeUnit();}else{return var_modified_x_705(x_700)(x_701);});HashtblSet(x_700.var,"box_width",x_703);WriteMetric(x_701);auto x_708 = eval_expr_x_707(x_700)(x_701);OptionMatch(HashtblFind(x_700.var,"box_height"),[&](const auto&x_711){return MakeUnit();},[&](const auto&x_709){if (EqualValue(x_709,x_708)){return MakeUnit();}else{return var_modified_x_710(x_700)(x_701);});HashtblSet(x_700.var,"box_height",x_708);WriteMetric(x_701);auto x_713 = eval_expr_x_712(x_700)(x_701);OptionMatch(HashtblFind(x_700.var,"left_over"),[&](const auto&x_716){return MakeUnit();},[&](const auto&x_714){if (EqualValue(x_714,x_713)){return MakeUnit();}else{return var_modified_x_715(x_700)(x_701);});HashtblSet(x_700.var,"left_over",x_713);WriteMetric(x_701);auto x_718 = eval_expr_x_717(x_700)(x_701);OptionMatch(HashtblFind(x_700.var,"flex_amount"),[&](const auto&x_721){return MakeUnit();},[&](const auto&x_719){if (EqualValue(x_719,x_718)){return MakeUnit();}else{return var_modified_x_720(x_700)(x_701);});HashtblSet(x_700.var,"flex_amount",x_718);WriteMetric(x_701);auto x_723 = eval_expr_x_722(x_700)(x_701);OptionMatch(HashtblFind(x_700.var,"flex_unit"),[&](const auto&x_726){return MakeUnit();},[&](const auto&x_724){if (EqualValue(x_724,x_723)){return MakeUnit();}else{return var_modified_x_725(x_700)(x_701);});HashtblSet(x_700.var,"flex_unit",x_723);WriteMetric(x_701);auto x_728 = eval_expr_x_727(x_700)(x_701);OptionMatch(HashtblFind(x_700.var,"x"),[&](const auto&x_731){return MakeUnit();},[&](const auto&x_729){if (EqualValue(x_729,x_728)){return MakeUnit();}else{return var_modified_x_730(x_700)(x_701);});HashtblSet(x_700.var,"x",x_728);WriteMetric(x_701);auto x_733 = eval_expr_x_732(x_700)(x_701);OptionMatch(HashtblFind(x_700.var,"width_internal"),[&](const auto&x_736){return MakeUnit();},[&](const auto&x_734){if (EqualValue(x_734,x_733)){return MakeUnit();}else{return var_modified_x_735(x_700)(x_701);});HashtblSet(x_700.var,"width_internal",x_733);WriteMetric(x_701);auto x_738 = eval_expr_x_737(x_700)(x_701);OptionMatch(HashtblFind(x_700.var,"width_external"),[&](const auto&x_741){return MakeUnit();},[&](const auto&x_739){if (EqualValue(x_739,x_738)){return MakeUnit();}else{return var_modified_x_740(x_700)(x_701);});HashtblSet(x_700.var,"width_external",x_738);WriteMetric(x_701);auto x_743 = eval_expr_x_742(x_700)(x_701);OptionMatch(HashtblFind(x_700.var,"y"),[&](const auto&x_746){return MakeUnit();},[&](const auto&x_744){if (EqualValue(x_744,x_743)){return MakeUnit();}else{return var_modified_x_745(x_700)(x_701);});HashtblSet(x_700.var,"y",x_743);WriteMetric(x_701);auto x_748 = eval_expr_x_747(x_700)(x_701);OptionMatch(HashtblFind(x_700.var,"height_internal"),[&](const auto&x_751){return MakeUnit();},[&](const auto&x_749){if (EqualValue(x_749,x_748)){return MakeUnit();}else{return var_modified_x_750(x_700)(x_701);});HashtblSet(x_700.var,"height_internal",x_748);WriteMetric(x_701);auto x_753 = eval_expr_x_752(x_700)(x_701);OptionMatch(HashtblFind(x_700.var,"height_external"),[&](const auto&x_756){return MakeUnit();},[&](const auto&x_754){if (EqualValue(x_754,x_753)){return MakeUnit();}else{return var_modified_x_755(x_700)(x_701);});HashtblSet(x_700.var,"height_external",x_753);WriteMetric(x_701);auto x_758 = eval_expr_x_757(x_700)(x_701);OptionMatch(HashtblFind(x_700.var,"line_height"),[&](const auto&x_761){return MakeUnit();},[&](const auto&x_759){if (EqualValue(x_759,x_758)){return MakeUnit();}else{return var_modified_x_760(x_700)(x_701);});HashtblSet(x_700.var,"line_height",x_758);return MakeUnit();};}auto eval_stmts_x_76(const auto&x_762){return [&](const auto&x_763){WriteMetric(x_763);auto x_765 = eval_expr_x_764(x_762)(x_763);OptionMatch(HashtblFind(x_762.var,"width_expr"),[&](const auto&x_768){return MakeUnit();},[&](const auto&x_766){if (EqualValue(x_766,x_765)){return MakeUnit();}else{return var_modified_x_767(x_762)(x_763);});HashtblSet(x_762.var,"width_expr",x_765);WriteMetric(x_763);auto x_770 = eval_expr_x_769(x_762)(x_763);OptionMatch(HashtblFind(x_762.var,"is_default_case"),[&](const auto&x_773){return MakeUnit();},[&](const auto&x_771){if (EqualValue(x_771,x_770)){return MakeUnit();}else{return var_modified_x_772(x_762)(x_763);});HashtblSet(x_762.var,"is_default_case",x_770);WriteMetric(x_763);auto x_775 = eval_expr_x_774(x_762)(x_763);OptionMatch(HashtblFind(x_762.var,"intrinsic_width_is_width"),[&](const auto&x_778){return MakeUnit();},[&](const auto&x_776){if (EqualValue(x_776,x_775)){return MakeUnit();}else{return var_modified_x_777(x_762)(x_763);});HashtblSet(x_762.var,"intrinsic_width_is_width",x_775);WriteMetric(x_763);auto x_780 = eval_expr_x_779(x_762)(x_763);OptionMatch(HashtblFind(x_762.var,"children_intrinsic_width"),[&](const auto&x_783){return MakeUnit();},[&](const auto&x_781){if (EqualValue(x_781,x_780)){return MakeUnit();}else{return var_modified_x_782(x_762)(x_763);});HashtblSet(x_762.var,"children_intrinsic_width",x_780);WriteMetric(x_763);auto x_785 = eval_expr_x_784(x_762)(x_763);OptionMatch(HashtblFind(x_762.var,"intrinsic_width_internal"),[&](const auto&x_788){return MakeUnit();},[&](const auto&x_786){if (EqualValue(x_786,x_785)){return MakeUnit();}else{return var_modified_x_787(x_762)(x_763);});HashtblSet(x_762.var,"intrinsic_width_internal",x_785);WriteMetric(x_763);auto x_790 = eval_expr_x_789(x_762)(x_763);OptionMatch(HashtblFind(x_762.var,"intrinsic_width_external"),[&](const auto&x_793){return MakeUnit();},[&](const auto&x_791){if (EqualValue(x_791,x_790)){return MakeUnit();}else{return var_modified_x_792(x_762)(x_763);});HashtblSet(x_762.var,"intrinsic_width_external",x_790);WriteMetric(x_763);auto x_795 = eval_expr_x_794(x_762)(x_763);OptionMatch(HashtblFind(x_762.var,"intrinsic_current_line_width"),[&](const auto&x_798){return MakeUnit();},[&](const auto&x_796){if (EqualValue(x_796,x_795)){return MakeUnit();}else{return var_modified_x_797(x_762)(x_763);});HashtblSet(x_762.var,"intrinsic_current_line_width",x_795);WriteMetric(x_763);auto x_800 = eval_expr_x_799(x_762)(x_763);OptionMatch(HashtblFind(x_762.var,"intrinsic_width_max"),[&](const auto&x_803){return MakeUnit();},[&](const auto&x_801){if (EqualValue(x_801,x_800)){return MakeUnit();}else{return var_modified_x_802(x_762)(x_763);});HashtblSet(x_762.var,"intrinsic_width_max",x_800);WriteMetric(x_763);auto x_805 = eval_expr_x_804(x_762)(x_763);OptionMatch(HashtblFind(x_762.var,"intrinsic_width_sum"),[&](const auto&x_808){return MakeUnit();},[&](const auto&x_806){if (EqualValue(x_806,x_805)){return MakeUnit();}else{return var_modified_x_807(x_762)(x_763);});HashtblSet(x_762.var,"intrinsic_width_sum",x_805);WriteMetric(x_763);auto x_810 = eval_expr_x_809(x_762)(x_763);OptionMatch(HashtblFind(x_762.var,"children_intrinsic_height"),[&](const auto&x_813){return MakeUnit();},[&](const auto&x_811){if (EqualValue(x_811,x_810)){return MakeUnit();}else{return var_modified_x_812(x_762)(x_763);});HashtblSet(x_762.var,"children_intrinsic_height",x_810);WriteMetric(x_763);auto x_815 = eval_expr_x_814(x_762)(x_763);OptionMatch(HashtblFind(x_762.var,"height_expr"),[&](const auto&x_818){return MakeUnit();},[&](const auto&x_816){if (EqualValue(x_816,x_815)){return MakeUnit();}else{return var_modified_x_817(x_762)(x_763);});HashtblSet(x_762.var,"height_expr",x_815);WriteMetric(x_763);auto x_820 = eval_expr_x_819(x_762)(x_763);OptionMatch(HashtblFind(x_762.var,"intrinsic_height_is_height"),[&](const auto&x_823){return MakeUnit();},[&](const auto&x_821){if (EqualValue(x_821,x_820)){return MakeUnit();}else{return var_modified_x_822(x_762)(x_763);});HashtblSet(x_762.var,"intrinsic_height_is_height",x_820);WriteMetric(x_763);auto x_825 = eval_expr_x_824(x_762)(x_763);OptionMatch(HashtblFind(x_762.var,"intrinsic_height_internal"),[&](const auto&x_828){return MakeUnit();},[&](const auto&x_826){if (EqualValue(x_826,x_825)){return MakeUnit();}else{return var_modified_x_827(x_762)(x_763);});HashtblSet(x_762.var,"intrinsic_height_internal",x_825);WriteMetric(x_763);auto x_830 = eval_expr_x_829(x_762)(x_763);OptionMatch(HashtblFind(x_762.var,"intrinsic_height_external"),[&](const auto&x_833){return MakeUnit();},[&](const auto&x_831){if (EqualValue(x_831,x_830)){return MakeUnit();}else{return var_modified_x_832(x_762)(x_763);});HashtblSet(x_762.var,"intrinsic_height_external",x_830);WriteMetric(x_763);auto x_835 = eval_expr_x_834(x_762)(x_763);OptionMatch(HashtblFind(x_762.var,"intrinsic_height_sum"),[&](const auto&x_838){return MakeUnit();},[&](const auto&x_836){if (EqualValue(x_836,x_835)){return MakeUnit();}else{return var_modified_x_837(x_762)(x_763);});HashtblSet(x_762.var,"intrinsic_height_sum",x_835);WriteMetric(x_763);auto x_840 = eval_expr_x_839(x_762)(x_763);OptionMatch(HashtblFind(x_762.var,"intrinsic_current_line_height"),[&](const auto&x_843){return MakeUnit();},[&](const auto&x_841){if (EqualValue(x_841,x_840)){return MakeUnit();}else{return var_modified_x_842(x_762)(x_763);});HashtblSet(x_762.var,"intrinsic_current_line_height",x_840);WriteMetric(x_763);auto x_845 = eval_expr_x_844(x_762)(x_763);OptionMatch(HashtblFind(x_762.var,"finished_intrinsic_height_sum"),[&](const auto&x_848){return MakeUnit();},[&](const auto&x_846){if (EqualValue(x_846,x_845)){return MakeUnit();}else{return var_modified_x_847(x_762)(x_763);});HashtblSet(x_762.var,"finished_intrinsic_height_sum",x_845);return MakeUnit();};}auto eval_stmts_x_74(const auto&x_849){return [&](const auto&x_850){WriteMetric(x_850);auto x_852 = eval_expr_x_851(x_849)(x_850);OptionMatch(HashtblFind(x_849.var,"display"),[&](const auto&x_855){return MakeUnit();},[&](const auto&x_853){if (EqualValue(x_853,x_852)){return MakeUnit();}else{return var_modified_x_854(x_849)(x_850);});HashtblSet(x_849.var,"display",x_852);WriteMetric(x_850);auto x_857 = eval_expr_x_856(x_849)(x_850);OptionMatch(HashtblFind(x_849.var,"position"),[&](const auto&x_860){return MakeUnit();},[&](const auto&x_858){if (EqualValue(x_858,x_857)){return MakeUnit();}else{return var_modified_x_859(x_849)(x_850);});HashtblSet(x_849.var,"position",x_857);WriteMetric(x_850);auto x_862 = eval_expr_x_861(x_849)(x_850);OptionMatch(HashtblFind(x_849.var,"flex_grow"),[&](const auto&x_865){return MakeUnit();},[&](const auto&x_863){if (EqualValue(x_863,x_862)){return MakeUnit();}else{return var_modified_x_864(x_849)(x_850);});HashtblSet(x_849.var,"flex_grow",x_862);WriteMetric(x_850);auto x_867 = eval_expr_x_866(x_849)(x_850);OptionMatch(HashtblFind(x_849.var,"flex_shrink"),[&](const auto&x_870){return MakeUnit();},[&](const auto&x_868){if (EqualValue(x_868,x_867)){return MakeUnit();}else{return var_modified_x_869(x_849)(x_850);});HashtblSet(x_849.var,"flex_shrink",x_867);WriteMetric(x_850);auto x_872 = eval_expr_x_871(x_849)(x_850);OptionMatch(HashtblFind(x_849.var,"flex_grow_sum"),[&](const auto&x_875){return MakeUnit();},[&](const auto&x_873){if (EqualValue(x_873,x_872)){return MakeUnit();}else{return var_modified_x_874(x_849)(x_850);});HashtblSet(x_849.var,"flex_grow_sum",x_872);WriteMetric(x_850);auto x_877 = eval_expr_x_876(x_849)(x_850);OptionMatch(HashtblFind(x_849.var,"flex_shrink_sum"),[&](const auto&x_880){return MakeUnit();},[&](const auto&x_878){if (EqualValue(x_878,x_877)){return MakeUnit();}else{return var_modified_x_879(x_849)(x_850);});HashtblSet(x_849.var,"flex_shrink_sum",x_877);WriteMetric(x_850);auto x_882 = eval_expr_x_881(x_849)(x_850);OptionMatch(HashtblFind(x_849.var,"flex_direction"),[&](const auto&x_885){return MakeUnit();},[&](const auto&x_883){if (EqualValue(x_883,x_882)){return MakeUnit();}else{return var_modified_x_884(x_849)(x_850);});HashtblSet(x_849.var,"flex_direction",x_882);WriteMetric(x_850);auto x_887 = eval_expr_x_886(x_849)(x_850);OptionMatch(HashtblFind(x_849.var,"is_flex_row"),[&](const auto&x_890){return MakeUnit();},[&](const auto&x_888){if (EqualValue(x_888,x_887)){return MakeUnit();}else{return var_modified_x_889(x_849)(x_850);});HashtblSet(x_849.var,"is_flex_row",x_887);WriteMetric(x_850);auto x_892 = eval_expr_x_891(x_849)(x_850);OptionMatch(HashtblFind(x_849.var,"is_flex_column"),[&](const auto&x_895){return MakeUnit();},[&](const auto&x_893){if (EqualValue(x_893,x_892)){return MakeUnit();}else{return var_modified_x_894(x_849)(x_850);});HashtblSet(x_849.var,"is_flex_column",x_892);WriteMetric(x_850);auto x_897 = eval_expr_x_896(x_849)(x_850);OptionMatch(HashtblFind(x_849.var,"width_attr_expr"),[&](const auto&x_900){return MakeUnit();},[&](const auto&x_898){if (EqualValue(x_898,x_897)){return MakeUnit();}else{return var_modified_x_899(x_849)(x_850);});HashtblSet(x_849.var,"width_attr_expr",x_897);WriteMetric(x_850);auto x_902 = eval_expr_x_901(x_849)(x_850);OptionMatch(HashtblFind(x_849.var,"has_width_attr"),[&](const auto&x_905){return MakeUnit();},[&](const auto&x_903){if (EqualValue(x_903,x_902)){return MakeUnit();}else{return var_modified_x_904(x_849)(x_850);});HashtblSet(x_849.var,"has_width_attr",x_902);WriteMetric(x_850);auto x_907 = eval_expr_x_906(x_849)(x_850);OptionMatch(HashtblFind(x_849.var,"height_attr_expr"),[&](const auto&x_910){return MakeUnit();},[&](const auto&x_908){if (EqualValue(x_908,x_907)){return MakeUnit();}else{return var_modified_x_909(x_849)(x_850);});HashtblSet(x_849.var,"height_attr_expr",x_907);WriteMetric(x_850);auto x_912 = eval_expr_x_911(x_849)(x_850);OptionMatch(HashtblFind(x_849.var,"has_height_attr"),[&](const auto&x_915){return MakeUnit();},[&](const auto&x_913){if (EqualValue(x_913,x_912)){return MakeUnit();}else{return var_modified_x_914(x_849)(x_850);});HashtblSet(x_849.var,"has_height_attr",x_912);WriteMetric(x_850);auto x_917 = eval_expr_x_916(x_849)(x_850);OptionMatch(HashtblFind(x_849.var,"is_svg_block"),[&](const auto&x_920){return MakeUnit();},[&](const auto&x_918){if (EqualValue(x_918,x_917)){return MakeUnit();}else{return var_modified_x_919(x_849)(x_850);});HashtblSet(x_849.var,"is_svg_block",x_917);WriteMetric(x_850);auto x_922 = eval_expr_x_921(x_849)(x_850);OptionMatch(HashtblFind(x_849.var,"inside_svg"),[&](const auto&x_925){return MakeUnit();},[&](const auto&x_923){if (EqualValue(x_923,x_922)){return MakeUnit();}else{return var_modified_x_924(x_849)(x_850);});HashtblSet(x_849.var,"inside_svg",x_922);WriteMetric(x_850);auto x_927 = eval_expr_x_926(x_849)(x_850);OptionMatch(HashtblFind(x_849.var,"disabled"),[&](const auto&x_930){return MakeUnit();},[&](const auto&x_928){if (EqualValue(x_928,x_927)){return MakeUnit();}else{return var_modified_x_929(x_849)(x_850);});HashtblSet(x_849.var,"disabled",x_927);WriteMetric(x_850);auto x_932 = eval_expr_x_931(x_849)(x_850);OptionMatch(HashtblFind(x_849.var,"visible"),[&](const auto&x_935){return MakeUnit();},[&](const auto&x_933){if (EqualValue(x_933,x_932)){return MakeUnit();}else{return var_modified_x_934(x_849)(x_850);});HashtblSet(x_849.var,"visible",x_932);WriteMetric(x_850);auto x_937 = eval_expr_x_936(x_849)(x_850);OptionMatch(HashtblFind(x_849.var,"line_break"),[&](const auto&x_940){return MakeUnit();},[&](const auto&x_938){if (EqualValue(x_938,x_937)){return MakeUnit();}else{return var_modified_x_939(x_849)(x_850);});HashtblSet(x_849.var,"line_break",x_937);return MakeUnit();};}auto eval_stmts_x_70(const auto&x_941){return [&](const auto&x_942){WriteMetric(x_942);auto x_944 = eval_expr_x_943(x_941)(x_942);OptionMatch(HashtblFind(x_941.var,"box_width"),[&](const auto&x_947){return MakeUnit();},[&](const auto&x_945){if (EqualValue(x_945,x_944)){return MakeUnit();}else{return var_modified_x_946(x_941)(x_942);});HashtblSet(x_941.var,"box_width",x_944);WriteMetric(x_942);auto x_949 = eval_expr_x_948(x_941)(x_942);OptionMatch(HashtblFind(x_941.var,"box_height"),[&](const auto&x_952){return MakeUnit();},[&](const auto&x_950){if (EqualValue(x_950,x_949)){return MakeUnit();}else{return var_modified_x_951(x_941)(x_942);});HashtblSet(x_941.var,"box_height",x_949);WriteMetric(x_942);auto x_954 = eval_expr_x_953(x_941)(x_942);OptionMatch(HashtblFind(x_941.var,"left_over"),[&](const auto&x_957){return MakeUnit();},[&](const auto&x_955){if (EqualValue(x_955,x_954)){return MakeUnit();}else{return var_modified_x_956(x_941)(x_942);});HashtblSet(x_941.var,"left_over",x_954);WriteMetric(x_942);auto x_959 = eval_expr_x_958(x_941)(x_942);OptionMatch(HashtblFind(x_941.var,"flex_amount"),[&](const auto&x_962){return MakeUnit();},[&](const auto&x_960){if (EqualValue(x_960,x_959)){return MakeUnit();}else{return var_modified_x_961(x_941)(x_942);});HashtblSet(x_941.var,"flex_amount",x_959);WriteMetric(x_942);auto x_964 = eval_expr_x_963(x_941)(x_942);OptionMatch(HashtblFind(x_941.var,"flex_unit"),[&](const auto&x_967){return MakeUnit();},[&](const auto&x_965){if (EqualValue(x_965,x_964)){return MakeUnit();}else{return var_modified_x_966(x_941)(x_942);});HashtblSet(x_941.var,"flex_unit",x_964);WriteMetric(x_942);auto x_969 = eval_expr_x_968(x_941)(x_942);OptionMatch(HashtblFind(x_941.var,"x"),[&](const auto&x_972){return MakeUnit();},[&](const auto&x_970){if (EqualValue(x_970,x_969)){return MakeUnit();}else{return var_modified_x_971(x_941)(x_942);});HashtblSet(x_941.var,"x",x_969);WriteMetric(x_942);auto x_974 = eval_expr_x_973(x_941)(x_942);OptionMatch(HashtblFind(x_941.var,"width_internal"),[&](const auto&x_977){return MakeUnit();},[&](const auto&x_975){if (EqualValue(x_975,x_974)){return MakeUnit();}else{return var_modified_x_976(x_941)(x_942);});HashtblSet(x_941.var,"width_internal",x_974);WriteMetric(x_942);auto x_979 = eval_expr_x_978(x_941)(x_942);OptionMatch(HashtblFind(x_941.var,"width_external"),[&](const auto&x_982){return MakeUnit();},[&](const auto&x_980){if (EqualValue(x_980,x_979)){return MakeUnit();}else{return var_modified_x_981(x_941)(x_942);});HashtblSet(x_941.var,"width_external",x_979);WriteMetric(x_942);auto x_984 = eval_expr_x_983(x_941)(x_942);OptionMatch(HashtblFind(x_941.var,"y"),[&](const auto&x_987){return MakeUnit();},[&](const auto&x_985){if (EqualValue(x_985,x_984)){return MakeUnit();}else{return var_modified_x_986(x_941)(x_942);});HashtblSet(x_941.var,"y",x_984);WriteMetric(x_942);auto x_989 = eval_expr_x_988(x_941)(x_942);OptionMatch(HashtblFind(x_941.var,"height_internal"),[&](const auto&x_992){return MakeUnit();},[&](const auto&x_990){if (EqualValue(x_990,x_989)){return MakeUnit();}else{return var_modified_x_991(x_941)(x_942);});HashtblSet(x_941.var,"height_internal",x_989);WriteMetric(x_942);auto x_994 = eval_expr_x_993(x_941)(x_942);OptionMatch(HashtblFind(x_941.var,"height_external"),[&](const auto&x_997){return MakeUnit();},[&](const auto&x_995){if (EqualValue(x_995,x_994)){return MakeUnit();}else{return var_modified_x_996(x_941)(x_942);});HashtblSet(x_941.var,"height_external",x_994);WriteMetric(x_942);auto x_999 = eval_expr_x_998(x_941)(x_942);OptionMatch(HashtblFind(x_941.var,"line_height"),[&](const auto&x_1002){return MakeUnit();},[&](const auto&x_1000){if (EqualValue(x_1000,x_999)){return MakeUnit();}else{return var_modified_x_1001(x_941)(x_942);});HashtblSet(x_941.var,"line_height",x_999);return MakeUnit();};}auto x_50(const auto&x_51){ListIter(ListZip(ListDropLast(x_51.children),ListTl(x_51.children)),[&](const auto&x_52){auto x_53 = Zro(x_52);auto x_54 = Fst(x_52);x_53.parent=Some(x_51);x_53.next=Some(x_54);x_54.prev=Some(x_53);return MakeUnit();});return OptionIter(ListLast(x_51.children),[&](const auto&x_55){x_55.parent=Some(x_51);return x_50(x_55);});}auto set_children_relation_x_42(const auto&x_51){return x_50(x_51);}auto x_56(const auto&x_57){ListIter(ListZip(ListDropLast(x_57.children),ListTl(x_57.children)),[&](const auto&x_58){auto x_59 = Zro(x_58);auto x_60 = Fst(x_58);x_59.parent=Some(x_57);x_59.next=Some(x_60);x_60.prev=Some(x_59);return MakeUnit();});return OptionIter(ListLast(x_57.children),[&](const auto&x_61){x_61.parent=Some(x_57);return x_56(x_61);});}auto set_children_relation_x_38(const auto&x_57){return x_56(x_57);}auto x_62(const auto&x_63){ListIter(ListZip(ListDropLast(x_63.children),ListTl(x_63.children)),[&](const auto&x_64){auto x_65 = Zro(x_64);auto x_66 = Fst(x_64);x_65.parent=Some(x_63);x_65.next=Some(x_66);x_66.prev=Some(x_65);return MakeUnit();});return OptionIter(ListLast(x_63.children),[&](const auto&x_67){x_67.parent=Some(x_63);return x_62(x_67);});}auto set_children_relation_x_35(const auto&x_63){return x_62(x_63);}auto eval_stmts_x_31(const auto&x_68){return [&](const auto&x_69){ListIter(x_68.children,[&](const auto&x_71){return eval_stmts_x_31(x_71)(x_69);});return MakeUnit();};}auto eval_stmts_x_30(const auto&x_72){return [&](const auto&x_73){ListIter(x_72.children,[&](const auto&x_75){return eval_stmts_x_30(x_75)(x_73);});return MakeUnit();};}auto x_77(const auto&x_78){ListIter(ListZip(ListDropLast(x_78.children),ListTl(x_78.children)),[&](const auto&x_79){auto x_80 = Zro(x_79);auto x_81 = Fst(x_79);x_80.parent=Some(x_78);x_80.next=Some(x_81);x_81.prev=Some(x_80);return MakeUnit();});return OptionIter(ListLast(x_78.children),[&](const auto&x_82){x_82.parent=Some(x_78);return x_77(x_82);});}auto set_children_relation_x_28(const auto&x_78){return x_77(x_78);}auto eval_stmts_x_26(const auto&x_83){return [&](const auto&x_84){ListIter(x_83.children,[&](const auto&x_86){return eval_stmts_x_26(x_86)(x_84);});return MakeUnit();};}auto eval_stmts_x_25(const auto&x_87){return [&](const auto&x_88){ListIter(x_87.children,[&](const auto&x_90){return eval_stmts_x_25(x_90)(x_88);});return MakeUnit();};}auto x_92(const auto&x_93){ListIter(ListZip(ListDropLast(x_93.children),ListTl(x_93.children)),[&](const auto&x_94){auto x_95 = Zro(x_94);auto x_96 = Fst(x_94);x_95.parent=Some(x_93);x_95.next=Some(x_96);x_96.prev=Some(x_95);return MakeUnit();});return OptionIter(ListLast(x_93.children),[&](const auto&x_97){x_97.parent=Some(x_93);return x_92(x_97);});}auto set_children_relation_x_22(const auto&x_93){return x_92(x_93);}auto x_98(const auto&x_99){auto x_100 = Zro(x_99);auto x_101 = Fst(x_99);auto x_102 = Zro(x_100);auto x_103 = Fst(x_100);return ListMatch(x_102,[&](const auto&x_106){auto x_107 = Zro(x_101);auto x_108 = Zro(x_107);auto x_109 = Fst(x_107);auto x_110 = Fst(x_101);auto x_111 = Zro(x_110);auto x_112 = Fst(x_110);InputChangeMetric(x_112,1);std::string x_3805 = x_108;if (x_3805=="attributes"){std::string x_3806 = x_109;if (x_3806=="width"){WriteMetric(x_112);HashtblAddExn(x_103.attr,"width",x_111);return MakeUnit();}else if (x_3806=="image_height"){WriteMetric(x_112);HashtblAddExn(x_103.attr,"image_height",x_111);return MakeUnit();}else if (x_3806=="image_width"){WriteMetric(x_112);HashtblAddExn(x_103.attr,"image_width",x_111);return MakeUnit();}else if (x_3806=="height"){WriteMetric(x_112);HashtblAddExn(x_103.attr,"height",x_111);return MakeUnit();}else if (x_3806=="viewBox"){WriteMetric(x_112);HashtblAddExn(x_103.attr,"viewBox",x_111);return MakeUnit();}else {return MakeUnit();}}else if (x_3805=="properties"){std::string x_3807 = x_109;if (x_3807=="width"){WriteMetric(x_112);HashtblAddExn(x_103.prop,"width",x_111);return MakeUnit();}else if (x_3807=="flex-grow"){WriteMetric(x_112);HashtblAddExn(x_103.prop,"flex-grow",x_111);return MakeUnit();}else if (x_3807=="height"){WriteMetric(x_112);HashtblAddExn(x_103.prop,"height",x_111);return MakeUnit();}else if (x_3807=="display"){WriteMetric(x_112);HashtblAddExn(x_103.prop,"display",x_111);return MakeUnit();}else if (x_3807=="position"){WriteMetric(x_112);HashtblAddExn(x_103.prop,"position",x_111);return MakeUnit();}else if (x_3807=="flex-shrink"){WriteMetric(x_112);HashtblAddExn(x_103.prop,"flex-shrink",x_111);return MakeUnit();}else if (x_3807=="flex-direction"){WriteMetric(x_112);HashtblAddExn(x_103.prop,"flex-direction",x_111);return MakeUnit();}else {return MakeUnit();}}else {return Panic();}},[&](const auto&x_104){return [&](const auto&x_105){return x_98(MakePair(MakePair(x_105,ListNthExn(x_103.children,x_104)),x_101));};});}auto insert_value_x_13(const auto&x_99){return x_98(x_99);}auto x_113(const auto&x_114){auto x_115 = Zro(x_114);auto x_116 = Fst(x_114);auto x_117 = Zro(x_115);auto x_118 = Fst(x_115);return ListMatch(x_117,[&](const auto&x_121){auto x_122 = Zro(x_116);auto x_123 = Zro(x_122);auto x_124 = Fst(x_122);auto x_125 = Fst(x_116);InputChangeMetric(x_125,1);std::string x_3808 = x_123;if (x_3808=="attributes"){std::string x_3809 = x_124;if (x_3809=="width"){WriteMetric(x_125);HashtblForceRemove(x_118.attr,"width");return MakeUnit();}else if (x_3809=="image_height"){WriteMetric(x_125);HashtblForceRemove(x_118.attr,"image_height");return MakeUnit();}else if (x_3809=="image_width"){WriteMetric(x_125);HashtblForceRemove(x_118.attr,"image_width");return MakeUnit();}else if (x_3809=="height"){WriteMetric(x_125);HashtblForceRemove(x_118.attr,"height");return MakeUnit();}else if (x_3809=="viewBox"){WriteMetric(x_125);HashtblForceRemove(x_118.attr,"viewBox");return MakeUnit();}else {return MakeUnit();}}else if (x_3808=="properties"){std::string x_3810 = x_124;if (x_3810=="width"){WriteMetric(x_125);HashtblForceRemove(x_118.prop,"width");return MakeUnit();}else if (x_3810=="flex-grow"){WriteMetric(x_125);HashtblForceRemove(x_118.prop,"flex-grow");return MakeUnit();}else if (x_3810=="height"){WriteMetric(x_125);HashtblForceRemove(x_118.prop,"height");return MakeUnit();}else if (x_3810=="display"){WriteMetric(x_125);HashtblForceRemove(x_118.prop,"display");return MakeUnit();}else if (x_3810=="position"){WriteMetric(x_125);HashtblForceRemove(x_118.prop,"position");return MakeUnit();}else if (x_3810=="flex-shrink"){WriteMetric(x_125);HashtblForceRemove(x_118.prop,"flex-shrink");return MakeUnit();}else if (x_3810=="flex-direction"){WriteMetric(x_125);HashtblForceRemove(x_118.prop,"flex-direction");return MakeUnit();}else {return MakeUnit();}}else {return Panic();}},[&](const auto&x_119){return [&](const auto&x_120){return x_113(MakePair(MakePair(x_120,ListNthExn(x_118.children,x_119)),x_116));};});}auto delete_value_x_12(const auto&x_114){return x_113(x_114);}auto x_126(const auto&x_127){auto x_128 = Zro(x_127);auto x_129 = Fst(x_127);auto x_130 = Zro(x_128);auto x_131 = Fst(x_128);return ListMatch(x_130,[&](const auto&x_134){auto x_135 = Zro(x_129);auto x_136 = Zro(x_135);auto x_137 = Fst(x_135);auto x_138 = Fst(x_129);auto x_139 = Zro(x_138);auto x_140 = Fst(x_138);InputChangeMetric(x_140,1);std::string x_3811 = x_136;if (x_3811=="attributes"){std::string x_3812 = x_137;if (x_3812=="width"){WriteMetric(x_140);HashtblForceRemove(x_131.attr,"width");MakeUnit();WriteMetric(x_140);HashtblAddExn(x_131.attr,"width",x_139);return MakeUnit();}else if (x_3812=="image_height"){WriteMetric(x_140);HashtblForceRemove(x_131.attr,"image_height");MakeUnit();WriteMetric(x_140);HashtblAddExn(x_131.attr,"image_height",x_139);return MakeUnit();}else if (x_3812=="image_width"){WriteMetric(x_140);HashtblForceRemove(x_131.attr,"image_width");MakeUnit();WriteMetric(x_140);HashtblAddExn(x_131.attr,"image_width",x_139);return MakeUnit();}else if (x_3812=="height"){WriteMetric(x_140);HashtblForceRemove(x_131.attr,"height");MakeUnit();WriteMetric(x_140);HashtblAddExn(x_131.attr,"height",x_139);return MakeUnit();}else if (x_3812=="viewBox"){WriteMetric(x_140);HashtblForceRemove(x_131.attr,"viewBox");MakeUnit();WriteMetric(x_140);HashtblAddExn(x_131.attr,"viewBox",x_139);return MakeUnit();}else {return MakeUnit();}}else if (x_3811=="properties"){std::string x_3813 = x_137;if (x_3813=="width"){WriteMetric(x_140);HashtblForceRemove(x_131.prop,"width");MakeUnit();WriteMetric(x_140);HashtblAddExn(x_131.prop,"width",x_139);return MakeUnit();}else if (x_3813=="flex-grow"){WriteMetric(x_140);HashtblForceRemove(x_131.prop,"flex-grow");MakeUnit();WriteMetric(x_140);HashtblAddExn(x_131.prop,"flex-grow",x_139);return MakeUnit();}else if (x_3813=="height"){WriteMetric(x_140);HashtblForceRemove(x_131.prop,"height");MakeUnit();WriteMetric(x_140);HashtblAddExn(x_131.prop,"height",x_139);return MakeUnit();}else if (x_3813=="display"){WriteMetric(x_140);HashtblForceRemove(x_131.prop,"display");MakeUnit();WriteMetric(x_140);HashtblAddExn(x_131.prop,"display",x_139);return MakeUnit();}else if (x_3813=="position"){WriteMetric(x_140);HashtblForceRemove(x_131.prop,"position");MakeUnit();WriteMetric(x_140);HashtblAddExn(x_131.prop,"position",x_139);return MakeUnit();}else if (x_3813=="flex-shrink"){WriteMetric(x_140);HashtblForceRemove(x_131.prop,"flex-shrink");MakeUnit();WriteMetric(x_140);HashtblAddExn(x_131.prop,"flex-shrink",x_139);return MakeUnit();}else if (x_3813=="flex-direction"){WriteMetric(x_140);HashtblForceRemove(x_131.prop,"flex-direction");MakeUnit();WriteMetric(x_140);HashtblAddExn(x_131.prop,"flex-direction",x_139);return MakeUnit();}else {return MakeUnit();}}else {return Panic();}},[&](const auto&x_132){return [&](const auto&x_133){return x_126(MakePair(MakePair(x_133,ListNthExn(x_131.children,x_132)),x_129));};});}auto replace_value_x_11(const auto&x_127){return x_126(x_127);}auto x_141(const auto&x_142){auto x_143 = Zro(x_142);auto x_144 = Fst(x_142);auto x_145 = Zro(x_143);auto x_146 = Fst(x_143);return ListMatch(x_145,[&](const auto&x_155){return Panic();},[&](const auto&x_147){return [&](const auto&x_148){return ListMatch(x_148,[&](const auto&x_151){auto x_152 = Zro(x_144);auto x_153 = Fst(x_144);auto x_154 = ListSplitN(x_146.children,x_147);OutputChangeMetric(x_153,IntAdd(layout_size_x_3(ListNthExn(x_146.children,x_147)),layout_size_x_3(x_152)));x_146.children=ListAppend(Zro(x_154),Cons(x_152,ListTailExn(Fst(x_154))));return MakeUnit();},[&](const auto&x_149){return [&](const auto&x_150){return x_141(MakePair(MakePair(x_148,ListNthExn(x_146.children,x_147)),x_144));};});};});}auto replace_layout_node_x_10(const auto&x_142){return x_141(x_142);}auto x_156(const auto&x_157){auto x_158 = Zro(x_157);auto x_159 = Fst(x_157);auto x_160 = Zro(x_158);auto x_161 = Fst(x_158);return ListMatch(x_160,[&](const auto&x_310){return Panic();},[&](const auto&x_162){return [&](const auto&x_163){return ListMatch(x_163,[&](const auto&x_166){auto x_167 = Zro(x_159);auto x_168 = Fst(x_159);InputChangeMetric(x_168,IntAdd(node_size_x_4(ListNthExn(x_161.children,x_162)),node_size_x_4(x_167)));auto x_169 = ListSplitN(x_161.children,x_162);auto x_170 = Zro(x_169);auto x_171 = Fst(x_169);ListMatch(x_171,[&](const auto&x_240){return Panic();},[&](const auto&x_172){return [&](const auto&x_173){OptionMatch(x_172.prev,[&](const auto&x_175){return MakeUnit();},[&](const auto&x_174){x_174.next=x_172.next;});OptionMatch(x_172.next,[&](const auto&x_177){return MakeUnit();},[&](const auto&x_176){x_176.prev=x_172.prev;});x_161.children=ListAppend(x_170,x_173);return MakeUnit();};});auto x_241 = ListSplitN(x_161.children,x_162);auto x_242 = Zro(x_241);auto x_243 = Fst(x_241);x_161.children=ListAppend(x_242,Cons(x_167,x_243));OptionMatch(ListLast(x_242),[&](const auto&x_245){x_167.prev=None();},[&](const auto&x_244){x_167.prev=Some(x_244);x_244.next=Some(x_167);});OptionMatch(ListHead(x_243),[&](const auto&x_247){x_167.next=None();},[&](const auto&x_246){x_167.next=Some(x_246);x_246.prev=Some(x_167);});x_167.parent=Some(x_161);MakeUnit();return MakeUnit();},[&](const auto&x_164){return [&](const auto&x_165){return x_156(MakePair(MakePair(x_163,ListNthExn(x_161.children,x_162)),x_159));};});};});}auto replace_node_x_9(const auto&x_157){return x_156(x_157);}auto x_311(const auto&x_312){auto x_313 = Zro(x_312);auto x_314 = Fst(x_312);auto x_315 = Zro(x_313);auto x_316 = Fst(x_313);return ListMatch(x_315,[&](const auto&x_323){return Panic();},[&](const auto&x_317){return [&](const auto&x_318){return ListMatch(x_318,[&](const auto&x_321){OutputChangeMetric(x_314,layout_size_x_3(ListNthExn(x_316.children,x_317)));auto x_322 = ListSplitN(x_316.children,x_317);x_316.children=ListAppend(Zro(x_322),ListTailExn(Fst(x_322)));},[&](const auto&x_319){return [&](const auto&x_320){return x_311(MakePair(MakePair(x_318,ListNthExn(x_316.children,x_317)),x_314));};});};});}auto remove_layout_node_x_8(const auto&x_312){return x_311(x_312);}auto x_324(const auto&x_325){auto x_326 = Zro(x_325);auto x_327 = Fst(x_325);auto x_328 = Zro(x_326);auto x_329 = Fst(x_326);return ListMatch(x_328,[&](const auto&x_407){return Panic();},[&](const auto&x_330){return [&](const auto&x_331){return ListMatch(x_331,[&](const auto&x_334){InputChangeMetric(x_327,node_size_x_4(ListNthExn(x_329.children,x_330)));auto x_335 = ListSplitN(x_329.children,x_330);auto x_336 = Zro(x_335);auto x_337 = Fst(x_335);return ListMatch(x_337,[&](const auto&x_406){return Panic();},[&](const auto&x_338){return [&](const auto&x_339){OptionMatch(x_338.prev,[&](const auto&x_341){return MakeUnit();},[&](const auto&x_340){x_340.next=x_338.next;});OptionMatch(x_338.next,[&](const auto&x_343){return MakeUnit();},[&](const auto&x_342){x_342.prev=x_338.prev;});x_329.children=ListAppend(x_336,x_339);return MakeUnit();};});},[&](const auto&x_332){return [&](const auto&x_333){return x_324(MakePair(MakePair(x_331,ListNthExn(x_329.children,x_330)),x_327));};});};});}auto remove_node_x_7(const auto&x_325){return x_324(x_325);}auto x_408(const auto&x_409){auto x_410 = Zro(x_409);auto x_411 = Fst(x_409);auto x_412 = Zro(x_410);auto x_413 = Fst(x_410);return ListMatch(x_412,[&](const auto&x_422){return Panic();},[&](const auto&x_414){return [&](const auto&x_415){return ListMatch(x_415,[&](const auto&x_418){auto x_419 = Zro(x_411);auto x_420 = Fst(x_411);OutputChangeMetric(x_420,layout_size_x_3(x_419));auto x_421 = ListSplitN(x_413.children,x_414);x_413.children=ListAppend(Zro(x_421),Cons(x_419,Fst(x_421)));},[&](const auto&x_416){return [&](const auto&x_417){return x_408(MakePair(MakePair(x_415,ListNthExn(x_413.children,x_414)),x_411));};});};});}auto add_layout_node_x_6(const auto&x_409){return x_408(x_409);}auto x_423(const auto&x_424){auto x_425 = Zro(x_424);auto x_426 = Fst(x_424);auto x_427 = Zro(x_425);auto x_428 = Fst(x_425);return ListMatch(x_427,[&](const auto&x_505){return Panic();},[&](const auto&x_429){return [&](const auto&x_430){return ListMatch(x_430,[&](const auto&x_433){auto x_434 = Zro(x_426);auto x_435 = Fst(x_426);InputChangeMetric(x_435,node_size_x_4(x_434));auto x_436 = ListSplitN(x_428.children,x_429);auto x_437 = Zro(x_436);auto x_438 = Fst(x_436);x_428.children=ListAppend(x_437,Cons(x_434,x_438));OptionMatch(ListLast(x_437),[&](const auto&x_440){x_434.prev=None();},[&](const auto&x_439){x_434.prev=Some(x_439);x_439.next=Some(x_434);});OptionMatch(ListHead(x_438),[&](const auto&x_442){x_434.next=None();},[&](const auto&x_441){x_434.next=Some(x_441);x_441.prev=Some(x_434);});x_434.parent=Some(x_428);return MakeUnit();},[&](const auto&x_431){return [&](const auto&x_432){return x_423(MakePair(MakePair(x_430,ListNthExn(x_428.children,x_429)),x_426));};});};});}auto add_node_x_5(const auto&x_424){return x_423(x_424);}auto x_506(const auto&x_507){return IntAdd(1,ListIntSum(x_507.children,[&](const auto&x_508){return x_506(x_508);}));}auto node_size_x_4(const auto&x_507){return x_506(x_507);}auto x_509(const auto&x_510){return IntAdd(1,ListIntSum(x_510.children,[&](const auto&x_511){return x_509(x_511);}));}auto layout_size_x_3(const auto&x_510){return x_509(x_510);}auto x_512(const auto&x_513){return MakeLayoutNode(ListMap(JsonToList(JsonMember("children",x_513)),[&](const auto&x_514){return x_512(x_514);}));}auto json_to_layout_node_x_2(const auto&x_513){return x_512(x_513);}auto x_515(const auto&x_516){return MakeNode(x_516.name,x_516.attr,x_516.prop,x_516.extern_id,ListMap(x_516.children,[&](const auto&x_517){return x_515(x_517);}));}auto node_to_fs_node_x_1(const auto&x_516){return x_515(x_516);}auto x_518(const auto&x_519){return MakeNode(JsonToString(JsonMember("name",x_519)),JsonToDict(JsonMember("attributes",x_519)),JsonToDict(JsonMember("properties",x_519)),JsonToInt(JsonMember("id",x_519)),ListMap(JsonToList(JsonMember("children",x_519)),[&](const auto&x_520){return x_518(x_520);}));}auto json_to_node_aux_x_0(const auto&x_519){return x_518(x_519);}int main(){return WithOutFile("hn_type.out",[&](const auto&x_14){PrintEndline("RUNNING FS");return WithInFile("command.json",[&](const auto&x_15){auto x_16 = MakeRef(0);auto x_17 = FreshMetric();auto x_18 = JsonOfString(InputLine(x_15));auto x_19 = JsonOfString(InputLine(x_15));auto x_20 = MakeStack();PushStack(x_20,x_18);PushStack(x_20,x_19);Assert(StringEqual(JsonToString(JsonMember("name",x_18)),"init"));Assert(StringEqual(JsonToString(JsonMember("name",x_19)),"layout_init"));auto x_23 = [&](){auto x_21 = json_to_node_aux_x_0(JsonMember("node",x_18));x_21.parent=None();x_21.prev=None();x_21.next=None();MakeUnit();return x_21;}();auto x_24 = json_to_layout_node_x_2(JsonMember("node",x_19));OutputChangeMetric(x_17,layout_size_x_3(x_24));InputChangeMetric(x_17,node_size_x_4(x_23));JsonToChannel(x_14,AssocToJson(Cons(MakePair("name",StringToJson("FS")),Cons(MakePair("diff_num",IntToJson(ReadRef(x_16))),Cons(MakePair("read_count",IntToJson(MetricReadCount(x_17))),Cons(MakePair("meta_read_count",IntToJson(MetricMetaReadCount(x_17))),Cons(MakePair("write_count",IntToJson(MetricWriteCount(x_17))),Cons(MakePair("meta_write_count",IntToJson(MetricMetaWriteCount(x_17))),Cons(MakePair("queue_size_acc",IntToJson(MetricQueueSizeAcc(x_17))),Cons(MakePair("input_change_count",IntToJson(MetricInputChangeCount(x_17))),Cons(MakePair("output_change_count",IntToJson(MetricOutputChangeCount(x_17))),Cons(MakePair("html",StringToJson("")),Cons(MakePair("command",ListToJson(StackToList(x_20))),Nil())))))))))))));OutputString(x_14,"\n");ResetMetric(x_17);ClearStack(x_20);WriteRef(x_16,IntAdd(ReadRef(x_16),1));auto x_29 = [&](){auto x_27 = node_to_fs_node_x_1(x_23);x_27.parent=None();x_27.prev=None();x_27.next=None();MakeUnit();return x_27;}();AssertNodeValueEqual(x_23,x_29);MakeUnit();PrintEndline("EVAL OK!");IterLines(x_15,[&](const auto&x_32){auto x_33 = JsonOfString(x_32);PushStack(x_20,x_33);std::string x_3814 = JsonToString(JsonMember("name",x_33));if (x_3814=="add"){return add_node_x_5(MakePair(MakePair(ListMap(JsonToList(JsonMember("path",x_33)),[&](const auto&x_36){return JsonToInt(x_36);}),x_23),MakePair([&](){auto x_34 = json_to_node_aux_x_0(JsonMember("node",x_33));x_34.parent=None();x_34.prev=None();x_34.next=None();MakeUnit();return x_34;}(),x_17)));}else if (x_3814=="recalculate"){JsonToChannel(x_14,AssocToJson(Cons(MakePair("name",StringToJson("FS")),Cons(MakePair("diff_num",IntToJson(ReadRef(x_16))),Cons(MakePair("read_count",IntToJson(MetricReadCount(x_17))),Cons(MakePair("meta_read_count",IntToJson(MetricMetaReadCount(x_17))),Cons(MakePair("write_count",IntToJson(MetricWriteCount(x_17))),Cons(MakePair("meta_write_count",IntToJson(MetricMetaWriteCount(x_17))),Cons(MakePair("queue_size_acc",IntToJson(MetricQueueSizeAcc(x_17))),Cons(MakePair("input_change_count",IntToJson(MetricInputChangeCount(x_17))),Cons(MakePair("output_change_count",IntToJson(MetricOutputChangeCount(x_17))),Cons(MakePair("html",StringToJson("")),Cons(MakePair("command",ListToJson(StackToList(x_20))),Nil())))))))))))));OutputString(x_14,"\n");ResetMetric(x_17);ClearStack(x_20);WriteRef(x_16,IntAdd(ReadRef(x_16),1));auto x_39 = [&](){auto x_37 = node_to_fs_node_x_1(x_23);x_37.parent=None();x_37.prev=None();x_37.next=None();MakeUnit();return x_37;}();AssertNodeValueEqual(x_23,x_39);return MakeUnit();}else if (x_3814=="remove"){return remove_node_x_7(MakePair(MakePair(ListMap(JsonToList(JsonMember("path",x_33)),[&](const auto&x_40){return JsonToInt(x_40);}),x_23),x_17));}else if (x_3814=="replace"){return replace_node_x_9(MakePair(MakePair(ListMap(JsonToList(JsonMember("path",x_33)),[&](const auto&x_43){return JsonToInt(x_43);}),x_23),MakePair([&](){auto x_41 = json_to_node_aux_x_0(JsonMember("node",x_33));x_41.parent=None();x_41.prev=None();x_41.next=None();MakeUnit();return x_41;}(),x_17)));}else if (x_3814=="replace_value"){return replace_value_x_11(MakePair(MakePair(ListMap(JsonToList(JsonMember("path",x_33)),[&](const auto&x_44){return JsonToInt(x_44);}),x_23),MakePair(MakePair(JsonToString(JsonMember("type",x_33)),JsonToString(JsonMember("key",x_33))),MakePair(JsonToValue(JsonMember("value",x_33)),x_17))));}else if (x_3814=="delete_value"){return delete_value_x_12(MakePair(MakePair(ListMap(JsonToList(JsonMember("path",x_33)),[&](const auto&x_45){return JsonToInt(x_45);}),x_23),MakePair(MakePair(JsonToString(JsonMember("type",x_33)),JsonToString(JsonMember("key",x_33))),x_17)));}else if (x_3814=="insert_value"){return insert_value_x_13(MakePair(MakePair(ListMap(JsonToList(JsonMember("path",x_33)),[&](const auto&x_46){return JsonToInt(x_46);}),x_23),MakePair(MakePair(JsonToString(JsonMember("type",x_33)),JsonToString(JsonMember("key",x_33))),MakePair(JsonToValue(JsonMember("value",x_33)),x_17))));}else if (x_3814=="layout_remove"){return remove_layout_node_x_8(MakePair(MakePair(ListMap(JsonToList(JsonMember("path",x_33)),[&](const auto&x_47){return JsonToInt(x_47);}),x_24),x_17));}else if (x_3814=="layout_add"){return add_layout_node_x_6(MakePair(MakePair(ListMap(JsonToList(JsonMember("path",x_33)),[&](const auto&x_48){return JsonToInt(x_48);}),x_24),MakePair(json_to_layout_node_x_2(JsonMember("node",x_33)),x_17)));}else if (x_3814=="layout_replace"){return replace_layout_node_x_10(MakePair(MakePair(ListMap(JsonToList(JsonMember("path",x_33)),[&](const auto&x_49){return JsonToInt(x_49);}),x_24),MakePair(json_to_layout_node_x_2(JsonMember("node",x_33)),x_17)));}else if (x_3814=="layout_info_changed"){return OutputChangeMetric(x_17,1);}else {return Panic();}});PrintEndline("INCREMENTAL EVAL OK!");MakeUnit();return MakeUnit();});});}